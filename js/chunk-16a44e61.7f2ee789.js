(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16a44e61","chunk-9542048e","chunk-2d20fb42"],{"219c":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"relative w-24 h-24 p-px bg-gray-300 border-0 rounded-full cursor-pointer",on:{click:e.selectAvatar}},[r("div",{staticClass:"absolute z-10 flex items-center justify-center w-5 h-5 bg-gray-800 rounded-full place-items-center",staticStyle:{top:"63.5%",right:"-3%"}},[r("svg",{staticClass:"w-4 h-4 text-white",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])]),r("img",{directives:[{name:"show",rawName:"v-show",value:e.current&&!e.previewAvatar,expression:"current && !previewAvatar"}],staticClass:"object-cover w-24 h-24 overflow-hidden rounded-full",attrs:{src:e.current}}),r("img",{directives:[{name:"show",rawName:"v-show",value:e.previewAvatar,expression:"previewAvatar"}],staticClass:"object-cover w-24 h-24 overflow-hidden rounded-full",attrs:{src:e.previewAvatar}})]),r("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file"},on:{input:e.handleAvatarSelection}})])},n=[],o={name:"UploadAvatar",data:function(){return{previewAvatar:null}},props:{value:{required:!1},current:{required:!1}},methods:{selectAvatar:function(){this.$refs.fileInput.click()},handleAvatarSelection:function(){var e=this,t=this.$refs.fileInput,r=t.files;if(r&&r[0]){var a=new FileReader;a.onload=function(t){e.previewAvatar=t.target.result},a.readAsDataURL(r[0]),this.$emit("input",r[0])}}}},i=o,s=r("2877"),l=Object(s["a"])(i,a,n,!1,null,null,null);t["a"]=l.exports},"4aee":function(e,t,r){},5010:function(e,t,r){},"58b4":function(e,t,r){"use strict";r("a7fe")},7686:function(e,t,r){"use strict";r("4aee")},9779:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("slide-over-right",{attrs:{id:e.sorId,"full-width":!0}},[r("loading",{attrs:{active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}}),r("div",{staticClass:"flex flex-wrap"},[r("div",{staticClass:"w-1/2 md-max:w-full"},[r("div",{staticClass:"flex items-center pl-8 mt-6 md-max:pb-6"},[r("div",{staticClass:"items-center justify-center cursor-pointer back-button",on:{click:e.goBack}},[r("i",{staticClass:"fas fa-arrow-left"})]),r("h2",{staticClass:"ml-3 font-semibold text-gray-900 text-22px"},[e._v(" "+e._s(e.titleText)+" ")])]),r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.handleSubmit;return[r("form",{staticClass:"px-6",on:{submit:function(t){return t.preventDefault(),a(e.confirmSubmit)}}},[r("div",{staticClass:"grid grid-cols-1 gap-2 mt-4 lg:grid-cols-2"},[r("text-input",{attrs:{rules:"required",name:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.rentStationName"),label:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.rentStationName")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("AppInput",{attrs:{type:"richselect",name:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.assignedServiceArea"),label:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.assignedServiceArea"),rules:"required",placeholder:e.getServiceAreaPlaceholder,disabled:e.getServiceAreaDisabledState,"text-attribute":"name","value-attribute":"id",options:e.service_areas},model:{value:e.form.geofence,callback:function(t){e.$set(e.form,"geofence",t)},expression:"form.geofence"}})],1),r("div",{staticClass:"flex items-end gap-2 mt-1"},[r("div",{staticClass:"w-full"},[r("PlacesAutocomplete",{attrs:{label:e.$t("components.restrictedAreaManagement.addEdit.steps.details.title.searchForLocation"),disabled:!e.form.geofence,placeholder:!1===!!e.form.geofence?e.$t("components.rentStationAreaManagement.addEdit.steps.details.placeHolder.serviceAreaAtFirst"):e.$t("components.rentStationAreaManagement.addEdit.steps.details.placeHolder.enterAddress")},on:{"update:place":e.onUpdatingPlace,"clear:place":function(){return e.place=null}}})],1),r("UploadGeoFile",{on:{input:e.addKmlLayer}})],1),r("div",{staticClass:"grid grid-cols-1 gap-2 mt-4 "},[r("AppInput",{attrs:{type:"richselect",name:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.assignedRentStationOwner"),label:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.assignedRentStationOwner"),placeholder:e.getOwnersPlaceholder,disabled:e.getOwnersDisabledState,"text-attribute":"name","value-attribute":"id",options:e.getOwners},model:{value:e.form.owner.id,callback:function(t){e.$set(e.form.owner,"id",t)},expression:"form.owner.id"}})],1),r("div",{staticClass:"grid grid-cols-1 gap-2"},[r("ValidationProvider",{attrs:{name:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.address"),rules:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("input-label",{attrs:{error:a[0],text:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.address")}}),r("t-textarea",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),r("input-error-item",{attrs:{message:a[0]}})]}}],null,!0)})],1),r("div",{staticClass:"grid grid-cols-1 gap-2 "},[r("ValidationProvider",{attrs:{name:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.rentStationAreaNote"),rules:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("input-label",{attrs:{error:a[0],text:e.$t("components.rentStationAreaManagement.addEdit.steps.details.title.rentStationAreaNote")}}),r("t-textarea",{attrs:{rules:"required"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),r("input-error-item",{attrs:{message:a[0]}})]}}],null,!0)})],1),r("button",{ref:"submitButton",staticClass:"hidden",attrs:{type:"submit"}},[e._v(" Save ")])])]}}])}),r("div",{staticClass:"flex items-center justify-end pr-2 mt-6"},[r("anchor-button",{attrs:{variant:"secondary"},on:{click:e.goBack}},[e._v(" "+e._s(e.$t("components.stepNavigation.cancel"))+" ")]),r("t-button",{staticClass:"ml-3",attrs:{type:"submit"},on:{click:function(t){return e.submit()}}},[e._v(e._s(e.$t("components.stepNavigation.save")))])],1)],1),r("div",{staticClass:"w-1/2 md-max:w-full md-max:pt-6"},[r("gmap-map",{ref:"map",staticStyle:{width:"100%",height:"100vh"},attrs:{zoom:e.zoom,center:e.center,"map-type-id":"terrain"}},[r("gmap-polygon",{attrs:{paths:e.parseToOverlay(e.form.coords),editable:!0,options:e.drawingOptions},on:{paths_changed:function(t){return e.updateEdited(t)}}})],1)],1)])],1)},n=[],o=r("5530"),i=r("b85c"),s=r("2909"),l=r("1da1"),c=(r("96cf"),r("d3b7"),r("3ca3"),r("ddb0"),r("b64b"),r("159b"),r("d81d"),r("4de4"),r("99af"),r("b0c0"),r("a4d3"),r("e01a"),r("498a"),r("ac1f"),r("1276"),r("5b81"),r("07ac"),r("25f0"),r("9f07")),d=r.n(c),g=r("4a9d"),u=r("ab03"),p=r("755e"),f=r("c820"),h=r("c18b"),v={name:"AddEditRentStationArea",components:{UploadGeoFile:h["c"],SlideOverRight:function(){return r.e("chunk-67db83f0").then(r.bind(null,"04ec"))},AnchorButton:function(){return r.e("chunk-389dd0fb").then(r.bind(null,"15e7"))},TextInput:function(){return r.e("chunk-42b332c1").then(r.bind(null,"e94b"))},InputLabel:function(){return r.e("chunk-2d0d3e80").then(r.bind(null,"5f81"))},PlacesAutocomplete:function(){return r.e("chunk-76a85986").then(r.bind(null,"758b"))}},data:function(){return{isLoading:!1,ownerIsLoading:!1,fleetIsLoading:!1,title:"Rent Station Area",ownersList:[],all_rent_station_areas:[],rent_station_areas:[],service_areas:[],restricted_areas:[],parking_areas:[],slow_speed_areas:[],reward_zones:[],sunpod_station_areas:[],item:{},form:{name:null,geofence:null,coords:null,address:"",description:"",owner:{id:""}},center:{lat:10,lng:10},errors:[],sorId:u["a"].events.sorId,scrollwheel:!0,zoom:12,zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!0,fullscreenControl:!0,markers:[{}],edited:null,map:null,drawingManager:null,mapDrawingMode:"Polygonal",parsedPolygon:null,parsedServicePolygon:null,drawingOptions:{fillColor:"rgba(88, 28, 135, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#581C87",clickable:!0,draggable:!0,editable:!0,zIndex:8},serviceDrawingOptions:{fillColor:"#4aff5c20",fillOpacity:1,strokeWeight:2,strokeColor:"#00b44d",clickable:!1,draggable:!1,editable:!1,zIndex:1},restrictedDrawingOptions:{fillColor:"rgba(255, 0, 0, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#ff0000",clickable:!1,draggable:!1,editable:!1,zIndex:2},slowSpeedDrawingOptions:{fillColor:"rgba(156, 163, 175, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#9CA3AF",clickable:!1,draggable:!1,editable:!1,zIndex:3},parkingDrawingOptions:{fillColor:"rgba(30, 152, 254, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#00acff",clickable:!1,draggable:!1,editable:!1,zIndex:4},rentStationDrawingOptions:{fillColor:"rgba(88, 28, 135, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#581C87",clickable:!1,draggable:!1,editable:!1,zIndex:5},sunpodStationDrawingOptions:{fillColor:"rgba(190, 24, 93, 0.13",fillOpacity:1,strokeWeight:3,strokeColor:"#BE185D",clickable:!1,draggable:!1,editable:!1,zIndex:6},rewardZoneDrawingOptions:{fillColor:"rgba(204, 204, 20, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#CCCC00",clickable:!1,draggable:!1,editable:!1,zIndex:7},service_bounds:null,theZoom:null,location_name:"",current_coords:""}},computed:{google:p["gmapApi"],drawingType:function(){return[{id:"CIRCLE",name:"Circle"},{id:"POLYGON",name:"Polygon"}]},isEditing:function(){return Object.keys(this.item).length>1},titleText:function(){return this.isEditing?this.$t("components.rentStationAreaManagement.addEdit.headline.update"):this.$t("components.rentStationAreaManagement.addEdit.headline.add")},actionButtonText:function(){return this.isEditing?"Update":"Save"},getServiceArea:function(){return this.form.geofence||void 0},getServiceAreaPlaceholder:function(){return this.fleetIsLoading?this.$t("components.rentStationAreaManagement.addEdit.steps.details.placeHolder.assignedServiceArea.loading"):this.$t("components.rentStationAreaManagement.addEdit.steps.details.placeHolder.assignedServiceArea.selectServiceArea")},getServiceAreaDisabledState:function(){return!!this.fleetIsLoading},getOwnersPlaceholder:function(){return this.form.geofence?this.ownerIsLoading?this.$t("components.rentStationAreaManagement.addEdit.steps.details.placeHolder.assignedRentStationOwner.loading"):!1===this.ownerIsLoading&&this.ownersList.length>=0&&this.ownersList.length<2?this.$t("components.rentStationAreaManagement.addEdit.steps.details.placeHolder.assignedRentStationOwner.noOwnersFound"):this.$t("components.rentStationAreaManagement.addEdit.steps.details.placeHolder.assignedRentStationOwner.selectOwner"):this.$t("components.rentStationAreaManagement.addEdit.steps.details.placeHolder.assignedRentStationOwner.selectServiceAreaFirst")},getOwnersDisabledState:function(){return!this.form.geofence||(!!this.ownerIsLoading||!1===this.ownerIsLoading&&this.ownersList.length>=0&&this.ownersList.length<2)},getOwners:function(){return this.ownersList}},watch:{getServiceArea:function(e){var t=this;console.log("updateGeof = ",this.service_areas),this.service_areas.forEach((function(r){if(r.id==e)if(t.isEditing)t.current_coords=r.coords;else{if(!t.$refs.map)return;t.$refs.map.$mapPromise.then((function(e){t.map=e,t.removeOverlayMap(),t.parsedPolygon&&t.parsedPolygon.setMap(null);var a=t.parseToOverlay(r.coords);t.getServiceBounds(a),t.setServiceOverlayOnMap(a),t.setMapCenterToDrawingCenter(a,!1),t.current_coords=r.coords,t.drawOtherZonesOnMap()}))}else t.removeOverlayMap()}))},"form.geofence":{deep:!1,immediate:!0,handler:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e){r.next=5;break}return t.ownerIsLoading=!0,a=t.service_areas.filter((function(t){return t.id===e})),r.next=5,t.$http.get("".concat(f["c"].user.rentStationOwner.index(),"?dropdown&fleet=").concat(a[0].fleet.id)).then((function(e){t.ownersList=e.data.map((function(e){return{id:e.id,name:"".concat(e.full_name)}})),t.ownersList=[{id:null,name:"None"}].concat(Object(s["a"])(t.ownersList))})).catch((function(e){return console.log(e.response)})).finally((function(){return t.ownerIsLoading=!1}));case 5:case"end":return r.stop()}}),r)})))()}}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadServiceDropdown();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;g["a"].$on(u["a"].events.editingData,(function(t){e.theZoom=null,t.id&&void 0!=t.id?(e.item=t,e.form={name:t.name,geofence:t.geofence.id,coords:t.coords,address:t.address,description:t.description,owner:{id:t.owner?t.owner.id:""}},e.rent_station_areas=e.all_rent_station_areas.filter((function(e){return e.id!==t.id}))):(e.form={name:null,geofence:null,coords:null,address:"",description:"",owner:{id:""}},e.item={},e.rent_station_areas=e.all_rent_station_areas,setTimeout((function(){e.$refs.map&&e.$refs.map.$mapPromise.then((function(t){console.log("Hitting promise with",t),e.map=t,e.initDrawingMode()}))}),400)),console.log("data = ",t,e.editingData)})),this.$log.debug("EditData:",this.form),this.getCurrentLocation(),console.log("Map Ref",this.$refs.map)},updated:function(){var e=this;this.$nextTick((function(){var t=this;console.log("updated"),e.$refs.map&&(this.theZoom||this.$refs.map.$mapPromise.then((function(e){if(console.log("Hitting promise with",e),t.map=e,t.isEditing){if(console.warn({isE:t.isEditing}),t.item.geofence.coords){t.removeOverlayMap();var r=t.parseToOverlay(t.item.geofence.coords);t.getServiceBounds(r),t.setServiceOverlayOnMap(r),t.drawOtherZonesOnMap()}var a=t.parseToOverlay(t.form.coords);t.setMapCenterToDrawingCenter(a,!1)}t.initDrawingMode()})))}))},methods:{addKmlLayer:function(e){var t,r=[],a=new DOMParser,n=a.parseFromString(e,"text/xml"),o=n.getElementsByTagName("Placemark"),s=Object(i["a"])(o);try{for(s.s();!(t=s.n()).done;){var l=t.value,c=l.getElementsByTagName("Polygon");console.log("coordinatesElement",c);var d,g=Object(i["a"])(c);try{for(g.s();!(d=g.n()).done;){for(var u=d.value,p=u.getElementsByTagName("outerBoundaryIs")[0],f=p.getElementsByTagName("LinearRing")[0],h=f.getElementsByTagName("coordinates")[0],v=h.textContent.trim(),m=v.split(/[\s,]+/),b=0;b<m.length;b+=3){var w=parseFloat(m[b+1]),y=parseFloat(m[b]);r.push({lat:w,lng:y})}console.log("addKmlLayer-i",r)}}catch(x){g.e(x)}finally{g.f()}}}catch(x){s.e(x)}finally{s.f()}this.form.coords=this.getCoordStrFromCoordArray(r,!1),console.log("addKmlLayer",this.form.coords),this.drawKMLArea(this.form.coords)},drawKMLArea:function(e){var t=this.parseToOverlay(e);this.setOverlayOnMap(t),this.setMapCenterToDrawingCenter(t,!1)},updateEdited:function(e){for(var t="",r=0;r<e.getLength();r++)for(var a=0;a<e.getAt(r).getLength();a++){var n=e.getAt(r).getAt(a);t=0===r&&0===a?t.concat("{".concat(n.lat(),",").concat(n.lng(),"}")):t.concat(",","{".concat(n.lat(),",").concat(n.lng(),"}"))}this.form.coords=t},goBack:function(){this.theZoom=null,dispatchEvent(new Event(u["a"].events.sorToggle))},initDrawingMode:function(){this.drawingManager&&this.drawingManager.setMap(null),this.drawingManager=new this.google.maps.drawing.DrawingManager({drawingMode:this.google.maps.drawing.OverlayType.POLYGON,drawingControl:!0,drawingControlOptions:{position:this.google.maps.ControlPosition.TOP_CENTER,drawingModes:[this.google.maps.drawing.OverlayType.POLYGON,this.google.maps.drawing.OverlayType.CIRCLE]},circleOptions:this.drawingOptions,polygonOptions:this.drawingOptions}),console.log("Manager ",this.drawingManager),this.drawingManager.setMap(this.map),this.google.maps.event.addListener(this.drawingManager,"overlaycomplete",this.overlayCompleted),this.google.maps.event.addListener(this.drawingManager,"circlecomplete",this.circleCompleted)},getServiceBounds:function(e){var t,r=new this.google.maps.LatLngBounds,a=Object(i["a"])(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;r.extend(n)}}catch(o){a.e(o)}finally{a.f()}this.service_bounds=r},setServiceOverlayOnMap:function(e){this.parsedServicePolygon=new this.google.maps.Polygon(Object(o["a"])({paths:e},this.serviceDrawingOptions)),this.parsedServicePolygon.setMap(this.map),console.log("po = ",this.parsedServicePolygon)},removeOverlayMap:function(){if(this.parsedServicePolygon&&this.parsedServicePolygon.setMap(null),this.parsedPolygon&&this.parsedPolygon.setMap(null),this.otherParsedPolygons)for(var e=0;e<this.otherParsedPolygons.length;++e)this.otherParsedPolygons[e].setMap(null)},checkContains:function(e){var t,r=!0,a=new this.google.maps.LatLngBounds,n=Object(i["a"])(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;a.extend(o)}}catch(d){n.e(d)}finally{n.f()}this.form.center_coords=a.getCenter().lat()+","+a.getCenter().lng();var s,l=Object(i["a"])(e);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(!this.service_bounds.contains(c)){r=!1;break}}}catch(d){l.e(d)}finally{l.f()}return console.log(r),r},circleCompleted:function(e){if(e.type==this.google.maps.drawing.OverlayType.Circle){this.parsedPolygon&&this.parsedPolygon.setMap(null),this.mapDrawingMode="Circular",this.form.draw_type="C";var t=this.getCircleCoords(e);this.setDrawnCoords(t,e)}},overlayCompleted:function(e){if(e.type==this.google.maps.drawing.OverlayType.POLYGON){this.parsedPolygon&&this.parsedPolygon.setMap(null),this.mapDrawingMode="Polygonal",this.form.draw_type="P";var t=this.getPolygonCoords(e);this.setDrawnCoords(t,e)}},bindPolygonClickListener:function(e){console.log(e)},getCircleCoords:function(e){for(var t=20,r=[],a=0;a<t;a++)r.push(this.google.maps.geometry.spherical.computeOffset(e.getCenter(),e.getRadius(),360*a/t));console.log("Circle Path",r);for(var n="",o=0;o<r.length;o++)console.log(r[o].lat()),n+="{".concat(r[o].lat(),",").concat(r[o].lng(),"},");return console.log("Circle draw completed",n),n},getCoordStrFromCoordArray:function(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a="",n=Object(i["a"])(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;console.log(o),a+="{".concat(r?o.lat():o.lat,",").concat(r?o.lng():o.lng,"},")}}catch(s){n.e(s)}finally{n.f()}return console.log("Poly draw completed",a),a},getPolygonCoords:function(e){var t=e.overlay.getPath().getArray();return this.getCoordStrFromCoordArray(t,!0)},setDrawnCoords:function(e,t){"Rent Station Area "===this.title?this.title="Rent Station Area":this.title="Rent Station Area ",this.form.coords=e,console.log(t),this.parsedPolygon&&this.parsedPolygon.setMap(null),this.parsedPolygon!==t&&(t.overlay?t.overlay.setMap(null):t.setMap(null));var r=this;this.$nextTick((function(){var t=r.parseToOverlay(e);null!=this.service_bounds&&this.checkContains(t)&&r.setMapCenterToDrawingCenter(t,!0)}))},parseToOverlay:function(e){if(e){var t=e.replaceAll("{","");t=t.replaceAll("}","");var r=t.split(",");Array.isArray(r)&&!r.length%2!==0||","==r[r.length-1]&&(console.log("Hit pop"),r.pop());for(var a=[],n=0;n<r.length;n+=2){var o=parseFloat(r[n]),i=parseFloat(r[n+1]);isNaN(o)||isNaN(i)||a.push({lat:o,lng:i})}return a}},setOverlayOnMap:function(e){this.parsedPolygon=new this.google.maps.Polygon(Object(o["a"])({paths:e},this.drawingOptions)),this.parsedPolygon.setMap(this.map),console.log(e),console.log("SET ON MAP")},setMapCenterToDrawingCenter:function(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=new this.google.maps.LatLngBounds,s=Object(i["a"])(e);try{for(s.s();!(t=s.n()).done;){var l=t.value;o.extend(l)}}catch(d){s.e(d)}finally{s.f()}var c=o.getCenter();console.log("NEW CENTER ",c,r,a,n),r&&this.map.panTo(c),a?(this.center.lat=a.lat,this.center.lng=a.lng):(this.center.lat=c.lat(),this.center.lng=c.lng()),n?this.zoom=n:this.map.fitBounds(o)},getCurrentLocation:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.center.lat=t.coords.latitude,e.center.lng=t.coords.longitude}))},checkValidPolygon:function(e){if(!e)return!1;var t=e.split(",");return Array.isArray(t)&&t.length>2},submit:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("COORDS",this.form.coords),this.checkValidPolygon(this.form.coords)){e.next=4;break}return alert("Please draw a valid polygon containing more than two coordinates"),e.abrupt("return");case 4:if(console.log("form===",this.form),void 0!==this.form.coords&&null!==this.form.coords){e.next=11;break}return this.isLoading=!1,alert("Please draw a valid Rent Station Area (Polygon/Circle)"),e.abrupt("return");case 11:this.isLoading=!1;case 12:this.$refs.submitButton.click();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),confirmSubmit:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLoading=!0,void 0==this.form.description&&(this.form.description=""),void 0==this.form.address&&(this.form.address=""),delete this.form.draw_type,this.form.description){e.next=9;break}return e.next=7,fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(this.center.lat,",").concat(this.center.lng,"&key=AIzaSyC6mg5slEqKmJxXDo6kLgYtHXg_S0AQJ4A")).then((function(e){return e.json()})).then((function(e){t.saveData(e.results[0].formatted_address)})).catch((function(){return t.saveData("".concat(t.center.lat,",").concat(t.center.lng))}));case 7:e.next=11;break;case 9:return e.next=11,this.saveData();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveData:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n,o,i,s,l,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"",n=t.isEditing?"PATCH":"POST",o=t.isEditing?u["a"].api.update(t.item.id):u["a"].api.create,i=(new d.a).toFormData(),i.append("coords",t.form.coords),i.append("geofence",t.form.geofence),i.append("name",t.form.name),i.append("address",t.form.address?t.form.address:""),i.append("description",t.form.description?t.form.description:"".concat(a)),i.append("center_coords",t.form.center_coords),i.append("owner",t.form.owner.id?t.form.owner.id:""),s=t.isEditing?"Rent Station Area updated successfully":"Rent Station  Area added successfully",r.prev=12,r.next=15,t.$http({method:n,url:o,data:i});case 15:return l=r.sent,console.log("response = ",o,"  ",n,"  "),console.log("data = ",l),r.next=20,t.loadServiceDropdown();case 20:return t.isLoading=!1,dispatchEvent(new Event(u["a"].events.sorToggle)),t.$emit("refresh"),t.form={},t.$notify({group:"generic",type:"success",title:"Success",text:s},3e3),r.abrupt("return",l.status);case 28:r.prev=28,r.t0=r["catch"](12),c=Object.values(r.t0.response.data),console.log(c),t.$notify({group:"generic",type:"error",title:"Error",text:c[0]},3e3),t.isLoading=!1;case 34:case"end":return r.stop()}}),r,null,[[12,28]])})))()},onUpdatingPlace:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.geometry.location.lat().toString(),n=e.geometry.location.lng().toString(),console.log("lat = ",a,n),o={lat:parseFloat(a),lng:parseFloat(n)},i=t.parseToOverlay(t.current_coords),console.warn(i),t.getServiceBounds(i),t.setServiceOverlayOnMap(i),t.theZoom=18,t.zoom===t.theZoom?t.theZoom=17:t.theZoom=18,t.setMapCenterToDrawingCenter(i,!1,o,t.theZoom);case 11:case"end":return r.stop()}}),r)})))()},loadServiceDropdown:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.fleetIsLoading=!0,r=[e.$http.get("".concat(e.$config.serviceArea.api.index,"?export=true")),e.$http.get("".concat(e.$config.slowSpeedArea.api.index,"?export=true")),e.$http.get("".concat(e.$config.restrictedArea.api.index,"?export=true")),e.$http.get("".concat(e.$config.parkingArea.api.index,"?export=true")),e.$http.get("".concat(f["c"].geoFence.rentStationArea.index(),"?export=true")),e.$http.get("".concat(e.$config.sunpodStationArea.api.index,"?export=true")),e.$http.get("".concat(e.$config.rewardZone.api.index,"?export=true"))],t.next=4,e.$http.all(r).then(e.$http.spread((function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];console.log("re-l",r),e.service_areas=r[0].data.data,e.slow_speed_areas=r[1].data.data,e.restricted_areas=r[2].data.data,e.parking_areas=r[3].data.data,e.all_rent_station_areas=r[4].data.data,e.rent_station_areas=r[4].data.data,e.sunpod_station_areas=r[5].data.data,e.reward_zones=r[6].data.data}))).catch((function(e){return console.log("fetchAllErr",e,e.response)})).finally((function(){return e.fleetIsLoading=!1}));case 4:case"end":return t.stop()}}),t)})))()},drawOtherZonesOnMap:function(){var e=this,t=[],r=[];this.restricted_areas.forEach((function(a){var n,s=e.parseToOverlay(a.coords),l=new e.google.maps.LatLngBounds,c=Object(i["a"])(s);try{for(c.s();!(n=c.n()).done;){var d=n.value;l.extend(d)}}catch(u){c.e(u)}finally{c.f()}var g=new e.google.maps.Polygon(Object(o["a"])({paths:s},e.restrictedDrawingOptions));t.push(l),g.setMap(e.map),r.push(g)})),this.sunpod_station_areas.forEach((function(a){var n,s=e.parseToOverlay(a.coords),l=new e.google.maps.LatLngBounds,c=Object(i["a"])(s);try{for(c.s();!(n=c.n()).done;){var d=n.value;l.extend(d)}}catch(u){c.e(u)}finally{c.f()}var g=new e.google.maps.Polygon(Object(o["a"])({paths:s},e.sunpodStationDrawingOptions));t.push(l),g.setMap(e.map),r.push(g)})),this.reward_zones.forEach((function(a){var n,s=e.parseToOverlay(a.coords),l=new e.google.maps.LatLngBounds,c=Object(i["a"])(s);try{for(c.s();!(n=c.n()).done;){var d=n.value;l.extend(d)}}catch(u){c.e(u)}finally{c.f()}var g=new e.google.maps.Polygon(Object(o["a"])({paths:s},e.rewardZoneDrawingOptions));t.push(l),g.setMap(e.map),r.push(g)})),this.slow_speed_areas.forEach((function(a){var n,s=e.parseToOverlay(a.coords),l=new e.google.maps.LatLngBounds,c=Object(i["a"])(s);try{for(c.s();!(n=c.n()).done;){var d=n.value;l.extend(d)}}catch(u){c.e(u)}finally{c.f()}var g=new e.google.maps.Polygon(Object(o["a"])({paths:s},e.slowSpeedDrawingOptions));t.push(l),g.setMap(e.map),r.push(g)})),this.parking_areas.forEach((function(a){var n,s=e.parseToOverlay(a.coords),l=new e.google.maps.LatLngBounds,c=Object(i["a"])(s);try{for(c.s();!(n=c.n()).done;){var d=n.value;l.extend(d)}}catch(u){c.e(u)}finally{c.f()}var g=new e.google.maps.Polygon(Object(o["a"])({paths:s},e.parkingDrawingOptions));t.push(l),g.setMap(e.map),r.push(g)})),this.rent_station_areas.forEach((function(a){var n,s=e.parseToOverlay(a.coords),l=new e.google.maps.LatLngBounds,c=Object(i["a"])(s);try{for(c.s();!(n=c.n()).done;){var d=n.value;l.extend(d)}}catch(u){c.e(u)}finally{c.f()}var g=new e.google.maps.Polygon(Object(o["a"])({paths:s},e.rentStationDrawingOptions));t.push(l),g.setMap(e.map),r.push(g)})),this.otherAreaBounds=t,this.otherParsedPolygons=r}}},m=v,b=(r("58b4"),r("2877")),w=Object(b["a"])(m,a,n,!1,null,null,null);t["default"]=w.exports},a7fe:function(e,t,r){},acfd:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{class:e.getClass,style:"white-space: nowrap; width: "+e.width+"; height: "+e.height,on:{click:e.onClick}},[r("loading",{class:"outline-none",attrs:{active:e.getLoaderState,height:25,opacity:0,color:"transparent"===e.variant||"secondary"===e.variant||"light"===e.variant?"#333":"#fff",loader:"bars","is-full-page":!1}}),r("div",{class:{invisible:e.isLoading}},[e._t("default",(function(){return[e._v(" "+e._s(e.text)+" ")]}))],2)],1)},n=[],o=(r("99af"),{name:"AppButton",props:{text:{required:!1},variant:{required:!1,default:"default"},isLoading:{type:Boolean,required:!1,default:!1},width:{type:String,required:!1,default:"auto"},height:{type:String,required:!1,default:"36px"},disabled:{type:Boolean,required:!1,default:!1},rounded:{type:[Boolean,String],default:!0}},computed:{getRoundedClass:function(){return!0===this.rounded?"rounded":!1===this.rounded?"rounded-none":"rounded-"+this.rounded},getClass:function(){var e="relative flex items-center justify-center text-center px-4 font-semibold text-14px leading-normal ".concat(this.getRoundedClass," transition ease-in-out duration-150 cursor-pointer focus:outline-none "),t="border border-transparent bg-disabled text-white ";return this.disabled?"".concat(e," ").concat(t):"secondary"===this.variant?"".concat(e," bg-gray-100 border border-transparent hover:border-gray-900 hover:text-gray-900 focus:bg-gray-300"):"transparent"===this.variant?"".concat(e," bg-transparent text-gray-700 border border-transparent hover:text-gray-900 cursor-default-important"):"light"===this.variant?"".concat(e," bg-white text-gray-700 border border-transparent hover:border-gray-900 hover:text-gray-900 focus:bg-gray-300"):"blue"===this.variant?"".concat(e," text-gray-100 bg-custom-blue border border-transparent hover:border-blue-600 hover:text-white hover:opacity-75 focus:border-blue-500"):"green"===this.variant?"".concat(e," text-gray-100 bg-oGreen border border-transparent hover:border-green-600 hover:text-white hover:opacity-75 focus:border-green-500"):"green-alt"===this.variant?"".concat(e," text-gray-100 bg-green-alt-button text-oGreen border border-transparent hover:border-green-600 hover:text-green-600 focus:border-green-500"):"red"===this.variant?"".concat(e," text-gray-100 bg-oRed border border-transparent hover:border-red-600 hover:text-white hover:opacity-75 focus:border-red-500"):"orange"===this.variant?"".concat(e," text-gray-100 bg-orange-button border border-transparent hover:bg-orange-200 hover:border-orange-200 hover:text-white focus:bg-orange-300"):"orange-alt"===this.variant?"".concat(e," text-gray-100 bg-orange-alt-button text-oOrange border border-transparent hover:border-orange-600 hover:text-orange-600 focus:border-orange-500"):"add-balance"===this.variant?"".concat(e," text-gray-100 bg-orange-button border border-transparent hover:bg-orange-200 hover:border-orange-200 hover:text-white focus:bg-orange-300"):"gray"===this.variant?"".concat(e," text-gray-100 bg-gray-400 border border-transparent hover:bg-gray-300 hover:border-gray-300 hover:text-white focus:bg-gray-300"):"gray-alt"===this.variant?"".concat(e," text-gray-700 bg-gray-50 border border-gray-300 hover:bg-gray-300 hover:text-oBlack "):"gray-green"===this.variant?"".concat(e," text-gray-100 bg-gray-400 border border-gray-300 hover:bg-green-600 hover:text-oWhite "):"light-green"===this.variant?"".concat(e," text-gray-700 bg-gray-50 border border-gray-300 hover:bg-green-600 hover:text-oWhite "):"gray-red"===this.variant?"".concat(e," text-gray-700 bg-gray-50 border border-gray-300 hover:bg-red-600 hover:text-oWhite "):"border-red-bg-gray"===this.variant?"".concat(e," text-gray-700 bg-gray-50 border border-red-500 hover:bg-red-600 hover:text-oWhite "):"".concat(e," text-gray-100 bg-gray-900 border border-transparent hover:text-white hover:bg-gray-800 hover:border-gray-800 focus:bg-gray-700")},getLoaderState:function(){return(!this.href||"javascript:void(0);"===this.href)&&this.isLoading}},methods:{onClick:function(){!1===this.isLoading&&!1===this.disabled&&this.$emit("click")}}}),i=o,s=(r("7686"),r("2877")),l=Object(s["a"])(i,a,n,!1,null,"07230c7b",null);t["default"]=l.exports},b581:function(e,t,r){e.exports=r.p+"assets/info.554ebc24.svg"},c18b:function(e,t,r){"use strict";r.d(t,"a",(function(){return a["default"]})),r.d(t,"b",(function(){return d["a"]})),r.d(t,"c",(function(){return v}));r("7334");var a=r("acfd"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[e.label?r("AppFormLabel",{attrs:{text:e.label,error:e.error}}):e._e(),r("div",{class:e.getWrapperClasses,on:{click:e.onClick,dragover:e.onDragover,dragleave:e.onDragleave,drop:e.onDrop}},[r("input",{ref:"file",staticClass:"overflow-hidden absolute w-0 h-0 opacity-0",attrs:{type:"file",accept:"*"},on:{change:e.onChange}}),e.previewImage||e.current?r("div",{key:"upload-preview-or-placeholder",staticClass:"w-full h-full"},[e.current&&!e.previewImage?r("img",{staticClass:"object-cover overflow-hidden w-full h-full",attrs:{src:e.current}}):e._e(),e.previewImage?r("img",{staticClass:"object-cover overflow-hidden w-full h-full",attrs:{src:e.previewImage}}):e._e()]):r("div",{key:"upload-preview-or-placeholder",staticClass:"grid place-items-center"},[r("span",{staticClass:"upload-text"},[e._v(e._s(e.text))]),r("button",{staticClass:"upload-button",attrs:{type:"button"}},[e._v(e._s(e.buttonText))])])]),e.label?r("AppFormError",{attrs:{text:e.label,error:e.error}}):e._e()],1)},o=[],i={name:"UploadFileAlt",props:{value:{required:!1},current:{required:!1},label:{type:String,required:!1,default:"Upload File"},error:{type:[String,Boolean],required:!1,default:""},text:{type:String,required:!1,default:"Select or Drag files to upload"},buttonText:{type:String,required:!1,default:"Upload"},variant:{requried:!1,default:"default"}},data:function(){return{file:null,previewImage:null}},computed:{getWrapperClasses:function(){return"upload-wrapper"}},methods:{onChange:function(){var e=this,t=this.$refs.file,r=t.files;if(r&&r[0]){var a=new FileReader;a.onload=function(t){e.previewImage=t.target.result},a.readAsDataURL(r[0]),this.$emit("input",r[0])}},onClick:function(){this.$refs.file.click()},onDragover:function(e){console.log("dragover = ",e),e.preventDefault(),e.currentTarget.classList.contains("onDragover")||e.currentTarget.classList.add("onDragover")},onDragleave:function(e){console.log("dragleave = ",e),e.currentTarget.classList.remove("onDragover"),e.currentTarget.classList.add("onDragleave")},onDrop:function(e){console.log("drop = ",e),e.preventDefault(),this.$refs.file.files=e.dataTransfer.files,this.onChange(),e.currentTarget.classList.remove("onDragover"),e.currentTarget.classList.remove("onDragleave"),e.currentTarget.classList.add("onDrop")}}},s=i,l=(r("cbfe"),r("2877")),c=Object(l["a"])(s,n,o,!1,null,"3d746b53",null),d=(c.exports,r("219c")),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{class:e.getWrapperClasses,on:{click:e.onClick,dragover:e.onDragover,dragleave:e.onDragleave,drop:e.onDrop}},[r("input",{ref:"file",staticClass:"overflow-hidden absolute w-0 h-0 opacity-0",attrs:{type:"file",accept:".kml"},on:{change:e.onChange}}),r("div",{key:"upload-preview-or-placeholder",staticClass:"grid place-items-center"},[r("button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Import KML File",expression:"`Import KML File`",modifiers:{top:!0}}],staticClass:"upload-button",attrs:{type:"button"}},[r("i",{staticClass:"text-lg text-center fas fa-cloud-upload-alt"})])])])])},u=[],p={name:"UploadGeoFile",data:function(){return{}},computed:{getWrapperClasses:function(){return"upload-wrapper"}},methods:{onChange:function(){var e=this,t=this.$refs.file,r=t.files;if(r&&r[0]){var a,n=new FileReader;n.onload=function(e){a=e.target.result},n.readAsText(r[0]),setTimeout((function(){e.$emit("input",a)}),1e3)}},onClick:function(){this.$refs.file.click()},onDragover:function(e){console.log("dragover = ",e),e.preventDefault(),e.currentTarget.classList.contains("onDragover")||e.currentTarget.classList.add("onDragover")},onDragleave:function(e){console.log("dragleave = ",e),e.currentTarget.classList.remove("onDragover"),e.currentTarget.classList.add("onDragleave")},onDrop:function(e){console.log("drop = ",e),e.preventDefault(),this.$refs.file.files=e.dataTransfer.files,this.onChange(),e.currentTarget.classList.remove("onDragover"),e.currentTarget.classList.remove("onDragleave"),e.currentTarget.classList.add("onDrop")}}},f=p,h=(r("e3dd"),Object(l["a"])(f,g,u,!1,null,"3b01a8eb",null)),v=h.exports},cbfe:function(e,t,r){"use strict";r("5010")},e1fd:function(e,t,r){},e3dd:function(e,t,r){"use strict";r("e1fd")}}]);
//# sourceMappingURL=chunk-16a44e61.7f2ee789.js.map