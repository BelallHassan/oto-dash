(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-614e9026"],{"1ad5":function(e,t,a){},"8b67":function(e,t,a){"use strict";a("1ad5")},"9c19":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("t-modal",{ref:"popup",attrs:{name:e.id,variant:"confirmation",hideCloseButton:!0,disableBodyScroll:!0,escToClose:!e.isLoading,clickToClose:!e.isLoading}},[a("div",{staticClass:"relative "},[a("loading",{attrs:{active:e.isBuyerListLoading,"is-full-page":!1}}),a("section",{staticClass:"px-4 text-2xl font-extrabold text-center mt-8"},[e._v(" Create Purchase Order ")]),a("section",{staticClass:"px-4 py-2 "},[a("AppInput",{attrs:{type:"richselect",name:"Buyer",label:"Buyer",rules:"required",isSearch:!0,placeholder:"Select a buyer","value-attribute":"value","text-attribute":"text",delaySearchTime:1e3,"fetch-options":e.getBuyerList},on:{input:e.getSelectedBuyer},model:{value:e.form.buyer,callback:function(t){e.$set(e.form,"buyer",t)},expression:"form.buyer"}})],1),a("section",{staticClass:"px-4 py-2 "},[a("AppInput",{attrs:{rules:"required",label:"Number of Vehicles",type:"number",name:"Number of Vehicles"},model:{value:e.form.number_of_vehicles,callback:function(t){e.$set(e.form,"number_of_vehicles",t)},expression:"form.number_of_vehicles"}})],1),a("section",{staticClass:"px-4 py-2 mb-5 "},[a("AppInput",{attrs:{name:"payment method",label:"Payment Method",type:"richselect",placeholder:"Select payment method",options:[{text:"Cash",value:"cash"},{text:"Bank",value:"bank"},{text:"Crypto",value:"crypto"}],"hide-search-box":!0},model:{value:e.form.payment_method_choice,callback:function(t){e.$set(e.form,"payment_method_choice",t)},expression:"form.payment_method_choice"}})],1),a("section",{staticClass:"flex items-center justify-end px-4 py-4 mt-6 space-x-5 bg-gray-50"},[a("AppButton",{class:"w-1/2",attrs:{variant:"secondary"},on:{click:function(t){return e.closeModal()}}},[e._v(" Cancel ")]),a("AppButton",{class:"w-1/2",attrs:{isLoading:e.isLoading},on:{click:function(t){return e.placeOrder()}}},[e._v(" Purchase ")])],1)],1)])},n=[],o=a("1da1"),c=(a("96cf"),a("99af"),a("159b"),a("d3b7"),a("3e12")),i=a("ed08"),s={name:"PurchaseOrderCreationAction",components:{},props:{id:{type:String,required:!0},marketplaceId:{type:String,required:!0}},data:function(){return{isLoading:!1,form:{buyer:null,number_of_vehicles:null,marketplace_fleet:null,payment_method_choice:null}}},watch:{marketplaceId:{deep:!1,immediate:!0,handler:function(e){this.form.marketplace_fleet=e}}},methods:{closeModal:function(){this.$modal.hide("".concat(this.id)),this.clearOrderData()},getBuyerList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("".concat(c["a"].api.marketplaceAllBuyerList(),"?search=").concat(e));case 2:return r=a.sent,n=r.data,o=[],(null===n||void 0===n?void 0:n.data.length)>0&&n.data.forEach((function(e){o.push({text:"".concat(e.full_name," (").concat(e.email,")"),value:e.id})})),a.abrupt("return",{results:o});case 7:case"end":return a.stop()}}),a)})))()},getSelectedBuyer:function(e){this.form.buyer=e},placeOrder:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,a=c["a"].api.marketplacePlaceOrder(),r=new i["x"](e.form).toFormData(),t.next=5,e.$http.post(a,r).then((function(t){var a=t.data;e.$emit("refresh-page"),e.$notify({group:"bottomRight",type:"success",title:"Success",text:"".concat(a.message)},3e3)})).catch((function(t){e.$notify({group:"bottomRight",type:"error",title:"Failed",text:"".concat(t.response)},5e3)})).finally((function(){e.isLoading=!1,e.closeModal(),e.clearOrderData()}));case 5:case"end":return t.stop()}}),t)})))()},clearOrderData:function(){console.log("clearOrderData"),this.form.buyer=null,this.form.number_of_vehicles=null,this.form.payment_method_choice=null}}},l=s,u=(a("8b67"),a("2877")),p=Object(u["a"])(l,r,n,!1,null,"0232ce8e",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-614e9026.2d621279.js.map