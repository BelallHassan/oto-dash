(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b25b8"],{2488:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("t-modal",{ref:"popup",attrs:{name:"RefundRequestPopup",variant:"transaction",hideCloseButton:!0,disableBodyScroll:!0}},[n("section",{staticClass:"px-8 pt-10"},[n("div",{staticClass:"font-medium text-28px text-oCharcoal"},[e._v(" Refund ")]),n("div",{staticClass:"p-8"},[n("label",{staticClass:"mt-8 text-sm font-bold text-gray-800"},[e._v(" Refundable Amount ("+e._s(e.currencySymbol)+") "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.refundAmount,expression:"refundAmount",modifiers:{number:!0}}],ref:"refundAmountInput",staticClass:"w-full h-16 px-3 text-2xl font-bold text-center text-orange-400 border rounded focus:outline-none",attrs:{type:"number",max:e.refundAmount,min:0,step:"0.01"},domProps:{value:e.refundAmount},on:{input:function(t){t.target.composing||(e.refundAmount=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),n("AppInput",{staticClass:"my-3",attrs:{label:"Requested Amount("+e.currencySymbol+")",type:"text",name:"Requested Amount("+e.currencySymbol+")",isInfoEnabled:!1,disabled:""},model:{value:e.requestedRefundAmount,callback:function(t){e.requestedRefundAmount=t},expression:"requestedRefundAmount"}}),n("AppInput",{staticClass:"my-3",attrs:{label:"Rider",type:"text",name:"Rider",isInfoEnabled:!1,disabled:""},model:{value:e.rider,callback:function(t){e.rider=t},expression:"rider"}}),n("div",{staticClass:"flex items-center justify-end mt-12 mb-4 space-x-4"},[n("AppButton",{attrs:{variant:"secondary",text:"Cancel"},on:{click:function(t){return e.$refs.popup.hide()}}}),n("AppButton",{attrs:{variant:"primary",text:"Accept",isLoading:e.isLoading},on:{click:e.submitForm}})],1)],1)])])},u=[],a=n("1da1"),o=(n("96cf"),n("99af"),n("d3b7"),n("ed08")),i=n("c820"),s=n("086e"),c={name:"RefundRequestPopup",data:function(){return{popName:"RefundRequestPopup",isLoading:!1,refundAmount:0,requestedRefundAmount:0,rider:"--",currencySymbol:"--",rawData:null}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o["a"].$on(s["a"].events.refundRequestPopup,function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.rawData=n,e.refundAmount=n.refundable_amount,e.requestedRefundAmount=n.requested_amount,e.rider="".concat(n.rider.full_name,"(").concat(n.rider.phone_number,")"),e.currencySymbol=n.currency.symbol,setTimeout((function(){e.$refs.refundAmountInput&&e.$refs.refundAmountInput.focus()}),500);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},methods:{submitForm:function(){var e=this;if(this.refundAmount>this.rawData.refundable_amount)this.$notify({group:"generic",type:"warn",title:"Warning!",text:"Refund amount could not higher than ".concat(this.rawData.currency.symbol).concat(this.rawData.refundable_amount)});else{var t=new FormData;t.append("status",1),t.append("amount",this.refundAmount);var n=i["c"].refundApplication.update(this.rawData.id);this.isLoading=!0,this.$http.patch(n,t).then((function(){e.refundAmount=0,e.$emit("refresh"),e.$refs.popup.hide(),e.$notify({group:"generic",type:"warn",title:"Success",text:"Refund has been successful"})})).catch((function(t){console.log("refund-request-err",{err:t}),e.$notify({group:"generic",type:"warn",title:"Failed",text:"Failed to refund"})})).finally((function(){e.isLoading=!1}))}}}},d=c,l=n("2877"),f=Object(l["a"])(d,r,u,!1,null,"383f974e",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0b25b8.f767af07.js.map