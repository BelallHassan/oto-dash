(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37fb9398","chunk-566ec0da","chunk-56449a02"],{"017e":function(t,e,n){},"19a4":function(t,e,n){"use strict";n("7536")},"1a59":function(t,e,n){"use strict";n("017e")},2125:function(t,e,n){},"219a":function(t,e,n){"use strict";n("2125")},"236a":function(t,e,n){"use strict";n("40e1")},3187:function(t,e,n){"use strict";n("cc91")},"36b1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex w-auto mt-2 md:items-center md:justify-end md:mt-0"},[n("t-dropdown",{attrs:{variant:"smActionsMedium"},scopedSlots:t._u([{key:"trigger",fn:function(e){var i=e.mousedownHandler,a=e.focusHandler,r=e.blurHandler,s=e.keydownHandler;return[n("button",{class:t.getButtonClass,attrs:{"aria-label":"Vehicle Actions","aria-haspopup":"true"},on:{mousedown:i,focus:a,blur:r,keydown:s}},[t.lockReq?n("loading",{attrs:{height:25,opacity:0,color:"#fff",active:!0,loader:"bars","is-full-page":!1}}):t._e(),t.lockReq?t._e():n("span",[t.isShowDropDown?n("i",{staticClass:"mr-2 fas fa-chevron-down"}):t._e(),t._v(" "+t._s(t.getStatusText)+" ")])],1)]}},t.isShowDropDown?{key:"default",fn:function(e){var i=e.hide;return[n("div",{staticClass:"py-1 mt-px bg-white rounded-md shadow-lg",on:{click:function(t){return i()}}},[t.$acl.canUpdate("vehicles")?n("t-dropdown-item",{staticClass:"font-medium text-14px",on:{click:t.handleVehicleLockUnlock}},[t._v(" "+t._s(!0===t.status?t.$t("components.vehicleManagement.itemActions.unlock"):t.$t("components.vehicleManagement.itemActions.lock"))+" ")]):t._e(),t.$acl.canUpdate("vehicles")?n("t-dropdown-item",{staticClass:"font-medium text-14px",on:{click:t.handleVehicleHibernateActivate}},[t._v(" "+t._s(!0===t.hibernateStatus?t.$t("components.vehicleManagement.itemActions.activate"):t.$t("components.vehicleManagement.itemActions.hibernate"))+" ")]):t._e(),t.$acl.canUpdate("vehicles")?n("t-dropdown-item",{staticClass:"font-medium text-14px",on:{click:t.forceSync}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.forceSyncStatus"))+" ")]):t._e(),t.$acl.canUpdate("vehicles")&&t.canTakeVehicleUndockAction?n("t-dropdown-item",{staticClass:"font-medium text-14px flex justify-between",on:{click:t.handleUndockChargingAdapter}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.undockChargingAdapter"))+" ")]):t._e(),t.$acl.canUpdate("vehicles")&&t.canTakeVehicleUndockAction?n("t-dropdown-item",{staticClass:"font-medium text-14px flex justify-between",on:{click:t.syncDockStatus}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.syncDockStatus"))+" ")]):t._e(),t.$acl.canUpdate("vehicles")&&t.canTakeInspectionAction?n("t-dropdown-item",{staticClass:"font-medium text-14px flex justify-between",on:{click:t.handleInspectionNeeded}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.inspectionNeeded"))+" "),n("span",{staticClass:"ml-2 bg-oPurple px-2 py-1 rounded-lg text-xs text-oWhite "},[t._v("BETA")])]):t._e(),t.$acl.canUpdate("vehicles")&&t.canTakeRepairAction?n("t-dropdown-item",{staticClass:"font-medium text-14px flex justify-between",on:{click:t.handleRepairNeeded}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.repairNeeded"))+" "),n("span",{staticClass:"ml-2 bg-oPurple px-2 py-1 rounded-lg text-xs text-oWhite "},[t._v("BETA")])]):t._e(),t.$acl.canUpdate("vehicles")&&t.canTakeSwapBatteryAction?n("t-dropdown-item",{staticClass:"font-medium text-14px flex justify-between",on:{click:t.handleSwapBatteryNeeded}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.swapBatteryNeeded"))+" "),n("span",{staticClass:"ml-2 bg-oPurple px-2 py-1 rounded-lg text-xs text-oWhite "},[t._v("BETA")])]):t._e(),t.$acl.canUpdate("vehicles")?n("t-dropdown-item",{staticClass:"font-medium text-14px",on:{click:t.triggerRing}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.triggerRing"))+" ")]):t._e(),t.$acl.canView("vehicles")?n("t-dropdown-item",{staticClass:"font-medium text-14px",on:{click:t.downloadQRCode}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.downloadQrcode"))+" ")]):t._e(),t.$acl.canUpdate("vehicles")?n("t-dropdown-item",{staticClass:"font-medium text-14px",on:{click:t.onEditVehicle}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.editVehicle"))+" ")]):t._e(),t.$acl.canDelete("vehicles")?n("t-dropdown-item",{staticClass:"font-medium text-14px",attrs:{variant:"danger"},on:{click:t.askConfirmation}},[t._v(" "+t._s(t.$t("components.vehicleManagement.itemActions.deleteVehicle"))+" ")]):t._e()],1)]}}:null],null,!0)})],1),n("ConfirmFirst",{key:"confirmFirst-"+t.vehicleId,attrs:{id:"confirmFirst-"+t.vehicleId,"is-loading":t.isDeleting,title:t.$t("components.vehicleManagement.itemActions.deleteTheVehicle"),subtitle:t.$t("components.vehicleManagement.itemActions.actionCannotBeUndone"),criticalityLevel:"medium",criticalityTitle:t.$t("components.vehicleManagement.itemActions.typeDeletionCode"),criticalityPassword:"ILOVEOTORIDE",cancelButtonText:t.$t("components.vehicleManagement.itemActions.cancel"),"confirm-button-text":t.$t("components.vehicleManagement.itemActions.delete")},on:{confirm:t.onDeleteConfirm,cancel:t.onDeleteCancel}}),n("DownloadQRCode",{key:"downloadQRCode-"+t.vehicleId,attrs:{id:"downloadQRCode-"+t.vehicleId,code:t.qrCode}}),n("VehicleInspection",{attrs:{id:"vi-"+t.currentItemIndex,vehicleProfile:t.data}}),n("VehicleRepair",{attrs:{id:"vi-"+t.currentItemIndex,vehicleProfile:t.data}}),n("SwapBattery",{attrs:{id:"sb-"+t.currentItemIndex,vehicleProfile:t.data}})],1)},a=[],r=n("1da1"),s=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("caad"),n("2532"),n("c820")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("t-modal",{ref:"popup",attrs:{name:t.id,variant:"confirmation",hideCloseButton:!0,disableBodyScroll:!0}},[i("div",{staticClass:"flex justify-center"},[i("div",{key:"document_"+t.code,ref:"document_"+t.code,staticClass:"py-3",staticStyle:{width:"200px"}},[i("div",{staticClass:"flex justify-center items-center ",staticStyle:{height:"160px"}},[i("VueQRCode",{attrs:{value:t.getQrCodeURL,tag:"img",options:{width:160,margin:0}}})],1),i("div",{staticClass:"font-extrabold text-center text-xl text-oBlack"},[t._v(" "+t._s(t.code)+" ")])])]),i("div",{staticClass:"flex justify-center items-center mb-6"},[i("button",{staticClass:"flex gap-2 justify-center items-center py-2 px-3 rounded hover:bg-gray-100",on:{click:t.exportToPNG}},[i("img",{attrs:{src:n("6a95")}}),i("span",[t._v("Download as PNG")])])])])},c=[],l=(n("99af"),n("d67e")),u=n.n(l),d=n("c0e9"),p=n.n(d),h=n("b2e5"),f=n.n(h),m={name:"DownloadQRCode",components:{VueQRCode:f.a},props:{id:{type:[String,Number],requred:!0},code:{type:[Number,String],required:!0}},computed:{getQrCodeURL:function(){var t=JSON.parse(localStorage.getItem("organization")).domain;return"https://".concat(t,"/").concat(this.code||"--")}},methods:{exportToPDF:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=document.createElement("div"),n.appendChild(t.$refs["document_".concat(t.code)].cloneNode(!0)),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")),console.log("html & code",n,t.code),!n){e.next=11;break}return e.next=11,u()().set({margin:[0,0,0,-.2],filename:"vehicle-qrcode-".concat(t.code,".pdf"),image:{type:"jpeg",quality:.9},html2canvas:{dpi:192,letterRendering:!0},jsPDF:{unit:"in",format:"A4",orientation:"portrait"}}).from(n).save();case 11:case"end":return e.stop()}}),e)})))()},exportToPNG:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p()(t.$refs["document_".concat(t.code)]).then((function(e){Object(s["b"])(e.toDataURL("image/png"),"vehicle-qrcode-".concat(t.code,".png"),"image/png")}));case 1:case"end":return e.stop()}}),e)})))()}}},g=m,v=n("2877"),k=Object(v["a"])(g,o,c,!1,null,null,null),w=k.exports,b=n("4a9d"),x=n("d04d"),y=n.n(x),C=n("d899"),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("slide-over-right",{ref:"slideOverRightInspection",attrs:{id:t.sorId+"-"+t.id,editType:"standard"}},[n("loading",{attrs:{active:t.isLoading,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),n("div",{staticClass:"flex items-center justify-start mt-5 gap-2"},[n("div",{staticClass:"flex items-center justify-center cursor-pointer back-button",on:{click:t.goBack}},[n("i",{staticClass:"fas fa-arrow-right"})]),n("div",{staticClass:"header-title"},[t._v(t._s(t.titleText))])]),n("div",{staticClass:"flex  w-full p-3 mt-5  bg-gray-50 rounded-md "},[n("div",{staticClass:"w-1/3 "},[t._v(t._s(t.vehicleProfile.name))]),n("div",{staticClass:"w-1/3 flex justify-center"},[n("BatteryStatus",{attrs:{level:t.getBatteryLevel,height:"18px",width:"35px","text-class":"text-xs text-gray-600 ml-2"}})],1),n("div",{staticClass:"w-1/3 flex justify-end "},[t._v(" "+t._s(t.vehicleProfile.qr_code)+" ")])]),t._l(t.inspectionData,(function(e,i){return n("div",{key:"vi-"+i,staticClass:"mt-5"},[n("InspectionItemCard",{attrs:{iData:e},on:{"pass-fail-click-status":function(e){return t.changePassFailClickStatus(e,i)},"change-reason":function(e){return t.handleSubpart(i,e)}}})],1)})),n("div",{staticClass:" mt-6"},[n("div",{staticClass:"card bg-gray-100 flex flex-col w-full  gap-2 p-3"},[n("AppButton",{attrs:{variant:t.getAllPassedClickedStatus?"green":"gray-green",width:"100%"},on:{click:function(e){return t.handlePassAll()}}},[t._v(" "+t._s(t.$t("components.vehicleInspectionAndRepairManagement.action.passAll"))+" ")]),n("AppButton",{attrs:{variant:"primary",width:"100%",disabled:0===t.getFailedSubpartIds.length},on:{click:function(e){t.getFailedSubpartIds.length>0&&t.handleSubmit()}}},[t._v(" "+t._s(t.$t("components.vehicleInspectionAndRepairManagement.action.submit"))+" ")])],1)])],2)},_=[],R=n("5530"),D=(n("d81d"),n("159b"),n("4de4"),n("7db0"),n("b0c0"),{api:{},events:{name:"vehicle-inspection",refresh:"rid-vehicle-inspection",sorId:"vehicle-inspection",sorOpen:function(t){return"sor-open-vehicle-inspection-".concat(t)},sorClose:function(t){return"sor-close-vehicle-inspection-".concat(t)},sorToggle:function(t){return"sor-toggle-vehicle-inspection-".concat(t)},editingData:"edit-vehicle-inspection-data",viewingData:"view-vehicle-inspection-data"}}),S=n("04ec"),E=n("affe"),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card bg-gray-100 p-3"},[n("div",{staticClass:" grid grid-cols-12 "},[n("div",{staticClass:"col-span-2"},[n("img",{staticClass:" w-16 h-16 rounded-md",attrs:{src:t.iData.photo_url,alt:"image"}})]),n("div",{staticClass:"col-span-9"},[n("p",{staticClass:"font-bold pl-2 text-lg"},[t._v(t._s(t.iData.name))])]),n("div",{staticClass:"col-span-1 cursor-pointer",on:{click:t.toggleFailReason}},[t.showFailReason?n("i",{staticClass:" fas fa-chevron-up"}):n("i",{staticClass:" fas fa-chevron-down"})])]),n("div",{staticClass:"mt-5 grid grid-cols-12 gap-2"},[n("div",{staticClass:"col-span-6"},[n("AppButton",{attrs:{variant:t.iData.isPassClicked?"green":"light-green",width:"100%"},on:{click:function(e){return t.handlePassFailClickStatus("pass")}}},[t._v(" "+t._s(t.$t("components.vehicleInspectionAndRepairManagement.action.pass"))+" ")])],1),n("div",{staticClass:"col-span-6"},[n("AppButton",{attrs:{variant:t.iData.isFailedClicked?t.isFailedReasonSelected?"red":"border-red-bg-gray":"gray-red",width:"100%"},on:{click:function(e){return t.handlePassFailClickStatus("fail")}}},[t._v(" "+t._s(t.$t("components.vehicleInspectionAndRepairManagement.action.fail"))+" ")])],1)]),n("accordion-transition",{attrs:{expanded:t.showFailReason}},t._l(t.iData.sub_parts,(function(e,i){return n("div",{key:"vi-"+i,staticClass:"mt-5"},[n("t-checkbox",{attrs:{wrapped:"",label:e.name,name:e.name},on:{change:function(e){return t.handleReasonCheckedStatus(i,e)}},model:{value:e.isChecked,callback:function(n){t.$set(e,"isChecked",n)},expression:"reason.isChecked"}})],1)})),0)],1)},$=[],O=n("59c1"),P={components:{AccordionTransition:O["default"]},name:"InspectionItemCard",props:{iData:{type:Object,required:!0}},data:function(){return{showFailReason:!1}},computed:{isFailedReasonSelected:function(){return!!this.iData.sub_parts.find((function(t){return t.isChecked}))}},watch:{iData:{deep:!0,immediate:!1,handler:function(t){t.isPassClicked&&(this.showFailReason=!1)}}},methods:{toggleFailReason:function(){this.showFailReason=!this.showFailReason},handlePassFailClickStatus:function(t){"pass"===t&&(this.$emit("pass-fail-click-status",t),this.showFailReason=!1),"fail"===t&&(this.$emit("pass-fail-click-status",t),this.showFailReason=!0)},handleReasonCheckedStatus:function(t,e){this.$emit("change-reason",{childIndex:t,value:e}),this.iData.sub_parts.find((function(t){return t.isChecked}))?(this.iData.isFailedClicked=!0,this.iData.isPassClicked=!1):(this.iData.isFailedClicked=!1,this.iData.isPassClicked=!1)}}},A=P,T=(n("236a"),Object(v["a"])(A,L,$,!1,null,null,null)),F=T.exports,j=n("ed08"),N={name:"VehicleInspection",components:{SlideOverRight:S["default"],BatteryStatus:E["default"],InspectionItemCard:F},props:{id:{type:[String,Number],required:!0},vehicleProfile:{type:Object,required:!0}},data:function(){return{sorId:D.events.sorId,isLoading:!1,inspectionId:null,inspectionData:[],isPassAllClicked:!1,sockListener:null,inspectionStatusTimeout:null,takeActionFrom:null}},created:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},mounted:function(){var t=this;b["a"].$on(D.events.editingData,(function(e){if(t.id==="vi-".concat(e.inspectIndex)){t.inspectionId=e.inspectionId,t.takeActionFrom=e.takeActionFrom;var n=e.parts.map((function(t){return Object(R["a"])(Object(R["a"])({},t),{},{isPassClicked:!1,isFailedClicked:!1})})),i=n.map((function(t){var e=t.sub_parts.map((function(t){return Object(R["a"])(Object(R["a"])({},t),{},{isChecked:!1})}));return Object(R["a"])(Object(R["a"])({},t),{},{sub_parts:e})}));t.inspectionData=i}}))},beforeDestroy:function(){this.removeListener()},computed:{titleText:function(){return this.$t("components.vehicleInspectionAndRepairManagement.title.inspection")},isEditing:function(){return!!this.primaryKey},actionButtonText:function(){return"Submit"},getBatteryLevel:function(){var t,e;return(null===this||void 0===this||null===(t=this.vehicleProfile)||void 0===t||null===(e=t.lock)||void 0===e?void 0:e.power_level)||0},getFailedSubpartIds:function(){var t=[];return this.inspectionData.forEach((function(e){e.sub_parts.map((function(e){e.isChecked&&t.push(e.id)}))})),t},getAllPassedClickedStatus:function(){return!!this.isPassAllClicked||this.inspectionData.filter((function(t){return t.isPassClicked})).length===this.inspectionData.length}},watch:{},methods:{closeModal:function(){dispatchEvent(new Event(D.events.sorClose(this.id)))},goBack:function(){this.closeModal()},startListener:function(){var t=localStorage.getItem("token")||null;if(t){var e=C["a"].baseUrlV1+C["a"].channels.userInspection+"?token=".concat(t);this.sockListener=this.sockListener?this.sockListener:new y.a(e,null,C["a"].configs()),this.sockListener.onopen=function(){console.log("Opened Noti Connection...")},this.sockListener.onclose=function(){console.log("Closed Noti Connection...")},this.sockListener.onmessage=this.onMessageHandler}},removeListener:function(){this.sockListener&&(this.sockListener.close(4003,"oto system closed the socket as the was closed"),this.sockListener=null)},onMessageHandler:function(t){console.log("Incoming --\x3e ",t);var e=JSON.parse(t.data);if("noti.inspection_submitted"===e.n_type){var n=e.data.id;if(n&&this.inspectionId===n&&(console.log("Incoming data for inspection ".concat(n," : data --\x3e"),e.data),"status"in e.data)){var i=e.data.status;i&&(clearTimeout(this.inspectionStatusTimeout),this.lastTask(i))}}},handlePassAll:function(){this.startListener(),this.isPassAllClicked=!0,this.inspectionData=this.inspectionData.map((function(t){return Object(R["a"])(Object(R["a"])({},t),{},{isPassClicked:!0,isFailedClicked:!1})})),this.isLoading=!0,this.handleInspectionSubmit()},handleSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.startListener(),!(t.getFailedSubpartIds.length>0)){e.next=10;break}return t.inspectionData=t.inspectionData.map((function(t){return t.isPassClicked||t.isFailedClicked?t.isFailedClicked&&!t.sub_parts.find((function(t){return t.isChecked}))?Object(R["a"])(Object(R["a"])({},t),{},{isPassClicked:!0,isFailedClicked:!1}):Object(R["a"])({},t):Object(R["a"])(Object(R["a"])({},t),{},{isPassClicked:!0,isFailedClicked:!1})})),n=[],t.getFailedSubpartIds.forEach((function(e){var i=s["c"].operationPrimer.inspectionAction.updateSubpart(e),a=new j["x"]({status:"REPAIR_REQUIRED"}).toFormData(),r=t.$http({url:i,method:"PATCH",data:a});n.push(r)})),t.isLoading=!0,e.next=8,t.$http.all(n).then(t.$http.spread((function(){t.handleInspectionSubmit()}))).catch((function(e){console.error("Error occurred!",e),t.$notify({group:"bottomLeft",type:"error",title:"Error occurred!",text:e.response.data.detail})}));case 8:e.next=11;break;case 10:t.$notify({group:"generic",type:"default",title:"Caution!",text:"Please select fail reason to take the action"},3e3);case 11:case"end":return e.stop()}}),e)})))()},handleInspectionSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.patch(s["c"].operationPrimer.inspectionAction.submit(t.inspectionId)).then((function(){t.inspectionStatusTimeout=setTimeout((function(){t.$refs.slideOverRightInspection.show&&t.$http.get(s["c"].operationPrimer.inspectionAction.status(t.inspectionId)).then((function(e){t.lastTask(e.data.status)})).finally((function(){t.isLoading=!1,t.isPassAllClicked=!1,clearTimeout(t.inspectionStatusTimeout)}))}),1e4)}));case 2:case"end":return e.stop()}}),e)})))()},changePassFailClickStatus:function(t,e){"pass"===t&&(this.inspectionData[e].isPassClicked=!0,this.inspectionData[e].isFailedClicked=!1,this.inspectionData[e].sub_parts=this.inspectionData[e].sub_parts.map((function(t){return Object(R["a"])(Object(R["a"])({},t),{},{isChecked:!1})}))),"fail"===t&&(this.inspectionData[e].isPassClicked=!1,this.inspectionData[e].isFailedClicked=!0)},handleSubpart:function(t,e){this.inspectionData[t].sub_parts[e.childIndex].isChecked=e.value},lastTask:function(t){this.removeListener(),"REPAIR_REQUIRED"===t&&this.$notify({group:"bottomRight",type:"success",title:"Submitted for ".concat(this.vehicleProfile.name),text:"Successful and now it needs repairment"},5e3),"COMPLETED"===t&&this.$notify({group:"bottomRight",type:"success",title:"Submitted for ".concat(this.vehicleProfile.name),text:"Successful and now you can start inspection."},5e3),this.isLoading=!1,this.isPassAllClicked=!1,this.closeModal(),"vehicle-list"===this.takeActionFrom&&this.$store.dispatch("fsTable/fetchData"),"vehicle-details"===this.takeActionFrom&&this.$store.dispatch("vehicleDetails/fetchData",{type:"details",primaryKey:"".concat(this.vehicleProfile.id)})}}},B=N,q=(n("19a4"),Object(v["a"])(B,I,_,!1,null,"9883a1ae",null)),M=q.exports,U={api:{},events:{name:"vehicle-swap-battery",refresh:"rid-vehicle-swap-battery",sorId:"vehicle-swap-battery",sorOpen:function(t){return"sor-open-vehicle-swap-battery-".concat(t)},sorClose:function(t){return"sor-close-vehicle-swap-battery-".concat(t)},sorToggle:function(t){return"sor-toggle-vehicle-swap-battery-".concat(t)},editingData:"edit-vehicle-swap-battery-data",viewingData:"view-vehicle-swap-battery-data"}},V={api:{},events:{name:"vehicle-repair",refresh:"rid-vehicle-repair",sorId:"vehicle-repair",sorOpen:function(t){return"sor-open-vehicle-repair-".concat(t)},sorClose:function(t){return"sor-close-vehicle-repair-".concat(t)},sorToggle:function(t){return"sor-toggle-vehicle-repair-".concat(t)},editingData:"edit-vehicle-repair-data",viewingData:"view-vehicle-repair-data"}},H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("slide-over-right",{ref:"slideOverRightRepair",attrs:{id:t.sorId+"-"+t.id,editType:"standard"}},[n("loading",{attrs:{active:t.isLoading,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),n("div",{staticClass:"flex items-center justify-start mt-5 gap-2"},[n("div",{staticClass:"flex items-center justify-center cursor-pointer back-button",on:{click:t.goBack}},[n("i",{staticClass:"fas fa-arrow-right"})]),n("div",{staticClass:"header-title"},[t._v(t._s(t.titleText))])]),n("div",{staticClass:"flex  w-full p-3 mt-5  bg-gray-50 rounded-md "},[n("div",{staticClass:"w-1/3 "},[t._v(t._s(t.vehicleProfile.name))]),n("div",{staticClass:"w-1/3 flex justify-center"},[n("BatteryStatus",{attrs:{level:t.getBatteryLevel,height:"18px",width:"35px","text-class":"text-xs text-gray-600 ml-2"}})],1),n("div",{staticClass:"w-1/3 flex justify-end "},[t._v(" "+t._s(t.vehicleProfile.qr_code)+" ")])]),t._l(t.repairInspectionData,(function(e,i){return n("div",{key:"vi-"+i,staticClass:"mt-5"},[n("RepairItemCard",{attrs:{id:t.id,rData:e},on:{"change-reason":function(e){return t.handleRepairOption(i,e)}}})],1)})),n("div",{staticClass:" mt-6"},[n("div",{staticClass:"card bg-gray-100 flex flex-col w-full  gap-2 p-3"},[n("AppButton",{attrs:{variant:"primary",width:"100%",disabled:0===t.getSubpartIdsWithRepairOptionsId.length},on:{click:function(e){t.getSubpartIdsWithRepairOptionsId.length>0&&t.handleConfirm()}}},[t._v(" "+t._s(t.$t("components.vehicleInspectionAndRepairManagement.action.confirm"))+" ")])],1)])],2)},W=[],G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card bg-gray-100 p-3"},[n("div",{staticClass:" grid grid-cols-12 "},[n("div",{staticClass:"col-span-2"},[n("img",{staticClass:" w-16 h-16 rounded-md",attrs:{src:t.rData.photo_url,alt:"image"}})]),n("div",{staticClass:"col-span-9 flex items-center"},[n("div",[n("p",{staticClass:"font-bold pl-2 text-lg"},[t._v(t._s(t.rData.name))]),n("p",{staticClass:"pl-2 text-xs"},[t._v(" "+t._s(t.$t("components.vehicleInspectionAndRepairManagement.title.repairRemaining"))+" ("+t._s(t.rData.sub_parts.length)+") ")])])])]),t._l(t.rData.sub_parts,(function(e,i){return n("div",{key:"vr-"+i,staticClass:" bg-red-100 rounded-md mt-2"},[n("div",{staticClass:"p-3"},[n("div",{staticClass:"grid grid-cols-12"},[t._m(0,!0),n("div",{staticClass:"col-span-9 flex items-center"},[n("div",{staticClass:"flex items-center gap-1"},[n("p",{staticClass:" text-red-500"},[t._v(t._s(e.name))])])]),n("div",{staticClass:"col-span-2 flex items-center justify-end cursor-pointer",on:{click:function(e){return t.toggleRepairOptionView(i)}}},[t._m(1,!0)])])]),e.isShowOption?n("div",{staticClass:"mt-2 bg-oWhite rounded-md py-2"},[t._l(e.available_repair_options,(function(a,r){return[n("div",{key:"vrr-"+r,staticClass:"px-3 py-1 rounded-md "},[n("accordion-transition",{attrs:{expanded:e.isShowOption}},[n("div",[n("label",{staticClass:"flex items-center"},[n("t-radio",{attrs:{name:"vr-"+e.name+"-option-"+i},on:{change:function(e){return t.handleReasonCheckedStatus(i,r,!0)}}}),n("span",{staticClass:"ml-2 text-sm font-semibold"},[t._v(t._s(a.name))])],1)])])],1)]}))],2):t._e()])}))],2)},Q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-span-1 flex items-center"},[n("i",{staticClass:"fas fa-triangle-exclamation text-red-500 text-xl"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("i",{staticClass:" fas fa-chevron-down"})])}],J={components:{AccordionTransition:O["default"]},name:"RepairItemCard",props:{id:{type:[String,Number],required:!0},rData:{type:Object,required:!0}},data:function(){return{cantRepairViewStatus:!1}},methods:{toggleRepairOptionView:function(t){this.rData.sub_parts[t].isShowOption=!this.rData.sub_parts[t].isShowOption},toggleCantRepairView:function(){this.cantRepairViewStatus=!this.cantRepairViewStatus},closeModal:function(){dispatchEvent(new Event(V.events.sorToggle(this.id)))},handleReasonCheckedStatus:function(t,e,n){this.$emit("change-reason",{subpartItemIndex:t,repairOptionItemIndex:e,value:n})}}},K=J,z=(n("c9be"),Object(v["a"])(K,G,Q,!1,null,null,null)),X=z.exports,Y={name:"VehicleRepair",components:{SlideOverRight:S["default"],BatteryStatus:E["default"],RepairItemCard:X},props:{id:{type:[String,Number],required:!0},vehicleProfile:{type:Object,required:!0}},data:function(){return{sorId:V.events.sorId,isLoading:!1,inspectionId:null,repairInspectionData:[],inspectionStatusTimeout:null,takeActionFrom:null,repairNotNeededId:"repair-not-needed-id"}},created:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},mounted:function(){var t=this;b["a"].$on(V.events.editingData,(function(e){if(t.id==="vi-".concat(e.repairIndex)){t.inspectionId=e.inspectionId,t.takeActionFrom=e.takeActionFrom;var n=e.parts.map((function(e){var n=e.sub_parts.map((function(e){var n=e.available_repair_options.map((function(t){return Object(R["a"])(Object(R["a"])({},t),{},{isChecked:!1})}));return n.push({id:t.repairNotNeededId,name:"Repair Not Needed",isChecked:!1}),Object(R["a"])(Object(R["a"])({},e),{},{available_repair_options:n,isShowOption:!1})}));return Object(R["a"])(Object(R["a"])({},e),{},{sub_parts:n})}));t.repairInspectionData=n}}))},beforeDestroy:function(){this.removeListener()},computed:{titleText:function(){return this.$t("components.vehicleInspectionAndRepairManagement.title.repair")},isEditing:function(){return!!this.primaryKey},actionButtonText:function(){return"Submit"},getBatteryLevel:function(){var t,e;return(null===this||void 0===this||null===(t=this.vehicleProfile)||void 0===t||null===(e=t.lock)||void 0===e?void 0:e.power_level)||0},getSubpartIdsWithRepairOptionsId:function(){var t=[];return this.repairInspectionData.forEach((function(e){e.sub_parts.forEach((function(e){var n=[];e.available_repair_options.forEach((function(t){t.isChecked&&n.push(t.id)})),n.length>0&&t.push({subpartId:e.id,repairOptionIds:n})}))})),t}},watch:{},methods:{closeModal:function(){dispatchEvent(new Event(V.events.sorClose(this.id)))},goBack:function(){this.closeModal()},startListener:function(){var t=localStorage.getItem("token")||null;if(t){var e=C["a"].baseUrlV1+C["a"].channels.userInspection+"?token=".concat(t);this.sockListener=this.sockListener?this.sockListener:new y.a(e,null,C["a"].configs()),this.sockListener.onopen=function(){console.log("Opened Noti Connection...")},this.sockListener.onclose=function(){console.log("Closed Noti Connection...")},this.sockListener.onmessage=this.onMessageHandler}},removeListener:function(){this.sockListener&&(this.sockListener.close(4003,"oto system closed the socket as the was closed"),this.sockListener=null)},onMessageHandler:function(t){console.log("Incoming --\x3e ",t);var e=JSON.parse(t.data);if("noti.repair_submitted"===e.n_type){var n=e.data.id;if(n&&this.inspectionId===n&&(console.log("Incoming data for inspection ".concat(n," : data --\x3e"),e.data),"status"in e.data)){var i=e.data.status;i&&this.lastTask(i)}}},handleConfirm:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.startListener(),!(t.getSubpartIdsWithRepairOptionsId.length>0)){e.next=7;break}return t.isLoading=!0,n=[],t.getSubpartIdsWithRepairOptionsId.forEach((function(e){var i=s["c"].operationPrimer.repairAction.updateRepairOption(e.subpartId),a=new j["x"]({}).toFormData();e.repairOptionIds.forEach((function(e){e===t.repairNotNeededId?a.append("status","REPAIR_NOT_NEEDED"):(a.append("status","REPAIRED"),a.append("repair_option",e))}));var r=t.$http({url:i,method:"PATCH",data:a});n.push(r)})),e.next=7,t.$http.all(n).then(t.$http.spread((function(){t.handleRepairSubmit()}))).catch((function(e){console.error("Error occurred!",e),t.$notify({group:"bottomLeft",type:"error",title:"Error occurred!",text:e.response.data.detail})}));case 7:case"end":return e.stop()}}),e)})))()},toggleModal:function(){dispatchEvent(new Event(V.events.sorToggle(this.id)))},handleRepairOption:function(t,e){this.repairInspectionData[t].sub_parts[e.subpartItemIndex].available_repair_options=this.repairInspectionData[t].sub_parts[e.subpartItemIndex].available_repair_options.map((function(t,n){return e.repairOptionItemIndex===n?Object(R["a"])(Object(R["a"])({},t),{},{isChecked:e.value}):Object(R["a"])(Object(R["a"])({},t),{},{isChecked:!1})}))},handleRepairSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.patch(s["c"].operationPrimer.repairAction.submit(t.inspectionId)).then((function(){t.inspectionStatusTimeout=setTimeout((function(){t.$refs.slideOverRightRepair.show&&t.$http.get(s["c"].operationPrimer.repairAction.status(t.inspectionId)).then((function(e){t.lastTask(e.data.status)})).finally((function(){t.isLoading=!1,clearTimeout(t.inspectionStatusTimeout),t.inspectionStatusTimeout=null}))}),1e4)})).catch((function(e){console.error("Error occurred!",{err:e}),t.$notify({group:"bottomLeft",type:"error",title:"Error occurred!",text:e.response.data.detail})}));case 2:case"end":return e.stop()}}),e)})))()},lastTask:function(t){this.removeListener(),"REPAIR_BACKLOG"===t&&this.$notify({group:"bottomRight",type:"success",title:"Submitted for ".concat(this.vehicleProfile.name),text:"Successful and still have backlog task to repair."},5e3),"RE_INSPECTION"===t&&this.$notify({group:"bottomRight",type:"success",title:"Submitted for ".concat(this.vehicleProfile.name),text:"Successful and now you can start inspection."},5e3),this.isLoading=!1,this.closeModal(),clearTimeout(this.inspectionStatusTimeout),this.inspectionStatusTimeout=null,"vehicle-list"===this.takeActionFrom&&this.$store.dispatch("fsTable/fetchData"),"vehicle-details"===this.takeActionFrom&&this.$store.dispatch("vehicleDetails/fetchData",{type:"details",primaryKey:"".concat(this.vehicleProfile.id)})}}},Z=Y,tt=(n("d5b0"),Object(v["a"])(Z,H,W,!1,null,"4cf2cb38",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("slide-over-right",{attrs:{id:t.sorId+"-"+t.id,editType:"swap-battery-workflow"},scopedSlots:t._u([t.workflowData&&t.getLastCompletedItemData.completedIndex===t.workflowData.items.length-1?{key:"footer",fn:function(){return[n("div",{staticClass:"flex flex-wrap justify-end "},[n("AppButton",{attrs:{height:"40px",isLoading:t.isSubmitLoading},on:{click:t.handleSubmit}},[t._v(" COMPLETED ")])],1)]},proxy:!0}:null],null,!0)},[n("div",{staticClass:"flex items-center justify-start mt-5 gap-2"},[n("div",{staticClass:"flex items-center justify-center cursor-pointer back-button",on:{click:t.goBack}},[n("i",{staticClass:"fas fa-arrow-right"})]),n("div",{staticClass:"header-title"},[t._v(t._s(t.titleText))])]),n("div",{staticClass:"flex  w-full p-3 mt-5  bg-gray-50 rounded-md "},[n("div",{staticClass:"w-1/3 "},[t._v(t._s(t.vehicleProfile.name))]),n("div",{staticClass:"w-1/3 flex justify-center"},[n("BatteryStatus",{attrs:{level:t.getBatteryLevel,height:"18px",width:"35px","text-class":"text-xs text-gray-600 ml-2"}})],1),n("div",{staticClass:"w-1/3 flex justify-end "},[t._v(" "+t._s(t.vehicleProfile.qr_code)+" ")])]),t.workflowData?n("div",{staticClass:"mt-5"},t._l(t.workflowData.items,(function(e,i){return n("div",{key:"sb-"+i},[n("div",{staticClass:" list-container",class:"flex  w-full mt-0.5"},[n("div",{staticClass:" left-side flex flex-col items-center justify-center"},[n("div",{staticClass:"flex items-center justify-center"},["IN_PROGRESS"===e.status?n("i",{staticClass:"fa-solid fa-circle-half-stroke text-gray-700 text-xl"}):"COMPLETED"===e.status?n("i",{staticClass:"fa-regular fa-circle-check text-green-500 text-xl"}):"FAILED"===e.status?n("i",{staticClass:"fa-regular fa-circle-dot text-gray-700 text-xl"}):n("i",{staticClass:"fa-regular fa-circle text-gray-300 text-xl"})]),n("div",{staticClass:"w-0.5 h-full",class:(i!==t.workflowData.items.length-1?"COMPLETED"===e.status?"bg-green-500":"bg-gray-300":"bg-oWhite")+" "})]),n("div",{staticClass:" right-side flex  justify-between "},[n("div",[n("p",{staticClass:"font-medium  text-md ",class:"PENDING"===e.status?"text-gray-500":"text-oBlack"},[t._v(" "+t._s(e.title)+" ")]),n("p",{staticClass:"text-xs",class:t.getActionStatusClass(e)},[t._v(" "+t._s(t.getActionStatusText(e))+" "+t._s("IN_PROGRESS"===e.status&&"automatic"===e.mode&&null!==t.timeCounterInSec?"("+t.timeCounterInSec+"s)":"")+" ")])]),n("div",{staticClass:"flex items-center justify-center"},["FAILED"===e.status?[n("AppButton",{attrs:{height:"30px",isLoading:t.isManualActionLoading},on:{click:function(n){return t.handleManualAction(e.code)}}},[t._v(" "+t._s(3===t.failedCounter?"Skip":"Retry")+" ")])]:t._e(),"IN_PROGRESS"===e.status&&"manual"===e.mode?[n("AppButton",{attrs:{height:"30px",isLoading:t.isManualActionLoading},on:{click:function(e){return t.handleManualAction("confirm_prompt")}}},[t._v(" Continue ")])]:t._e()],2)])])])})),0):t._e(),n("ConfirmFirst",{key:"confirm_prompt"+t.id,attrs:{id:"confirm_prompt"+t.id,isLoading:t.isLoading,title:(t.getCurrentInProgressItemData.progressData?t.getCurrentInProgressItemData.progressData.title:"")+" now",subtitle:"Please complete the task now.Slow internet might be effect to the task.",confirmButtonText:"Completed",cancelButtonVariant:"secondary",confirmButtonVariant:"primary"},on:{confirm:function(e){return t.handleManualAction(t.getCurrentInProgressItemData.progressData?t.getCurrentInProgressItemData.progressData.code:"")},cancel:function(e){return t.handleManualAction("confirm_prompt_cancel")}}})],1)},it=[],at=(n("b64b"),n("c740"),n("689a")),rt={name:"SwapBattery",components:{SlideOverRight:S["default"],BatteryStatus:E["default"],ConfirmFirst:at["default"]},props:{id:{type:[String,Number],required:!0},vehicleProfile:{type:Object,required:!0}},data:function(){return{sorId:U.events.sorId,isLoading:!1,workflowData:null,isManualActionLoading:!1,isSubmitLoading:!1,workflowItemTimer:null,timeCounterInSec:null,timeCounterIntervalId:null,failedCounter:0}},mounted:function(){var t=this;b["a"].$on(U.events.editingData,(function(e){if(t.id==="sb-".concat(e.swapBatteryIndex)){var n=e.workflowData.items.map((function(t){return Object(R["a"])(Object(R["a"])({},t),{},{isCurrentTrack:!1})})),i=t.getFirstIndex(n,"PENDING"),a=n.map((function(t,e){return e===i?Object(R["a"])(Object(R["a"])({},t),{},{status:"IN_PROGRESS"}):Object(R["a"])({},t)}));t.workflowData=Object(R["a"])(Object(R["a"])({},e.workflowData),{},{items:a}),t.startListener()}}))},beforeDestroy:function(){this.removeListener()},computed:{titleText:function(){return"Workflow Checklist"},isEditing:function(){return!!this.primaryKey},actionButtonText:function(){return"Submit"},getBatteryLevel:function(){var t,e;return(null===this||void 0===this||null===(t=this.vehicleProfile)||void 0===t||null===(e=t.lock)||void 0===e?void 0:e.power_level)||0},getCurrentInProgressItemData:function(){if(this.workflowData&&this.workflowData.items.length>0){var t=this.getFirstIndex(this.workflowData.items,"IN_PROGRESS");return t>-1?{progressIndex:t,progressData:this.workflowData.items[t]}:{}}return{}},getLastCompletedItemData:function(){if(this.workflowData&&this.workflowData.items.length>0){var t=this.getLastIndex(this.workflowData.items,"COMPLETED");return t>-1?{completedIndex:t}:{}}return{}},getCurrentFailedItemData:function(){if(this.workflowData&&this.workflowData.items.length>0){var t=this.getFirstIndex(this.workflowData.items,"FAILED");return t>-1?{failedIndex:t}:{}}return{}}},watch:{getCurrentInProgressItemData:{immediate:!1,deep:!0,handler:function(t){var e=this;0!==Object.keys(t).length&&"automatic"===t.progressData.mode&&this.getFlowItemExecuteStatus(t.progressData.code).then((function(n){"PENDING"===n.status?(e.timeCounterInSec=20,e.timeCounterIntervalId=setInterval((function(){e.timeCounterInSec>0?e.timeCounterInSec-=1:e.clearWorkflowItemTimeInterval()}),1e3),e.workflowItemTimer=setTimeout((function(){e.getFlowItemExecuteStatus(t.progressData.code).then((function(n){"PENDING"===n.status?e.workflowData.items[t.progressIndex].status="FAILED":e.workflowData.items[t.progressIndex].status="COMPLETED"})).catch((function(n){console.log("flowExecuteStatus-err",{err:n}),e.workflowData.items[t.progressIndex].status="FAILED",e.$notify({group:"bottomLeft",type:"error",title:"Error occurred!",text:n.response.data.detail})})).finally((function(){e.clearWorkflowItemTimeout()}))}),1e3*e.timeCounterInSec)):e.workflowData.items[t.progressIndex].status="COMPLETED"})).catch((function(n){console.log("flowExecuteStatus-err",{err:n}),e.workflowData.items[t.progressIndex].status="FAILED",e.$notify({group:"bottomLeft",type:"error",title:"Error occurred!",text:n.response.data.detail})}))}},getLastCompletedItemData:{immediate:!1,deep:!0,handler:function(t){0!==Object.keys(t).length&&(t.completedIndex<this.workflowData.items.length-1&&"PENDING"===this.workflowData.items[t.completedIndex+1].status&&(this.clearWorkflowItemTimeout(),this.workflowData.items[t.completedIndex+1].status="IN_PROGRESS"),t.completedIndex===this.workflowData.items.length-1&&(this.clearWorkflowItemTimeout(),this.removeListener()))}}},methods:{closeModal:function(){dispatchEvent(new Event(U.events.sorClose(this.id)))},goBack:function(){this.closeModal()},clearWorkflowItemTimeout:function(){clearTimeout(this.workflowItemTimer),this.workflowItemTimer=null},clearWorkflowItemTimeInterval:function(){clearInterval(this.timeCounterIntervalId),this.timeCounterIntervalId=null,this.timeCounterInSec=null},getActionStatusClass:function(t){return"COMPLETED"===t.status?"text-green-500":"IN_PROGRESS"===t.status?"text-gray-700":"FAILED"===t.status?"text-red-500":"text-gray-400"},getActionStatusText:function(t){return"COMPLETED"===t.status?"Completed":"IN_PROGRESS"===t.status?"Processing":"FAILED"===t.status?"Failed":"Pending"},getFirstIndex:function(t,e){return t.findIndex((function(t){return t.status===e}))},getLastIndex:function(t,e){return t.findLastIndex((function(t){return t.status===e}))},handleManualAction:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("confirm_prompt"!==t){n.next=4;break}return e.isManualActionLoading=!1,e.$modal.show("confirm_prompt".concat(e.id)),n.abrupt("return");case 4:if("confirm_prompt_cancel"!==t){n.next=8;break}return e.isManualActionLoading=!1,e.$modal.hide("confirm_prompt".concat(e.id)),n.abrupt("return");case 8:if(3!==e.failedCounter){n.next=12;break}return e.failedCounter=0,e.workflowData.items[e.getCurrentFailedItemData.failedIndex].status="COMPLETED",n.abrupt("return");case 12:return e.getCurrentFailedItemData.failedIndex&&(e.workflowData.items[e.getCurrentFailedItemData.failedIndex].status="IN_PROGRESS"),e.isManualActionLoading=!0,e.$modal.hide("confirm_prompt".concat(e.id)),n.next=17,e.getFlowItemExecuteStatus(t).then((function(t){e.failedCounter=0,"PENDING"===t.status?e.workflowItemTimer=setTimeout((function(){e.getFlowItemExecuteStatus(e.getCurrentInProgressItemData.progressData.code).then((function(t){"PENDING"===t.status?e.workflowData.items[e.getCurrentInProgressItemData.progressIndex].status="FAILED":e.workflowData.items[e.getCurrentInProgressItemData.progressIndex].status="COMPLETED"})).catch((function(t){console.log("flowExecuteStatus-err",t),e.workflowData.items[e.getCurrentInProgressItemData.progressIndex].status="FAILED",e.$notify({group:"bottomLeft",type:"error",title:"Error occurred!",text:t.response.data.detail})})).finally((function(){e.clearWorkflowItemTimeout()}))}),1e4):e.workflowData.items[e.getCurrentInProgressItemData.progressIndex].status="COMPLETED"})).catch((function(t){console.log("flowExecuteStatus-err",{err:t}),e.failedCounter++,e.getCurrentInProgressItemData.progressIndex&&(e.workflowData.items[e.getCurrentInProgressItemData.progressIndex].status="FAILED"),e.$notify({group:"bottomLeft",type:"error",title:"Error occurred!",text:t.response.data.detail})})).finally((function(){e.isManualActionLoading=!1}));case 17:case"end":return n.stop()}}),n)})))()},getFlowItemExecuteStatus:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=s["c"].vehicle.swapBatteryWorkflow.execute(e.workflowData.id),a=new j["x"]({code:t}).toFormData(),n.prev=2,n.next=5,e.$http.patch(i,a);case 5:return r=n.sent,n.abrupt("return",Promise.resolve(r.data));case 9:return n.prev=9,n.t0=n["catch"](2),n.abrupt("return",Promise.reject(n.t0));case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},handleSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSubmitLoading=!0,e.next=3,t.$http.patch(s["c"].vehicle.swapBatteryWorkflow.complete(t.workflowData.id)).then((function(){t.$store.dispatch("fsTable/fetchData"),t.$notify({group:"bottomRight",type:"success",title:"Success",text:"Successfully Completed"},2e3)})).catch((function(e){console.log("handleSubmit-err",{err:e}),t.$notify({group:"bottomLeft",type:"error",title:"Error occurred!",text:e.response.data.detail})})).finally((function(){t.closeModal(),t.isSubmitLoading=!1}));case 3:case"end":return e.stop()}}),e)})))()},startListener:function(){var t=localStorage.getItem("token")||null;if(t){var e=C["a"].baseUrlV1+C["a"].channels.userWorkflow+"?token=".concat(t);this.sockListener=this.sockListener?this.sockListener:new y.a(e,null,C["a"].configs()),this.sockListener.onopen=function(){console.log("Opened Noti Connection...")},this.sockListener.onclose=function(){console.log("Closed Noti Connection...")},this.sockListener.onmessage=this.onMessageHandler}},removeListener:function(){this.sockListener&&(this.sockListener.close(4003,"oto system closed the socket as the was closed"),this.sockListener=null)},onMessageHandler:function(t){var e=JSON.parse(t.data);"COMPLETED"===e[this.getCurrentInProgressItemData.progressData.code].status&&(this.workflowData.items[this.getCurrentInProgressItemData.progressIndex].status="COMPLETED")}}},st=rt,ot=(n("3187"),Object(v["a"])(st,nt,it,!1,null,"0dff1c01",null)),ct=ot.exports,lt={name:"VehicleMoreActions",components:{TDropdownItem:function(){return n.e("chunk-2d0e51fe").then(n.bind(null,"92c2"))},ConfirmFirst:function(){return Promise.resolve().then(n.bind(null,"689a"))},DownloadQRCode:w,VehicleInspection:M,VehicleRepair:et,SwapBattery:ct},props:{data:{type:Object,required:!0},vehicleType:{type:[String,Number],required:!1,default:"scooter"},currentItemIndex:{type:Number,required:!0,default:0},currentStatus:{type:Boolean,reqired:!1},hibernateStatus:{type:Boolean,reqired:!1},redirectPath:{type:String,default:""},variant:{type:String,default:"badge",validator:function(t){return["badge","emphasize"].includes(t)}},isShowDropDown:{type:Boolean,default:!0},takeActionFrom:{type:String,default:"vehicle-list"}},watch:{currentStatus:{immediate:!0,deep:!1,handler:function(t){this.status=t}}},mounted:function(){this.startListener()},data:function(){return{lockReq:!1,isDeleting:!1,sockListener:null,status:!1,sendLockRequest:!1,sendUndockRequest:!1,timeoutId:null,startInspectionStatus:["NOT_REQUIRED","REQUIRED","RE_INSPECTION","UNDER_INSPECTION"],startRepairStatus:["REPAIR_REQUIRED","REPAIR_BACKLOG"],startSwapBatteryStatus:["REQUIRED","SWAP_IN_PROGRESS"]}},beforeDestroy:function(){this.removeListener()},computed:{canTakeInspectionAction:function(){return!!this.startInspectionStatus.includes(this.data.inspection_settings.inspection_status)},canTakeRepairAction:function(){return!!this.startRepairStatus.includes(this.data.inspection_settings.inspection_status)},canTakeSwapBatteryAction:function(){return!!this.startSwapBatteryStatus.includes(this.data.battery_settings.battery_swap_status)},canTakeVehicleUndockAction:function(){var t,e,n;return(null===(t=this.data)||void 0===t?void 0:t.charging_adapter)&&"UNDOCKED"!==(null===(e=this.data)||void 0===e||null===(n=e.charging_adapter)||void 0===n?void 0:n.docking_status)},vehicleId:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.id},lockImei:function(){var t,e;return null===(t=this.data)||void 0===t||null===(e=t.lock)||void 0===e?void 0:e.lock_id},qrCode:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.qr_code},heartbeat:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.heart_beat},getStatusText:function(){return!0===this.status?this.$t("components.vehicleManagement.itemActions.locked"):this.$t("components.vehicleManagement.itemActions.unlocked")},getButtonClass:function(){var t="vehicle-action-button ";return t+="".concat(this.variant," "),!1===this.heartbeat?t+="inactive ":t+=!0===this.status?"locked ":"unlocked ",t}},methods:{handleInspectionNeeded:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.lockReq){e.next=2;break}return e.abrupt("return");case 2:t.lockReq=!0,n=s["c"].operationPrimer.inspectionAction.start(),i=new j["x"]({vehicle_id:t.data.id}).toFormData(),t.$notify({group:"generic",type:"default",title:"Processing, please wait...",text:"The action is being executed."},3e3),t.$http.post(n,i).then((function(e){b["a"].$emit(D.events.editingData,{inspectionId:e.data.id,parts:e.data.parts,inspectIndex:t.currentItemIndex,takeActionFrom:t.takeActionFrom}),dispatchEvent(new Event(D.events.sorOpen("vi-".concat(t.currentItemIndex))))})).catch((function(e){console.log("start-inspection-err--",e.response.data.detail),t.$notify({group:"bottomRight",type:"error",title:"Error Occurred [".concat(e.response.status,"]"),text:e.response.data.detail||"Failed to start inspection"})})).finally((function(){t.lockReq=!1}));case 7:case"end":return e.stop()}}),e)})))()},handleUndockChargingAdapter:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.lockReq){e.next=2;break}return e.abrupt("return");case 2:t.lockReq=!0,t.sendUndockRequest=!0,n=s["c"].vehicle.chargingDockAdapter.undock(t.vehicleId),t.$http.patch(n).then((function(e){console.log("handleUndockChargingAdapter",e),t.$notify({group:"generic",type:"default",title:"Processing, please wait...",text:"".concat(e.data)},2e3),t.getChargingDockStatus()})).catch((function(e){console.log("handleUndockChargingAdapter-err",{err:e}),t.$notify({group:"generic",type:"error",title:"Error",text:"".concat(e.response.data.message)},5e3)}));case 6:case"end":return e.stop()}}),e)})))()},handleRepairNeeded:function(){var t=this;if(!0!==this.lockReq){this.lockReq=!0;var e=s["c"].operationPrimer.repairAction.detail(this.vehicleId);this.$notify({group:"generic",type:"default",title:"Processing, please wait...",text:"The action is being executed."},3e3),this.$http.get(e).then((function(e){console.log("handleRepairNeeded",e),b["a"].$emit(V.events.editingData,{inspectionId:e.data.id,parts:e.data.parts,repairIndex:t.currentItemIndex,takeActionFrom:t.takeActionFrom}),dispatchEvent(new Event(V.events.sorOpen("vi-".concat(t.currentItemIndex))))})).catch((function(e){console.log("start-inspection-err--",e.response.data.detail),t.$notify({group:"bottomRight",type:"error",title:"Error Occurred [".concat(e.response.status,"]"),text:e.response.data.detail||"Failed to start inspection"})})).finally((function(){t.lockReq=!1}))}},handleSwapBatteryNeeded:function(){var t=this;if(!0!==this.lockReq){this.lockReq=!0;var e=s["c"].vehicle.swapBatteryWorkflow.start(),n=new j["x"]({vehicle_id:this.data.id}).toFormData();this.$notify({group:"generic",type:"default",title:"Processing, please wait...",text:"The action is being executed."},1e3),this.$http.post(e,n).then((function(e){console.log(e),b["a"].$emit(U.events.editingData,{swapBatteryIndex:t.currentItemIndex,workflowData:e.data}),dispatchEvent(new Event(U.events.sorOpen("sb-".concat(t.currentItemIndex))))})).catch((function(e){console.log("start-workflow-err--",e.response.data.detail),t.$notify({group:"bottomRight",type:"error",title:"Error Occurred [".concat(e.response.status,"]"),text:e.response.data.detail||"Failed to start workflow"})})).finally((function(){t.lockReq=!1}))}},handleVehicleLockUnlock:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.lockReq){e.next=2;break}return e.abrupt("return");case 2:return console.log(t.status),t.lockReq=!0,t.sendLockRequest=!0,n=!0===t.status?s["c"].vehicle.status.forceUnlock(t.lockImei,t.vehicleType):s["c"].vehicle.status.forceLock(t.lockImei,t.vehicleType),e.next=8,t.$http.post(n).then((function(e){console.log(e.data),t.getVehicleStatus()})).catch((function(e){var n;(t.lockReq=!1,console.log("error-v",{error:e}),e.response.data.code&&e.response.data.message)?t.$notify({group:"bottomRight",type:"error",title:"Error! [".concat(e.response.data.code,"]"),text:e.response.data.message},1e4):t.$notify({group:"bottomRight",type:"error",title:"Error! [".concat(e.response.status,"]"),text:null!==(n=e.response.data.detail)&&void 0!==n?n:e.response.data},1e4)}));case 8:case"end":return e.stop()}}),e)})))()},handleVehicleHibernateActivate:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=new FormData,n.append("hibernate_mode",!t.hibernateStatus),t.$http.patch(s["c"].vehicle.updateGeneralFLags(t.data.id),n).then((function(e){t.$notify({group:"bottomRight",type:"success",title:"Success",text:"Flag updated successfully"},5e3),t.$store.dispatch("fsTable/fetchData"),console.log("sc-",e)})).catch((function(e){console.log("general-err",e),t.$notify({group:"bottomRight",type:"error",title:"Failed",text:"".concat(e.response)},5e3)}));case 3:case"end":return e.stop()}}),e)})))()},forceSync:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.lockReq){e.next=2;break}return e.abrupt("return");case 2:return t.lockReq=!0,n=s["c"].vehicle.status.forceSync(t.vehicleId),e.next=6,t.$http.post(n).then((function(e){console.warn({forceSync:e}),t.$emit("force-sync")})).catch((function(e){console.error({forceSync:e.response}),t.$notify({group:"bottomRight",type:"error",title:"Error [".concat(e.response.status,"]"),text:"Unable to process the request!"})}));case 6:t.lockReq=!1;case 7:case"end":return e.stop()}}),e)})))()},syncDockStatus:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.lockReq){e.next=2;break}return e.abrupt("return");case 2:return t.lockReq=!0,n=s["c"].vehicle.chargingDockAdapter.dockingStatus(t.vehicleId),e.next=6,t.$http.get(n).then((function(e){t.$store.commit("vehicleDetails/setChargingDockStatus",{status:e.data.docking_status}),t.$emit("force-sync")})).catch((function(e){t.$notify({group:"bottomRight",type:"error",title:"Error [".concat(e.response.status,"]"),text:"Please try again"})}));case 6:t.lockReq=!1;case 7:case"end":return e.stop()}}),e)})))()},triggerRing:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post(s["c"].vehicle.triggerRing(t.vehicleId),new FormData).then(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$notify({group:"generic",type:"success",title:"Alarm",text:"Ringing alarm..."},1e4);case 1:case"end":return e.stop()}}),e)})))).catch((function(e){t.$notify({group:"generic",type:"error",title:"Server Error [".concat(e.response.status,"]"),text:"Unable to process the request!"})}));case 2:case"end":return e.stop()}}),e)})))()},downloadQRCode:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$modal.show("downloadQRCode-".concat(t.vehicleId));case 1:case"end":return e.stop()}}),e)})))()},askConfirmation:function(){this.$modal.show("confirmFirst-".concat(this.vehicleId))},onDeleteCancel:function(){this.$modal.hide("confirmFirst-".concat(this.vehicleId))},onDeleteConfirm:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("redirectPath",t.redirectPath),n=new FormData,n.append("with_trip",!0),n.append("with_lock",!0),t.isDeleting=!0,e.next=7,t.$http.delete(s["c"].vehicle.delete(t.vehicleId),{data:n}).then((function(){t.$emit("delete:succeeded",t.data),t.$modal.hide("confirmFirst-".concat(t.vehicleId)),t.$router.push(t.redirectPath),b["a"].$emit("force-refresh")})).catch((function(e){console.error(e.response),t.$emit("delete:failed",e.response),t.$modal.hide("confirmFirst-".concat(t.vehicleId))})).finally((function(){return t.isDeleting=!1}));case 7:case"end":return e.stop()}}),e)})))()},onEditVehicle:function(){this.$emit("edit",{vehicleId:this.vehicleId})},startListener:function(){var t=localStorage.getItem("token")||null;if(t){var e=C["a"].baseUrl+C["a"].channels.bikeUpdates+"?token=".concat(t);this.sockListener=this.sockListener?this.sockListener:new y.a(e,null,C["a"].configs()),this.sockListener.onopen=function(){console.log("Opened Connection bikeUpdates channel...")},this.sockListener.onclose=function(){console.log("Closed Connection bikeUpdates channel...")},this.sockListener.onmessage=this.onMessageHandler}},removeListener:function(){this.sockListener&&(this.sockListener.close(4003,"oto system closed the socket to refresh stream"),this.sockListener=null)},onMessageHandler:function(t){console.log("Incoming update",t,JSON.parse(t.data));var e=JSON.parse(t.data);if("noti.bike_updates"===e.n_type){var n=e.data;console.log("Recieved Payload...",n);var i=n["id"];if(i&&this.data.id===i){if(this.$store.commit("vehicleDetails/setLockStatus",{status:n.is_locked}),this.$store.commit("vehicleDetails/setFlags",{general_flags:n.general_flags,operational_flags:n.operational_flags,status_flags:n.status_flags}),this.status!==n.is_locked){if(this.status=n.is_locked,this.sendLockRequest){var a=this.status?"Locked":"Unlocked";this.$notify({group:"bottomRight",type:"success",title:a,text:"The vehicle is now ".concat(a.toLowerCase())},3e3),this.sendLockRequest=!1}this.lockReq=!1,clearTimeout(this.timeoutId)}console.log("Incoming update current",t,JSON.parse(t.data))}}},getVehicleStatus:function(){var t=arguments,e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:2e4,e.timeoutId=setTimeout(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("wait..."),!e.lockReq||!e.sendLockRequest){t.next=4;break}return t.next=4,e.$http.get(s["c"].vehicle.status.current(e.vehicleId)).then((function(t){if(console.log(t.data),t.data.locked!==e.status){e.status=t.data.locked,e.$store.commit("vehicleDetails/setLockStatus",{status:t.data.locked});var n=t.data.locked?"Locked":"Unlocked";e.$notify({group:"bottomRight",type:"success",title:n,text:"The vehicle is now ".concat(n.toLowerCase())},2e3)}else{var i=!0===e.status?"Failed to unlock!":"Failed to lock!";e.$notify({group:"bottomRight",type:"error",title:"Failed!",text:"".concat(i," Please try again")},3e3)}})).catch((function(t){console.warn(t),e.$notify({group:"bottomRight",type:"error",title:"HTTP Error!",text:"HTTP Error! Please try again"})})).finally((function(){e.lockReq=!1,e.sendLockRequest=!1}));case 4:case"end":return t.stop()}}),t)}))),i);case 2:case"end":return n.stop()}}),n)})))()},getChargingDockStatus:function(){var t=arguments,e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=t.length>0&&void 0!==t[0]?t[0]:1e4,e.timeoutId=setTimeout(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("wait..."),!e.lockReq||!e.sendUndockRequest){t.next=4;break}return t.next=4,e.$http.get(s["c"].vehicle.chargingDockAdapter.dockingStatus(e.vehicleId)).then((function(t){"UNDOCKED"===t.data.docking_status?(e.$store.commit("vehicleDetails/setChargingDockStatus",{status:t.data.docking_status}),e.$notify({group:"bottomRight",type:"success",title:"Success",text:"The vehicle is now undocked"},2e3)):e.$notify({group:"bottomRight",type:"error",title:"Failed!",text:"Failed to Undock! Please try again"},3e3)})).catch((function(t){console.warn(t),e.$notify({group:"bottomRight",type:"error",title:"HTTP Error!",text:"HTTP Error! Please try again"})})).finally((function(){e.lockReq=!1,e.sendUndockRequest=!1}));case 4:case"end":return t.stop()}}),t)}))),i);case 2:case"end":return n.stop()}}),n)})))()}}},ut=lt,dt=(n("be03"),Object(v["a"])(ut,i,a,!1,null,"1b390808",null));e["default"]=dt.exports},"40e1":function(t,e,n){},"416b":function(t,e,n){"use strict";n("a5e7")},"59c1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{on:{enter:t.onEnter,"after-enter":t.onAfterEnter,"before-leave":t.onBeforeLeave,leave:t.onLeave}},[t.expanded?n("div",{ref:"wrapper",staticClass:"accordion",style:t.wrapperStyle},[n("div",{ref:"inner",staticClass:"accordion__inner"},[t._t("default")],2)]):t._e()])},a=[],r=(n("a9e3"),n("2b0e")),s=r["default"].extend({props:{expanded:{type:Boolean,required:!0},duration:{type:Number,default:250}},computed:{wrapperStyle:function(){return{transitionDuration:"".concat(this.duration,"ms")}}},mounted:function(){this.expanded&&this.setWrapperHeightTo("auto")},methods:{onEnter:function(t){this.setWrapperHeightTo(this.getContentHeight(),t)},onAfterEnter:function(t){this.setWrapperHeightTo("auto",t)},onBeforeLeave:function(t){this.setWrapperHeightTo(this.getContentHeight(),t)},onLeave:function(t){t.scrollHeight,this.setWrapperHeightTo(0,t)},getContentHeight:function(){var t=this.$refs.inner;return t.getBoundingClientRect().height},setWrapperHeightTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$refs.wrapper;e.style.height="number"===typeof t?"".concat(t,"px"):t}}}),o=s,c=(n("1a59"),n("2877")),l=Object(c["a"])(o,i,a,!1,null,null,null);e["default"]=l.exports},"689a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("t-modal",{ref:"popup",attrs:{name:t.id,variant:"confirmation",hideCloseButton:!0,disableBodyScroll:!0,escToClose:!t.isLoading,clickToClose:!t.isLoading}},[n("section",{staticClass:"flex justify-center items-center mt-8 mb-2 text-gray-500"},[n("i",{staticClass:"text-4xl",class:t.icon})]),n("section",{staticClass:"px-4 text-2xl font-extrabold text-center"},[t._v(" "+t._s(t.title)+" ")]),n("section",{staticClass:"px-4 font-bold text-center"},[t._v(" "+t._s(t.subtitle)+" ")]),"medium"===t.criticalityLevel?n("section",{staticClass:"px-4 my-6 text-center"},[t._v(" "+t._s(t.criticalityTitle)+" "),n("AppInput",{staticClass:"text-center",attrs:{type:"password"},model:{value:t.criticalityModels.medium,callback:function(e){t.$set(t.criticalityModels,"medium",e)},expression:"criticalityModels.medium"}})],1):t._e(),n("section",{staticClass:"flex items-center py-4 px-4 mt-6 space-x-5 bg-gray-100"},[n("anchor-button",{class:"w-1/2",attrs:{variant:t.cancelButtonVariant},on:{click:function(e){return t.executeAction("cancel")}}},[t._v(" "+t._s(t.cancelButtonText)+" ")]),n("anchor-button",{class:"w-1/2",attrs:{variant:t.confirmButtonVariant,isLoading:t.isLoading},on:{click:function(e){return t.executeAction("confrim")}}},[t._v(" "+t._s(t.confirmButtonText)+" ")])],1)])},a=[],r=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("caad"),{name:"ConfirmFirst",components:{AnchorButton:function(){return n.e("chunk-389dd0fb").then(n.bind(null,"15e7"))}},props:{id:{type:[String,Number],requred:!0},icon:{type:[String,Number],required:!1,default:"fas fa-exclamation-circle"},title:{type:[String,Number],required:!1,default:"Are you sure?"},subtitle:{type:[String,Number],required:!1,default:"This action cannot be undone."},cancelButtonText:{type:[String,Number],required:!1,default:"Cancel"},cancelButtonVariant:{type:String,required:!1,default:"primary",validaotor:function(t){return["primary","secondary","success","success-alt","warning","warning-alt","disabled"].includes(t)}},confirmButtonText:{type:[String,Number],required:!1,default:"Continue"},confirmButtonVariant:{type:String,required:!1,default:"warning-alt",validaotor:function(t){return["primary","secondary","success","success-alt","warning","warning-alt","disabled"].includes(t)}},criticalityLevel:{type:[String],required:!1,default:"zero",validaotor:function(t){return["zero","low","medium","high"].includes(t)}},criticalityTitle:{type:[String],required:!1,default:'Type "CONFIRM" Please'},criticalityPassword:{type:[String,Number],required:!1,default:"CONFIRM"},isLoading:{type:Boolean,required:!1,default:!1}},data:function(){return{criticalityModels:{zero:"",low:"",medium:"",high:""}}},methods:{executeAction:function(t){"confrim"===t&&!1===this.isLoading&&("zero"===this.criticalityLevel?this.$emit("confirm"):"medium"===this.criticalityLevel&&(this.criticalityModels.medium===this.criticalityPassword?this.$emit("confirm"):(this.$emit("confirm:failed"),this.$notify({group:"bottomRight",type:"error",title:"Confirmation Failed!",text:"Invalid confirmation code"})))),"cancel"===t&&!1===this.isLoading&&(this.$refs.popup.hide(),this.$emit("cancel"))}}}),s=r,o=(n("219a"),n("2877")),c=Object(o["a"])(s,i,a,!1,null,"7aa4f5dc",null);e["default"]=c.exports},"6a95":function(t,e,n){t.exports=n.p+"assets/download.cbe87bd1.svg"},"6ec2":function(t,e,n){},7536:function(t,e,n){},a5e7:function(t,e,n){},affe:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"flex items-center justify-start "},[n("div",{style:"position: relative; height: "+t.height+"; width: calc("+t.width+" + 4px)"},[n("div",{style:t.getBatteryFillable}),n("div",{style:t.getBatteryCap}),n("div",{style:t.getBatteryFill})]),n("span",{class:t.textClass},[t._v(t._s(t.getBatteryLevel))])])},a=[],r=(n("a9e3"),n("b680"),n("99af"),{name:"BatteryStatus",props:{level:{type:[Number,String],required:!1,default:0},height:{type:String,required:!1,default:"30px"},width:{type:String,required:!1,default:"55px"},vartical:{type:Boolean,required:!1,default:!1},textClass:{type:String,required:!1,default:"ml-2 battery-value"}},computed:{getBatteryLevel:function(){var t=Number(this.level).toFixed();return"".concat(t,"%")},getBatteryFillable:function(){var t="position: absolute; left:0; top:0; border-radius: 3px; background-color: #ededed;";return t+="width : ".concat(this.width,";"),t+="height : ".concat(this.height,";"),t},getBatteryCap:function(){var t,e,n="position: absolute;";return this.level>=100?n+="background-color: #0ac84b;":n+="background-color: #ededed;",this.vartical?(t="5px",e="4px"):(t="4px",e="8px"),n+="width: ".concat(t,";"),n+="height: ".concat(e,";"),this.vartical?(n+="left: calc((".concat(this.width," - ").concat(t,") / 2);"),n+="bottom: ".concat(this.height,";"),n+="border-top-left-radius: 3px;",n+="border-top-right-radius: 3px;"):(n+="top : calc((".concat(this.height," - ").concat(e,") / 2);"),n+="left : ".concat(this.width,";"),n+="border-top-right-radius: 3px;",n+="border-bottom-right-radius: 3px;"),n},getBatteryFill:function(){var t="position: absolute; left:0; border-radius: 3px;",e=this.level<=0?0:this.level>=100?100:parseFloat(this.level).toFixed();e<=29?t+="background-color: #ff0000;":e>=30&&e<=69?t+="background-color: #ffaf00;":e>=70&&(t+="background-color: #0ac84b;");var n=(e/100).toFixed(2);return this.vartical?(t+="bottom: 0;",t+="height: calc(".concat(this.height," * ").concat(n,");"),t+="width: ".concat(this.width,";")):(t+="top: 0;",t+="width: calc(".concat(this.width," * ").concat(n,");"),t+="height: ".concat(this.height,";")),t}}}),s=r,o=(n("416b"),n("2877")),c=Object(o["a"])(s,i,a,!1,null,"71c4495c",null);e["default"]=c.exports},be03:function(t,e,n){"use strict";n("6ec2")},c9be:function(t,e,n){"use strict";n("eb98")},ca4f:function(t,e,n){},cc91:function(t,e,n){},d5b0:function(t,e,n){"use strict";n("ca4f")},eb98:function(t,e,n){}}]);
//# sourceMappingURL=chunk-37fb9398.f8bb81e7.js.map