(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bb8e9a4","chunk-2d0d3e80","chunk-42b332c1","chunk-2d0d3e80"],{1407:function(e,t,a){"use strict";a("e0f1")},2242:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("slide-over-right",{staticClass:"vld-parent",attrs:{id:e.sorId,editType:"single-scooter"},on:{showModal:e.showModal},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"pb-3 panel-title"},[e._v(e._s(e.titleText))]),a("stepper",{ref:"stepper",attrs:{steps:e.stepStatusArr,edit:e.is_edit,"with-divider":!1},on:{input:e.changeTabs,errors:e.checkErrors},scopedSlots:e._u([{key:"step-1",fn:function(){return[e._v(" IOT Info ")]},proxy:!0},{key:"step-2",fn:function(){return[e._v(" Vehicle Info ")]},proxy:!0}]),model:{value:e.currentStep,callback:function(t){e.currentStep=t},expression:"currentStep"}})]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"flex"},[a("div",{staticClass:"w-2/5"},[a("slide-over-left-trigger",{attrs:{id:e.sorId},on:{cancelEdit:e.showModal}},[a("anchor-button",{staticClass:"text-center custom-font cancel-btn",attrs:{variant:"secondary"}},[a("span",{staticClass:"font-semibold custom-font"},[e._v(" Cancel ")])])],1)],1),a("div",{staticClass:"flex flex-wrap justify-end w-3/5"},[a("t-button",{staticClass:"mx-3",attrs:{type:"submit"},on:{click:function(t){return e.submitStep(e.currentStep)}}},[e._v(" "+e._s(e.isEditing?"Update":"Save & Continue")+" ")])],1)])]},proxy:!0}])},[a("loading",{attrs:{active:e.isLoading,"is-full-page":!1},on:{"update:active":function(t){e.isLoading=t}}}),1==e.currentStep?[a("add-single-scooter-step-1",{ref:"step1",on:{isValid:e.isValidFunc}})]:e._e(),2==e.currentStep?[a("add-single-scooter-step-2",{ref:"step2",on:{isValid:e.isValidFunc}})]:e._e()],2)},i=[],s=a("1da1"),n=a("5530"),o=(a("96cf"),a("b64b"),a("b0c0"),a("a4d3"),a("e01a"),a("2f62")),l=a("4a9d"),c=a("b2fe"),u=a("e38b"),d=a("04ec"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{on:{click:function(t){return e.toggle(e.id)}}},[e._t("default",(function(){return[a("button",[e._v("Toggle")])]}))],2)},f=[],h={name:"SlideOverLeftTrigger",props:{id:{required:!0,type:String}},mounted:function(){},methods:{open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null!==e?e:this.id,a=dispatchEvent(new Event(this.getOpeningEventName(t)));console.log(a)},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("cancel = ");var t=null!==e?e:this.id;dispatchEvent(new Event(this.getClosingEventName(t)))},toggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=null!==e?e:this.id,r=this.getTogglingEventName(a);console.log(r),this.$emit("cancelEdit",r,t)},getOpeningEventName:function(e){return"sor-open-".concat(e)},getClosingEventName:function(e){return"sor-close-".concat(e)},getTogglingEventName:function(e){return"sor-toggle-".concat(e)}}},m=h,g=a("2877"),v=Object(g["a"])(m,p,f,!1,null,null,null),b=v.exports,_=a("15e7"),x=a("da8c"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.handleSubmit;return[a("loading",{attrs:{active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}}),a("div",{staticClass:"px-6 pt-6 pb-6"},[a("input-label",{attrs:{text:"Choose iOT"}}),a("t-rich-select",{attrs:{options:e.iots,valueAttribute:"id",textAttribute:"name",placeholder:"--"},on:{change:e.changeIOT},model:{value:e.sel_iot,callback:function(t){e.sel_iot=t},expression:"sel_iot"}})],1),a("form",{staticClass:"px-6 pt-6",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),r(e.submitStepOne)}}},[a("div",{staticClass:"grid grid-cols-2 gap-4"},[a("text-input",{attrs:{rules:"required",label:"Name",placeholder:"Name",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("div",[a("input-label",{attrs:{text:"IoT Type"}}),a("t-rich-select",{attrs:{options:e.getIotTypeOptions,valueAttribute:"value",textAttribute:"text",placeholder:"--"},model:{value:e.form.iot_category,callback:function(t){e.$set(e.form,"iot_category",t)},expression:"form.iot_category"}})],1)],1),a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"pr-2 w-1/2"},[a("ValidationProvider",{attrs:{name:"Manufacturer",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("input-label",{attrs:{error:r[0],text:"Manufacturer *"}}),a("t-rich-select",{attrs:{options:e.manufacturers,valueAttribute:"id",textAttribute:"name",placeholder:"Select",variant:{danger:!!r[0],readonly:""!=e.sel_iot},disabled:""!=e.sel_iot},on:{change:e.changeValues},model:{value:e.form.manufacturer,callback:function(t){e.$set(e.form,"manufacturer",t)},expression:"form.manufacturer"}}),a("input-error-item",{attrs:{message:r[0]}})]}}],null,!0)})],1),a("div",{staticClass:"pl-2 w-1/2"},[a("text-input",{attrs:{rules:"required|min:15",label:"Device IMEI",placeholder:"e.g 867584039515528",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.lock_id,callback:function(t){e.$set(e.form,"lock_id",t)},expression:"form.lock_id"}})],1)]),a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"pr-2 w-1/2"},[a("text-input",{attrs:{rules:"",label:"SIM ICCID",placeholder:"e.g 8965011904070266453",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.iccid,callback:function(t){e.$set(e.form,"iccid",t)},expression:"form.iccid"}})],1),a("div",{staticClass:"pl-2 w-1/2"},[a("text-input",{attrs:{rules:"",label:"SIM Phone Number",placeholder:"e.g. 01757262760",input_type:"phone",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.sim_number,callback:function(t){e.$set(e.form,"sim_number",t)},expression:"form.sim_number"}})],1)]),a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"pr-2 w-1/2"},[a("text-input",{attrs:{rules:"",label:"Factory QR",placeholder:"e.g 100010001",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.factory_qr,callback:function(t){e.$set(e.form,"factory_qr",t)},expression:"form.factory_qr"}})],1),a("div",{staticClass:"pl-2 w-1/2"},[a("text-input",{attrs:{rules:"",label:"Firmware type",placeholder:"e.g ext2",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.firmware_type,callback:function(t){e.$set(e.form,"firmware_type",t)},expression:"form.firmware_type"}})],1)]),a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"pr-2 w-1/2"},[a("text-input",{attrs:{rules:"",label:"Firmware key",placeholder:"e.g yOTmK50z",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.firmware_key,callback:function(t){e.$set(e.form,"firmware_key",t)},expression:"form.firmware_key"}})],1),a("div",{staticClass:"pl-2 w-1/2"},[a("ValidationProvider",{attrs:{name:"Lock Condition",rules:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("input-label",{attrs:{error:r[0],text:"Lock condition"}}),a("t-rich-select",{class:""!=e.sel_iot?"disabled_class":"enabled_class",attrs:{options:e.conditions,valueAttribute:"value",textAttribute:"name",placeholder:"Select",disabled:""!=e.sel_iot},on:{change:e.changeValues},model:{value:e.form.is_operational,callback:function(t){e.$set(e.form,"is_operational",t)},expression:"form.is_operational"}}),a("input-error-item",{attrs:{message:r[0]}})]}}],null,!0)})],1)]),a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"pr-2 w-1/2"},[a("text-input",{attrs:{placeholder:"write",rules:"",type:"date",label:"Registration Date",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.start_date,callback:function(t){e.$set(e.form,"start_date",t)},expression:"form.start_date"}})],1),a("div",{staticClass:"pl-2 w-1/2"},[a("text-input",{attrs:{placeholder:"write",rules:"",label:"Operator APN",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.operator_apn,callback:function(t){e.$set(e.form,"operator_apn",t)},expression:"form.operator_apn"}})],1)]),a("div",[a("input-label",{attrs:{text:"Description "}}),a("t-textarea",{attrs:{rules:"required",disabled:""!=e.sel_iot},on:{input:e.changeValues},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("button",{ref:"stepOneSubmitButton",staticClass:"hidden",attrs:{type:"submit"}},[e._v(" Save ")])])]}}])})},k=[],S=a("9f07"),w=a.n(S),C=a("5f81"),$=a("e94b"),V=a("ed08"),I={name:"addSingleScooterStep1",components:{InputLabel:C["default"],TextInput:$["default"]},data:function(){return{isLoading:!1,form:{},fleets:[],manufacturers:[],iots:[],conditions:[{value:"false",name:"Not Operational"},{value:"true",name:"Operational"}],sel_iot:"",lock_id:""}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.sel_iot="",t.next=3,e.$http.get(c["a"].api.iot_manufacture).then((function(e){return e.data.data})).catch((function(e){return console.log("err = ",e)}));case 3:return e.manufacturers=t.sent,t.next=6,e.$http.get(c["a"].api.iot.unassigned).then((function(e){return e.data.data})).catch((function(e){return console.log("err = ",e)}));case 6:if(a=t.sent,r=[{id:"",name:"--"}],a.length>0){for(i=0;i<a.length;i++)r.push(a[i]);e.iots=r}else e.iots=[];e.isEditing&&(e.step1.id&&(console.log("----------s1--------",e.step1),e.iots.unshift(e.step1),e.sel_iot=e.step1.id,e.lock_id=e.step1.id,0==e.step1.is_operational?e.step1.is_operational="false":e.step1.is_operational="true"),e.form=e.step1);case 10:case"end":return t.stop()}}),t)})))()},mounted:function(){},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({getIotTypeOptions:V["j"]},Object(o["b"])("scooter",["isEditing","currenteditingScooterId"])),Object(o["c"])({step1:function(e){return e.scooter.step1}})),{},{getPasswordValidationRules:function(){return this.isEditing?"min:8":"required|min:8"}}),methods:{reloadData:function(){this.step1.id&&(this.sel_iot=this.step1.id,this.sel_iot==localStorage.getItem("editId")&&(this.sel_iot="")),0==this.step1.is_operational?this.step1.is_operational="false":this.step1.is_operational="true",this.form=this.step1},changeValues:function(){console.log("change")},submit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a,r,i){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("normal"==t){e.next=7;break}return e.next=3,this.$refs.observer.validate();case 3:s=e.sent,this.$emit("isValid",s,a,r,i),e.next=8;break;case 7:this.$refs.stepOneSubmitButton.click();case 8:case"end":return e.stop()}}),e,this)})));function t(t,a,r,i){return e.apply(this,arguments)}return t}(),changeIOT:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.sel_iot){t.next=4;break}e.isEditing?e.form={lock_id:e.step1.lock_id,name:e.step1.name,iot_category:e.step1.iot_category,manufacturer:e.step1.manufacturer?e.step1.manufacturer:"",iccid:e.step1.iccid,is_locked:e.step1.is_locked,qr_code:e.step1.qr_code?e.step1.qr_code:"",is_operational:"true"==e.step1.is_operational,sim_number:e.step1.sim_number?e.step1.sim_number:"",firmware_key:e.step1.firmware_key,firmware_type:e.step1.firmware_type?e.step1.firmware_type:"",factory_qr:e.step1.factory_qr?e.step1.factory_qr:"",start_date:e.step1.start_date?new Date(e.step1.start_date):"",operator_apn:e.step1.operator_apn?e.step1.operator_apn:"",description:e.step1.description?e.step1.description:""}:e.form={},t.next=6;break;case 4:return t.next=6,e.$http.get(c["a"].api.single_lock(e.sel_iot)).then((function(t){var a=t.data;e.form={lock_id:a.lock_id,name:a.name,iot_category:e.step1.iot_category,manufacturer:a.manufacturer?a.manufacturer:"",is_locked:a.is_locked,qr_code:a.qr_code?a.qr_code:"",is_operational:a.is_operational?a.is_operational:"false",iccid:a.iccid||"",sim_number:a.sim_number?a.sim_number:"",firmware_key:a.firmware_key,firmware_type:a.firmware_type?a.firmware_type:"",factory_qr:a.factory_qr?a.factory_qr:"",start_date:a.start_date?new Date(a.start_date):"",operator_apn:a.operator_apn?a.operator_apn:"",description:a.description?a.description:""}})).catch((function(e){return console.log("err = ",e)}));case 6:case"end":return t.stop()}}),t)})))()},submitStepOne:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLoading=!0,this.form.lock_id&&(this.form.qr_code=this.form.lock_id),""==this.sel_iot||this.sel_iot==localStorage.getItem("editId")){e.next=9;break}return this.form.id=this.sel_iot,this.isLoading=!1,l["a"].$emit(c["a"].events.succeededStep1,this.form),e.abrupt("return",!0);case 9:return t=this.isEditing?"PATCH":"POST",a="",""==this.sel_iot&&this.isEditing&&(a=localStorage.getItem("editId")),r=this.isEditing?c["a"].api.update_iot(a):c["a"].api.create_iot,"false"==this.form.is_operational?this.form.is_operational=!1:this.form.is_operational=!0,delete this.form.start_date,i=new w.a(this.form).toFormData(),s=this.isEditing?"IOT updated successfully":"IOT added successfully",e.prev=17,e.next=20,this.$http({method:t,url:r,data:i});case 20:return n=e.sent,this.isLoading=!1,console.log({res:n.data}),this.form={},this.$notify({group:"important",type:"success",title:"Success",text:s},5e3),console.log("response = ",n.data),l["a"].$emit(c["a"].events.succeededStep1,n.data),e.abrupt("return",!0);case 30:e.prev=30,e.t0=e["catch"](17),this.isLoading=!1,console.log({e1:e.t0.response.data});case 34:case"end":return e.stop()}}),e,this,[[17,30]])})));function t(){return e.apply(this,arguments)}return t}()}},O=I,A=(a("1407"),Object(g["a"])(O,y,k,!1,null,"1259b372",null)),E=A.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.handleSubmit;return[a("loading",{attrs:{active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}}),a("form",{staticClass:"px-6 pt-6",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),r(e.submitStepTwo)}}},[a("div",{staticClass:"w-full pb-4"}),a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"w-1/2 pr-2"},[a("text-input",{attrs:{rules:"required",label:"Vehicle Name",placeholder:"Write"},on:{input:e.changeValues},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("div",{staticClass:"w-1/2 pl-2"},[a("ValidationProvider",{attrs:{name:"Vehicle Type",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("input-label",{attrs:{error:r[0],text:"Vehicle Type *"}}),a("t-rich-select",{attrs:{options:e.bike_categories,valueAttribute:"value",textAttribute:"name",placeholder:"Select",variant:{danger:!!r[0]}},on:{change:e.changeValues},model:{value:e.form.bike_category,callback:function(t){e.$set(e.form,"bike_category",t)},expression:"form.bike_category"}}),a("input-error-item",{attrs:{message:r[0]}})]}}],null,!0)})],1)]),a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"w-1/2 pr-2"},[a("ValidationProvider",{attrs:{name:"Vehicle Manufacturer",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("input-label",{attrs:{error:r[0],text:"Vehicle Manufacturer *"}}),a("t-rich-select",{attrs:{options:e.manufacturers,valueAttribute:"id",textAttribute:"name",placeholder:"Select",variant:{danger:!!r[0]}},on:{change:e.changeValues},model:{value:e.form.manufacturer,callback:function(t){e.$set(e.form,"manufacturer",t)},expression:"form.manufacturer"}}),a("input-error-item",{attrs:{message:r[0]}})]}}],null,!0)})],1),a("div",{staticClass:"w-1/2 pl-2"},[a("text-input",{attrs:{rules:"required",label:"Vehicle QR Code",placeholder:"e.g. 1210010001"},on:{input:e.changeValues},model:{value:e.form.qr_code,callback:function(t){e.$set(e.form,"qr_code",t)},expression:"form.qr_code"}})],1)]),a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"w-1/2 pr-2"},[a("ValidationProvider",{attrs:{name:"Assign Fleet",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("input-label",{attrs:{error:r[0],text:"Assign Fleet *"}}),a("t-rich-select",{attrs:{options:e.fleets,valueAttribute:"id",textAttribute:"name",placeholder:"Select",variant:{danger:!!r[0]}},on:{change:e.changeValues},model:{value:e.form.fleet,callback:function(t){e.$set(e.form,"fleet",t)},expression:"form.fleet"}}),a("input-error-item",{attrs:{message:r[0]}})]}}],null,!0)})],1),a("div",{staticClass:"w-1/2 pl-2"},[a("text-input",{attrs:{rules:"",label:"Service Area *",placeholder:"--",disabled:"disabled"},on:{input:e.changeValues},model:{value:e.form.service_area,callback:function(t){e.$set(e.form,"service_area",t)},expression:"form.service_area"}})],1)]),a("div",[a("input-label",{attrs:{text:"Description "}}),a("t-textarea",{attrs:{rules:"required"},on:{input:e.changeValues},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("input-label",{staticClass:"pt-4",attrs:{text:"Vehicle Condition "}}),a("div",{staticClass:"flex items-center "},[a("div",{staticClass:"w-1/2"},[a("div",{staticClass:"flex condition-box"},[a("div",{staticClass:"items-center block m-auto ml-12"},[a("div",{staticClass:"block"},[a("span",{staticClass:"block condition-box-title"},[e._v("Available")]),a("span",{staticClass:"block mt-2 condition-box-sub-title"},[e._v("Operational ")])])]),a("div",{staticClass:"flex items-center m-auto"},[a("t-toggle",{attrs:{checked:e.form.is_operational}})],1)])]),a("div",{staticClass:"w-1/2"},[a("div",{staticClass:"flex iot-box"},[a("div",{staticClass:"items-center block m-auto ml-12"},[a("div",{staticClass:"block"},[a("span",{staticClass:"block condition-box-title"},[e._v("IOT Fault")]),a("span",{staticClass:"block mt-2 condition-box-sub-title"},[e._v("Service Status ")])])]),a("div",{staticClass:"flex items-center m-auto"},[a("t-toggle",{attrs:{checked:e.form.service_status}})],1)])])]),a("button",{ref:"stepTwoSubmitButton",staticClass:"hidden",attrs:{type:"submit"}},[e._v(" Save ")])],1)]}}])})},T=[],L={name:"addSingleScooterStep2",components:{InputLabel:C["default"],TextInput:$["default"]},data:function(){return{isLoading:!1,form:{},fleets:[],manufacturers:[],bike_categories:[{id:0,name:"Bike",value:"S"},{id:1,name:"Scooter",value:"P"},{id:2,name:"EBike",value:"E"}]}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.service_area="--",t.next=3,e.$http.get(c["a"].api.vehicle_manufacture).then((function(e){return e.data.data})).catch((function(e){return console.log("err = ",e)}));case 3:return e.manufacturers=t.sent,t.next=6,e.$http.get(c["a"].api.fleets).then((function(e){return e.data.data})).catch((function(e){return console.log("err = ",e)}));case 6:e.fleets=t.sent,e.isEditing&&(console.log("step2 = ",e.step2),e.form=e.step2);case 8:case"end":return t.stop()}}),t)})))()},mounted:function(){console.warn(this.step1.id)},computed:Object(n["a"])(Object(n["a"])({},Object(o["b"])("scooter",["isEditing","currentEditingScooterId"])),Object(o["c"])({step1:function(e){return e.scooter.step1},step2:function(e){return e.scooter.step2}})),methods:{reloadData:function(){this.form=this.step2},changeValues:function(){console.log("change")},submit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a,r,i){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("normal"==t||!this.isEditing){e.next=7;break}return e.next=3,this.$refs.observer.validate();case 3:s=e.sent,this.$emit("isValid",s,a,r,i),e.next=8;break;case 7:this.$refs.stepTwoSubmitButton.click();case 8:case"end":return e.stop()}}),e,this)})));function t(t,a,r,i){return e.apply(this,arguments)}return t}(),submitStepTwo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,t=this.isEditing?"PATCH":"POST",a=this.isEditing?c["a"].api.update_vehicle(this.step2.id):c["a"].api.create_vehicle,console.log("url = ",a,t),0==this.form.service_area||void 0==this.form.is_operational||null==this.form.is_operational?this.form.is_operational=!1:this.form.is_operational=!0,this.form.lock=this.step1.id,delete this.form.service_area,console.log("is_ = ",this.form),r=new w.a(this.form).toFormData(),i="Scooter added successfully",e.prev=10,e.next=13,this.$http({method:t,url:a,data:r});case 13:return s=e.sent,this.isLoading=!1,console.log({res:s.data}),this.form={},this.$notify({group:"important",type:"success",title:"Success",text:i},5e3),console.log("response = ",s.data),l["a"].$emit(c["a"].events.succeededStep2,s.data),e.abrupt("return",!0);case 23:e.prev=23,e.t0=e["catch"](10),this.isLoading=!1,console.log({e1:e.t0.response});case 27:case"end":return e.stop()}}),e,this,[[10,23]])})));function t(){return e.apply(this,arguments)}return t}()}},j=L,D=(a("ee40"),Object(g["a"])(j,q,T,!1,null,"4650d6b6",null)),N=D.exports,M={name:"AddSingleScooter",components:{SlideOverRight:d["default"],SlideOverLeftTrigger:b,AnchorButton:_["default"],Stepper:x["a"],AddSingleScooterStep1:E,AddSingleScooterStep2:N},props:{is_edit:{type:Boolean,default:!1}},data:function(){return{sorId:c["a"].events.sorId,isLoading:!1,stepStatusArr:[]}},computed:Object(n["a"])(Object(n["a"])({},Object(o["b"])("scooter",["isEditing","currenteditingScooterId"])),{},{currentStep:{get:function(){return this.$store.getters["scooter/currentStep"]},set:function(e){this.$store.dispatch("scooter/saveStep",{step:e})}},is_editing:function(){return this.isEditing},titleText:function(){return this.isEditing?"Edit Scooter":"Add Scooter"}}),watch:{},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l["a"].$on(c["a"].events.editingData,(function(t){if(e.$store.dispatch("scooter/saveStep",1),e.$store.dispatch("scooter/forgetEditingStep"),e.$store.dispatch("scooter/forgetAllStepsData"),e.$store.dispatch("scooter/forgetEditingScooterId"),console.log("item = ",t),Object.keys(t).length>1)e.populateScooterStore(t.id);else{for(var a=[],r=0;r<2;r++){var i={visited:!1,disabled:!0,index:r,value:r+1};a.push(i)}e.stepStatusArr=a;var s=e;setTimeout((function(){void 0!=s.$refs.stepper?s.$refs.stepper.changeStepsArr(a):console.log("undefined")}),500)}})),l["a"].$on(c["a"].events.succeededStep1,(function(t){console.log("success = ",t);var a={lock:t},r=e.getStepData(a,1);e.$store.dispatch("scooter/saveStepData",{step:1,data:r}),e.$store.dispatch("scooter/nextStep",{step:2}),e.$refs.stepper.nextWithBtn()})),l["a"].$on(c["a"].events.succeededStep2,(function(t){e.$store.dispatch("scooter/saveStepData",{step:2,data:t}),e.$store.dispatch("scooter/forgetStep"),e.$store.dispatch("scooter/forgetAllStepsData"),dispatchEvent(new Event(u["a"].events.refresh)),dispatchEvent(new Event(c["a"].events.sorClose))}));case 3:case"end":return t.stop()}}),t)})))()},methods:{getSteps:function(e,t){this.stepStatusArr=e,console.log("now = ",t)},showModal:function(){console.log("exit"),dispatchEvent(new Event(c["a"].events.sorToggle))},submitStep:function(e){this.$refs["step".concat(e)].submit("normal")},isValidFunc:function(e,t,a,r){this.isValid=e,(this.isValid||r)&&(this.$refs.stepper.enoughMove(t),this.isValid=!1)},checkErrors:function(e,t,a,r){r&&!a?this.$refs.stepper.enoughMove(t):this.$refs["step".concat(e+1)].submit("tabselect",t,a,r)},changeTabs:function(e){var t=this;setTimeout((function(){switch(e){case 1:t.$refs.step1&&t.$refs.step1.reloadData();break;case 2:t.$refs.step2&&t.$refs.step2.reloadData();break}}),1e3)},getStepData:function(e,t){var a=t-1,r={};switch(t){case 1:r={id:e.lock.id,lock_id:e.lock.lock_id,name:e.lock.name?e.lock.name:"",power_level:e.lock.power_level&&null!=e.lock.power_level?e.lock.power_level:"",is_locked:e.lock.is_locked&&null!=e.lock.is_locked?e.lock.is_locked:"",qr_code:e.lock.qr_code&&null!=e.lock.qr_code?e.lock.qr_code:"",is_operational:e.lock.is_operational&&null!=e.lock.is_operational?e.lock.is_operational:"",iccid:e.lock&&e.lock.iccid?e.lock.iccid:"",sim_number:e.lock.sim_number&&null!=e.lock.sim_number?e.lock.sim_number:"",firmware_key:e.lock.firmware_key&&null!=e.lock.firmware_key?e.lock.firmware_key:"",firmware_type:e.lock.firmware_type&&null!=e.lock.firmware_type?e.lock.firmware_type:"",factory_qr:e.lock.factory_qr&&null!=e.lock.factory_qr?e.lock.factory_qr:"",start_date:e.lock.start_date&&null!=e.lock.start_date?e.lock.start_date:"",operator_apn:null!=(e.lock.operator_apn&&e.lock.operator_apn)?e.lock.operator_apn:"",description:e.lock.description&&null!=e.lock.description?e.lock.description:"",manufacturer:e.manufacturer&&e.lock.manufacturer.id?e.lock.manufacturer.id:""},e.lock&&void 0!=e.lock?this.stepStatusArr[a]={index:a,value:a+1,visited:!0,disabled:!1}:this.stepStatusArr[a]={index:a,value:a+1,visited:!1,disabled:!0};break;case 2:var i=e.bike_category;console.warn("sepopu",e),r={id:e.id,bike_category:i,fleet:e.fleet.id,name:e.name,qr_code:e.qr_code,manufacturer:e.manufacturer?e.manufacturer.id:"",description:e.description,vehicle_conditions:!!e.vehicle_conditions&&e.vehicle_conditions,heart_beat:e.heart_beat},e.bike_category&&void 0!=e.bike_category?this.stepStatusArr[a]={index:a,value:a+1,visited:!0,disabled:!1}:this.stepStatusArr[a]={index:a,value:a+1,visited:!1,disabled:!0};break;default:break}return r},populateScooterStore:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.isLoading=!0,t.$http.get(c["a"].api.single_vehicle(e)).then((function(a){var r=t.getStepData(a.data,1),i=t.getStepData(a.data,2);console.warn("step12",t.stepStatusArr),console.warn("stepp",t.$refs.stepper),t.$refs.stepper&&t.$refs.stepper.changeStepsArr(t.stepStatusArr),localStorage.setItem("editId",r.id),localStorage.setItem("step1",JSON.stringify(r)),localStorage.setItem("step2",JSON.stringify(i)),t.$store.dispatch("scooter/saveEditingScooterId",{data:e}),t.$store.dispatch("scooter/saveEditingScooterId",{data:e}),t.$store.dispatch("scooter/saveEditingStep",{step:1}),t.$store.dispatch("scooter/saveStepData",{step:1,data:r}),t.$store.dispatch("scooter/saveStepData",{step:2,data:i})})).catch((function(e){console.log("popu-err",e)})),t.isLoading=!1;case 3:case"end":return a.stop()}}),a)})))()}}},B=M,P=(a("a0ab"),Object(g["a"])(B,r,i,!1,null,"3209ff59",null));t["default"]=P.exports},"2caa":function(e,t,a){},"2e59":function(e,t,a){},3853:function(e,t,a){"use strict";a("d380")},4645:function(e,t,a){},"5f81":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:"block w-full pb-1 font-semibold leading-normal text-gray-700 text-14px  ",class:{"text-gray-700":!!e.error,"text-red-600":!!e.error,"flex items-center":e.isShowInfoSymbol}},[e._t("default",(function(){return[e._v(e._s(e.text))]})),e.isShowInfoSymbol?r("img",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"<div class='w-40 p-1 text-xs'>"+e.info+"</div>",expression:"`<div class='w-40 p-1 text-xs'>${info}</div>`",modifiers:{top:!0}}],staticClass:"cursor-pointer ml-1 h-4 w-4",attrs:{src:a("b581")}}):e._e()],2)},i=[],s={name:"InputLabel",props:{text:{type:String},error:{type:String},isShowInfoSymbol:{type:Boolean,default:!1},info:{type:String,default:""}}},n=s,o=a("2877"),l=Object(o["a"])(n,r,i,!1,null,null,null);t["default"]=l.exports},"85c0":function(e,t,a){"use strict";a("4645")},a0ab:function(e,t,a){"use strict";a("e411")},d380:function(e,t,a){},da8c:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"v-stepper"},[a(e.rootComponent,{tag:"component",staticClass:"flex-wrap"},e._l(e.stepsArr,(function(t,r){return a("v-step",{key:r,attrs:{name:e.id,debug:e.debug,index:r,visited:t.visited,disabled:t.disabled,"with-divider":e.withDivider,active:t.index===e.toIndex(e.value)},on:{change:e.handleChange},scopedSlots:e._u([{key:"index",fn:function(t){return[e._t("step-"+t.displayIndex+"-index",(function(){return[e._v(" "+e._s(t.displayIndex)+" ")]}),null,t)]}},{key:"default",fn:function(t){return[e._t("step-"+t.displayIndex,null,null,t)]}}],null,!0)},[a("div",[e._v(e._s(r))])])})),1)],1)},i=[],s=(a("a9e3"),a("caad"),a("99af"),a("a630"),a("3ca3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["step custom-step",e.classes]},[a("input",{directives:[{name:"show",rawName:"v-show",value:e.debug,expression:"debug"}],staticClass:"input",attrs:{type:"radio",id:e.id,name:e.computedName},domProps:{checked:e.active},on:{change:e.handleChange}}),a("label",{staticClass:"label",attrs:{for:e.id}},[a("span",{staticClass:"index"},[e.active||e.disabled?e._t("index",(function(){return[e._v(" "+e._s(e.api.displayIndex)+" ")]}),null,e.api):e._t("default",(function(){return[a("i",{staticClass:"m-auto fas fa-check",staticStyle:{"font-size":"8px"}})]}))],2),e.defaultSlot?a("span",{staticClass:"title"},[e._t("default",null,null,e.api)],2):e._e(),e.withDivider?a("span",{staticClass:"divider"}):e._e()])])}),n=[],o=(a("b0c0"),{name:"VStep",props:{index:{type:Number,default:0},name:{type:String,default:""},active:{type:Boolean,default:!1},visited:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},withDivider:{type:Boolean,default:!1},debug:{type:Boolean,default:!0}},data:function(){return{namespace:"v-step"}},computed:{id:function(){return"".concat(this.namespace,"-").concat(this._uid,"-").concat(this.index)},displayIndex:function(){return this.index+1},classes:function(){return{"is-active":this.active,"is-visited":this.visited,"is-disabled":this.disabled}},computedName:function(){return this.name||this.id},defaultSlot:function(){return this.$slots.default||this.$scopedSlots.default},api:function(){var e=this.displayIndex,t=this.defaultSlot;return{displayIndex:e,defaultSlot:t}}},methods:{handleChange:function(){this.$emit("change",this.index)}},inheritAttrs:!1}),l=o,c=(a("3853"),a("2877")),u=Object(c["a"])(l,s,n,!1,null,"d2d48d72",null),d=u.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"v-stepper-root"},[e._t("default")],2)},f=[],h={name:"VStepperRoot"},m=h,g=(a("85c0"),Object(c["a"])(m,p,f,!1,null,"69da3474",null)),v=g.exports,b={name:"Stepper",components:{VStep:d},props:{value:{type:Number,default:1},steps:{required:!0},linear:{type:Boolean,default:!0},edit:{type:Boolean,default:!1},persist:{type:Boolean,default:!1},storekeeper:{type:String,default:"localStorage",validator:function(e){return["localStorage","sessionStorage"].includes(e)}},withDivider:{type:Boolean,default:!0},rootComponent:{type:Object,default:function(){return v}},debug:{type:Boolean,default:!1}},data:function(){return{namespace:"v-stepper",stepsArr:[],index:this.toIndex(this.value)}},watch:{value:function(e){this.index=this.toIndex(e),this.persist&&this.setStorage()},index:{handler:function(e){console.log("index = ",e)},immediate:!0}},created:function(){if(this.persist){var e=this.getStorage();e?(this.stepsArr=e.stepsArr,this.index=e.index):this.setStorage()}},destroyed:function(){window[this.storekeeper].removeItem(this.id)},computed:{id:function(){return"".concat(this.namespace,"-").concat(this._uid)},lastIndex:function(){return this.stepsArr.length-1}},methods:{changeStepsArr:function(e){this.stepsArr=e},toValue:function(e){return e+1},toIndex:function(e){return e-1},doesStepExist:function(e){return!!this.stepsArr[e]},isIntermediateIndex:function(e){return e>0&&e<this.lastIndex},enoughMove:function(e){this.index,this.index;var t=this.toIndex(this.value);this.linear?(this.setStep(e,"active",!0),this.setStep(t,"active",!1),this.$emit("input",this.toValue(e))):(this.setStep(t,"visited",!0),this.$emit("input",this.toValue(e)))},handleChange:function(e){var t=e===this.index+1,a=e===this.index-1,r=this.toIndex(this.value);this.$emit("errors",r,e,t,a)},getMap:function(){var e=this;return Array.from(this.steps,(function(t,a){var r=a-1,i=t.disabled,s=t.visited,n=e.toValue(a);return{index:r,value:n,visited:s,disabled:i}}))},offset:function(e){var t=this.index+e;this.doesStepExist(t)&&this.handleChange(t)},next:function(){this.offset(1)},nextWithBtn:function(){var e=this.index+1;if(this.doesStepExist(e)){this.index,this.index;var t=this.toIndex(this.value);this.linear?(this.setStep(e,"active",!0),this.setStep(e,"visited",!1),this.setStep(e,"disabled",!0),this.setStep(t,"active",!1),this.setStep(t,"visited",!0),this.setStep(t,"disabled",!1),this.$emit("getSteps",this.stepsArr,e)):(this.setStep(t,"visited",!0),this.$emit("input",this.toValue(e)))}},previous:function(){this.offset(-1)},reset:function(){this.stepsArr=this.getMap(),this.index=0,this.$emit("reset")},setStep:function(e,t,a){this.$set(this.stepsArr[e],t,a)},setStorage:function(){var e=this.index,t=this.stepsArr;window[this.storekeeper].setItem(this.id,JSON.stringify({index:e,stepsArr:t}))},getStorage:function(){return JSON.parse(window[this.storekeeper].getItem(this.id))}},inheritAttrs:!1},_=b,x=Object(c["a"])(_,r,i,!1,null,null,null);t["a"]=x.exports},df72:function(e,t,a){"use strict";a("2e59")},e0f1:function(e,t,a){},e411:function(e,t,a){},e94b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ValidationProvider",{staticClass:"relative w-full appearance-none",attrs:{tag:"div",vid:e.vid,rules:e.rules,name:e.name||e.label},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors,i=t.required,s=t.ariaInput,n=t.ariaMsg;return[a("label",{staticClass:"block w-full pb-1 font-semibold leading-normal text-14px",class:{"text-gray-700":!r[0],"text-red-600":r[0]||""!=e.phone_error},attrs:{for:e.name},on:{click:function(t){return e.$refs.input.focus()}}},[e.label?a("div",[a("span",[e._v(e._s(e.label))]),a("span",[e._v(e._s(i?" *":""))])]):e._e()]),"phone"==e.input_type?a("vue-tel-input",{ref:"telInput",class:{"border-gray-400 placeholder-gray-500 telinput":!r[0]||""==e.phone_error,"border-red-600 placeholder-red-400 custom-phone":r[0],"has-value telinput":e.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray telinput":e.disabled},attrs:{placeholder:e.placeholder,disabled:e.disabled},on:{input:e.onChangePhoneNumber},model:{value:e.innerValue,callback:function(t){e.innerValue=t},expression:"innerValue"}}):e._e(),a("div",{staticClass:"relative"},["textarea"==e.input_type?a("textarea",e._b({directives:[{name:"model",rawName:"v-model",value:e.innerValue,expression:"innerValue"}],ref:"input",staticClass:"block w-full h-20 px-4 py-1 leading-normal bg-white border border-gray-400 rounded outline-none focus:ring-0 focus:border-gray-700 focus:placeholder-gray-500",class:{"border-gray-400 placeholder-gray-500":!r[0],"border-red-600 placeholder-red-400":r[0],"has-value":e.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray":e.disabled},attrs:{placeholder:e.placeholder,disabled:e.disabled,step:e.step},domProps:{value:e.innerValue},on:{input:function(t){t.target.composing||(e.innerValue=t.target.value)}}},"textarea",s,!1)):e._e(),"checkbox"===e.type&&"phone"!=e.input_type&&"textarea"!=e.input_type?a("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.innerValue,expression:"innerValue"}],ref:"input",staticClass:"block w-full px-4 py-1.5 leading-normal bg-white border border-gray-400 rounded outline-none focus:ring-0 focus:border-gray-700 focus:placeholder-gray-500",class:{"border-gray-400 placeholder-gray-500":!r[0]||!e.errorMessage,"border-red-600 placeholder-red-400":r[0]||e.errorMessage,"has-value":e.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray":e.disabled},attrs:{placeholder:e.placeholder,disabled:e.disabled,step:e.step,min:e.min,type:"checkbox"},domProps:{checked:Array.isArray(e.innerValue)?e._i(e.innerValue,null)>-1:e.innerValue},on:{change:function(t){var a=e.innerValue,r=t.target,i=!!r.checked;if(Array.isArray(a)){var s=null,n=e._i(a,s);r.checked?n<0&&(e.innerValue=a.concat([s])):n>-1&&(e.innerValue=a.slice(0,n).concat(a.slice(n+1)))}else e.innerValue=i}}},"input",s,!1)):"radio"===e.type&&"phone"!=e.input_type&&"textarea"!=e.input_type?a("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.innerValue,expression:"innerValue"}],ref:"input",staticClass:"block w-full px-4 py-1.5 leading-normal bg-white border border-gray-400 rounded outline-none focus:ring-0 focus:border-gray-700 focus:placeholder-gray-500",class:{"border-gray-400 placeholder-gray-500":!r[0]||!e.errorMessage,"border-red-600 placeholder-red-400":r[0]||e.errorMessage,"has-value":e.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray":e.disabled},attrs:{placeholder:e.placeholder,disabled:e.disabled,step:e.step,min:e.min,type:"radio"},domProps:{checked:e._q(e.innerValue,null)},on:{change:function(t){e.innerValue=null}}},"input",s,!1)):"phone"!=e.input_type&&"textarea"!=e.input_type?a("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.innerValue,expression:"innerValue"}],ref:"input",staticClass:"block w-full px-4 py-1.5 leading-normal bg-white border border-gray-400 rounded outline-none focus:ring-0 focus:border-gray-700 focus:placeholder-gray-500",class:{"border-gray-400 placeholder-gray-500":!r[0]||!e.errorMessage,"border-red-600 placeholder-red-400":r[0]||e.errorMessage,"has-value":e.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray":e.disabled},attrs:{placeholder:e.placeholder,disabled:e.disabled,step:e.step,min:e.min,type:e.type},domProps:{value:e.innerValue},on:{input:function(t){t.target.composing||(e.innerValue=t.target.value)}}},"input",s,!1)):e._e(),"password"==e.input_type?a("div",{staticClass:"eye-body",on:{click:e.onChangeShowPassword}},[e.show_password?a("i",{staticClass:"far fa-eye"}):e._e(),e.show_password?e._e():a("i",{staticClass:"far fa-eye-slash"})]):e._e()]),""!==e.phone_error||""!=e.errorMessage||!r[0]&&e.showSubText?e._e():a("div",{staticClass:"flex items-center min-h-6"},[a("span",e._b({directives:[{name:"show",rawName:"v-show",value:r[0],expression:"errors[0]"}],staticClass:"block text-xs text-red-600 "},"span",n,!1),[e._v(e._s(r[0]))])]),""==e.errorMessage&&e.showSubText?a("div",{staticClass:"flex items-center min-h-6"},[a("span",{staticClass:"block text-xs text-gray-600 "},[e._v(e._s(e.subText))])]):e._e(),""!=e.phone_error?a("div",{staticClass:"flex items-center min-h-6"},[a("span",e._b({staticClass:"block text-xs text-red-600 "},"span",n,!1),[e._v(e._s(e.phone_error))])]):e._e(),""!=e.errorMessage?a("div",{staticClass:"flex items-center min-h-6"},[a("span",e._b({staticClass:"block text-xs text-red-600 "},"span",n,!1),[e._v(e._s(e.errorMessage))])]):e._e()]}}])})},i=[],s=(a("caad"),{name:"TextInput",components:{},props:{vid:{type:String,default:void 0},disabled:{type:Boolean,default:!1},name:{type:String,default:""},label:{type:String,default:""},input_type:{type:String,default:""},rules:{type:[Object,String],default:""},placeholder:{type:String,default:""},show_password:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(e){return["url","text","password","tel","search","number","email","date","textarea"].includes(e)}},step:{type:String,default:"1"},value:{type:null,default:""},errorMessage:{type:String,default:""},errorKey:{type:String,default:""},min:{type:String,default:""},subText:{type:String,default:""},showSubText:{type:Boolean,default:!1}},data:function(){return{innerValue:"",phone_error:""}},computed:{hasValue:function(){return!!this.innerValue}},methods:{onChangePhoneNumber:function(e,t){t.isValid?(this.innerValue=t.number.input,this.phone_error=""):this.phone_error="The phone number field must be a valid"},onChangeShowPassword:function(){this.$emit("showPassword",!this.show_password)}},watch:{innerValue:function(e){this.$emit("input",e),this.$emit("clear-error",this.errorKey)},value:function(e){e!==this.innerValue&&(this.innerValue=e)}},created:function(){null===this.value&&"undefined"===typeof this.value||(this.innerValue=this.value)}}),n=s,o=(a("df72"),a("2877")),l=Object(o["a"])(n,r,i,!1,null,"7b8ea01e",null);t["default"]=l.exports},ee40:function(e,t,a){"use strict";a("2caa")}}]);
//# sourceMappingURL=chunk-0bb8e9a4.f9842ab8.js.map