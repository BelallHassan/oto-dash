(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6de1d84b","chunk-531bf962","chunk-67db83f0","chunk-42b332c1","chunk-2d237d7f"],{"04ec":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"fade"}},[t.isOpen()?i("button",{staticClass:"fixed inset-0 w-full h-full opacity-50 cursor-default bg-oBlack",staticStyle:{"z-index":"1050"},attrs:{tabindex:"-1"},on:{click:function(e){return t.close()}}}):t._e()]),i("transition",{attrs:{name:"SOR","enter-active-class":"transition duration-300 ease-out transform","leave-active-class":"transition duration-300 ease-in transform","enter-class":"translate-x-full","enter-to-class":"translate-x-0","leave-class":"translate-x-0","leave-to-class":"translate-x-full"}},[t.isOpen()?i("div",{staticClass:"fixed bottom-0 right-0 h-full  bg-white border-l-2 border-gray-400 border-opacity-50 shadow-lg container-sor",class:t.getSize},[i("header",{class:{"mt-5 px-4 mb-6":this.$slots.header}},[t._t("header")],2),i("div",{staticClass:"pb-4 overflow-x-hidden overflow-y-auto sb-farhan",style:"max-height:"+t.getDefaultSlotHeight},[t._t("default",(function(){return[t._v("Body slot (default)")]}))],2),this.$slots.footer?i("div",{staticClass:"w-full"},[i("footer",{staticClass:"w-full h-auto px-6 pt-2 pb-5"},[t._t("footer",(function(){return[t._v("Footer Slot")]}))],2)]):t._e()]):t._e()])],1)},s=[],n={name:"SlideOverRight",props:{id:{required:!0,type:String},fullWidth:{required:!1,type:Boolean,default:!1},editType:{required:!1,type:String,default:""}},data:function(){return{openingEvent:"sor-open-".concat(this.id),closingEvent:"sor-close-".concat(this.id),togglingEvent:"sor-toggle-".concat(this.id),show:!1}},computed:{getSize:function(){return"scooter"==this.editType?this.fullWidth?"w-full px-4":"2xl:w-96 sm:w-5/5 md:w-4/6 px-4":"promotion"==this.editType||"pass"==this.editType?this.fullWidth?"w-full px-4":"w-2/4 md-max:w-full lg-max:w-1/2 2xl:w-2/5 px-4":"roles"==this.editType?this.fullWidth?"w-full px-4":"2xl:w-2/4 sm:w-5/5 md:w-4/6 px-4":"marketplace"==this.editType||"whats-new"==this.editType?this.fullWidth?"w-full px-4":"w-2/4 md-max:w-full lg-max:w-1/2 2xl:w-2/5 px-4":"bulk-update"==this.editType?this.fullWidth?"w-full":"w-3/4 md-max:w-full lg-max:w-1/2 2xl:w-2/5 px-0 my-0":"vehicle-inspection"==this.editType?this.fullWidth?"w-full px-4":"w-2/5 md-max:w-full lg-max:w-1/2 2xl:w-2/5 px-4":"swap-battery-workflow"==this.editType?this.fullWidth?"w-full px-4":"w-2/4 md-max:w-full lg-max:w-1/2 xl:w-1/3 2xl:w-3/12 px-4":"charging-dock-port"==this.editType?this.fullWidth?"w-full px-4":"w-3/4 md-max:w-full lg-max:w-4/5 2 px-4":"standard"==this.editType?this.fullWidth?"w-full px-4":"w-2/4 md-max:w-full lg-max:w-1/2 2xl:w-2/5 px-4":this.fullWidth?"w-full px-4":"w-2/4 2xl:w-2/6 xl:w-3/6 lg:w-3/6 md:w-3/6 sm:w-5/5 px-4"},getDefaultSlotHeight:function(){return"100%"}},mounted:function(){this.handleEvents()},watch:{show:function(t){!0===t?(document.body.style.overflow="hidden",document.body.style.marginRight="11px"):setTimeout((function(){document.body.style.overflow="auto",document.body.style.marginRight=""}),350)}},methods:{open:function(){this.show=!0},close:function(){"roles"==this.editType||"standard"==this.editType||"swap-battery-workflow"==this.editType?this.show=!1:this.$emit("showModal"),document.body.style.overflow="auto"},toggle:function(){this.show=!this.show},isOpen:function(){return!0===this.show},handleEvents:function(){var t=this;window.addEventListener(this.openingEvent,(function(){t.open()})),window.addEventListener(this.closingEvent,(function(){t.close()})),window.addEventListener(this.togglingEvent,(function(){t.toggle()}))}}},r=n,o=(i("535d"),i("2877")),l=Object(o["a"])(r,a,s,!1,null,"0f57a77e",null);e["default"]=l.exports},1220:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PauseHistoryModal",{attrs:{tripDetail:t.tripDetail}}),a("PricingPlanHistoryModal",{attrs:{tripDetail:t.tripDetail},on:{showPricingPlan:function(e){return t.showPricingPlan(e)}}}),a("add-edit-billing-plan",{attrs:{vehicleTypes:t.getVehicleTypes}}),a("section",{staticClass:"\n      w-full\n      px-4\n      py-3\n      mb-2\n      bg-white\n      rounded-md\n      shadow\n      responsive-header-section\n    "},[a("div",{staticClass:"flex flex-wrap items-center w-full h-full"},[a("div",{staticClass:"items-center left-trip"},[a("div",{staticClass:"items-center place-content-center back-arrow",on:{click:t.goBack}},[a("i",{staticClass:"fas fa-arrow-left"})]),a("span",[t._v(t._s(t.$t("components.tripManagement.details.headline.title",{tripId:""+t.$truncate(t.tripDetail.id,-5)})))]),t.tripDetail.child_trips.length>0?a("span",{staticClass:"group-trip-badge"},[t._v(t._s(t.$t("components.tripManagement.details.headline.groupTrip")))]):t._e(),a("span",{ref:"myDiv",attrs:{id:"myDiv"}}),t.tripDetail.pause_time_secs_till_now>0?a("div",{staticClass:"flex items-center"},[t._m(0),a("div",[a("div",{staticClass:"flex items-center"},[a("h4",{staticClass:"font-bold text-oDark text-14px duration-text  mb-1",class:t.tripDetail.is_paused?"text-oGreen":"text-oDark"},[t._v(" "+t._s(t.getDuration(t.tripDetail.pause_time_secs_till_now))+" ")]),a("img",{staticClass:"cursor-pointer",attrs:{src:i("b581")},on:{click:function(e){return t.onPauseHistoryModalReq()}}})]),a("h2",{staticClass:"text-gray-500 text-14px "},[t._v(" "+t._s(t.$t("components.tripManagement.details.headline.tripPaused"))+" ")])])]):t._e()]),a("div",{staticClass:"block lg:flex right-trip lg:items-center gap-2"},[a("div",[a("button",{staticClass:"\n              flex\n              items-center\n              justify-between\n              px-4\n              py-0\n              font-medium\n              border\n              rounded-full\n              shadow-sm\n              text-14px text-oCharcoal\n              focus:border-oCharcoal\n              hover:border-oCharcoal\n              focus:outline-none\n            ",staticStyle:{height:"35px"},on:{click:function(e){return t.$emit("download-invoice")}}},[a("div",{staticClass:"flex items-center"},[a("svg",{staticClass:"w-6 h-4",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"}})]),a("span",{staticClass:"text-gray-700"},[t._v(" "+t._s(t.$t("components.tripManagement.details.headline.downloadInvoice"))+" ")])])])]),a("div",[["C"===t.tripDetail.status||!0===t.tripDetail.status_forced?[a("TripCompletedBlock",{attrs:{"status-forced":t.tripDetail.status_forced,"status-forced-by-system":t.tripDetail.status_forced_by_system,"refund-status":t.isRefunded,"penalized-status":t.isPenalized},on:{refund:function(e){return t.$emit("refund")},"penalize-policy":function(e){return t.$emit("penalize-policy")}}})]:"O"===t.tripDetail.status?[a("OnTripBlock",{attrs:{tripId:t.tripDetail.id},on:{"force-completed":function(e){return t.$emit("force-completed")}}})]:[a("TripStatusPillButton",{attrs:{status:t.tripDetail.status}})]]],2)])])]),a("section",{staticClass:"\n      flex flex-col\n      items-start\n      justify-start\n      w-full\n      px-4\n      py-3\n      mb-2\n      space-y-5\n      bg-white\n      rounded-md\n      shadow\n      md:space-y-0 md:items-center md:flex-row md:justify-between\n      responsive-header-section\n    "},[a("div",{staticClass:"flex items-center w-full space-x-3 md:w-1/3 "},[a("DisplayAvatar",{attrs:{avatar:t.tripDetail.user.profile_pic,width:"68px",height:"68px"}}),a("div",[t.tripDetail.user?a("router-link",{staticClass:"cursor-pointer",attrs:{to:{name:"ViewRiderUserProfile",params:{id:t.tripDetail.user.id}},target:"_blank"}},[a("span",{staticClass:"font-bold text-oDark text-14px"},[t._v(" "+t._s(t.tripDetail.user.full_name||"--")+" ")]),a("span",{staticClass:"rider-type-badge"},[t._v(t._s(t.$t("components.tripManagement.details.secondHeadline.owner")))])]):t._e(),a("div",{staticClass:"flex items-center mt-1 text-gray-500 text-14px mt-2"},[a("i",{staticClass:"mr-2 text-lg fas fa-phone fa-flip-horizontal"}),a("span",[t._v(t._s(t.tripDetail.user.phone_number||"--"))])])],1)],1),a("div",{staticClass:"\n        grid\n        w-full\n        grid-cols-2\n        gap-y-3\n        md:w-2/3 md:grid-cols-4 md:gap-y-0\n      "},[a("div",{},[a("h2",{staticClass:"font-bold text-gray-500 text-14px mb-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.secondHeadline.tripID"))+" ")]),a("h4",{staticClass:"font-bold text-oDark text-14px"},[t._v(" "+t._s(t.$truncate(t.tripDetail.id,-5,"#")||"--")+" ")])]),a("div",{},[a("h2",{staticClass:"font-bold text-gray-500 text-14px mb-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.secondHeadline.duration"))+" ")]),a("div",{staticClass:"flex items-center"},[a("h4",{staticClass:"font-bold text-oDark text-14px duration-text mr-5",class:"O"===t.tripDetail.status?"text-oGreen":"text-oDark"},[t._v(" "+t._s(t.getDuration(t.tripDetail.riding_time))+" ")])])]),a("div",{},[a("h2",{staticClass:"font-bold text-gray-500 text-14px mb-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.secondHeadline.battery"))+" ")]),a("div",{staticClass:"flex items-center"},[a("h4",{staticClass:"font-bold text-oDark text-14px duration-text mr-5"},[t._v(" "+t._s(t.getBatteryLine(t.tripDetail))+" ")]),a("div",{staticClass:"flex items-center"},[a("battery-status",{attrs:{level:t.getEndBatteryLevel(t.tripDetail),height:"15px",width:"30px",textClass:"hidden"}})],1)])]),a("div",[a("h2",{staticClass:"font-bold text-gray-500 text-14px mb-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.secondHeadline.vehicleQR"))+" ")]),a("div",{staticClass:"flex items-center"},[t.tripDetail.bike?a("router-link",{attrs:{to:{name:"ViewVehicleProfile",params:{id:t.tripDetail.bike.id}},target:"_blank"}},[a("h4",{staticClass:"font-bold text-oLink text-14px"},[t._v(" "+t._s(t.tripDetail.bike.qr_code||"--")+" ")])]):a("h4",{staticClass:"text-blue-500 text-14px"},[t._v("--")]),a("trip-duration-dropdown",{staticClass:"ml-3",attrs:{isGuestTrip:!1,tripId:t.tripDetail.id,onRide:t.getIsOnRideStatus(t.tripDetail.status),lockedStatus:t.tripDetail.is_vehicle_locked},on:{forceCompleted:function(e){return t.$emit("force-completed")}}})],1)])])]),t._l(t.tripDetail.child_trips,(function(e,i){return a("section",{key:i,staticClass:"\n      flex flex-col\n      items-start\n      justify-start\n      w-full\n      px-4\n      py-3\n      mb-2\n      space-y-5\n      bg-white\n      rounded-md\n      shadow\n      md:space-y-0 md:items-center md:flex-row md:justify-between\n      responsive-header-section\n    "},[a("div",{staticClass:"flex items-center w-full space-x-3 md:w-1/3"},[a("DisplayAvatar",{attrs:{avatar:e.user.profile_pic,width:"68px",height:"68px"}}),a("div",[e.user?a("router-link",{staticClass:"cursor-pointer",attrs:{to:{name:"ViewRiderUserProfile",params:{id:e.user.id}},target:"_blank"}},[a("span",{staticClass:"font-bold text-oDark text-14px"},[t._v(" "+t._s(e.user.full_name||"--")+" ")]),a("span",{staticClass:"rider-type-badge"},[t._v(t._s(t.$t("components.tripManagement.details.secondHeadline.guest")))])]):t._e(),a("div",{staticClass:"flex items-center mt-1 text-gray-500 text-14px mt-2"},[a("i",{staticClass:"mr-2 text-lg fas fa-phone fa-flip-horizontal"}),a("span",[t._v(t._s(e.user.phone_number||"--"))])])],1)],1),a("div",{staticClass:"\n        grid\n        w-full\n        grid-cols-2\n        gap-y-3\n        md:w-2/3 md:grid-cols-4 md:gap-y-0\n      "},[a("div",{},[a("h2",{staticClass:"font-bold text-gray-500 text-14px mb-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.secondHeadline.tripID"))+" ")]),a("h4",{staticClass:"font-bold text-oDark text-14px"},[t._v(" "+t._s(t.$truncate(e.id,-5,"#")||"--")+" ")])]),a("div",{},[a("h2",{staticClass:"font-bold text-gray-500 text-14px mb-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.secondHeadline.duration"))+" ")]),a("div",{staticClass:"flex items-center"},[a("h4",{staticClass:"font-bold text-oDark text-14px duration-text mr-5",class:"O"===e.status?"text-oGreen":"text-oDark"},[t._v(" "+t._s(t.getDuration(e.riding_time))+" ")])])]),a("div",{},[a("h2",{staticClass:"font-bold text-gray-500 text-14px mb-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.secondHeadline.battery"))+" ")]),a("div",{staticClass:"flex items-center"},[a("h4",{staticClass:"font-bold text-oDark text-14px duration-text mr-5"},[t._v(" "+t._s(t.getBatteryLine(e))+" ")]),a("div",{staticClass:"flex items-center"},[a("battery-status",{attrs:{level:t.getEndBatteryLevel(e),height:"15px",width:"30px",textClass:"hidden"}})],1)])]),a("div",[a("h2",{staticClass:"font-bold text-gray-500 text-14px mb-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.secondHeadline.vehicleQR"))+" ")]),a("div",{staticClass:"flex items-center"},[e.bike?a("router-link",{attrs:{to:{name:"ViewVehicleProfile",params:{id:e.bike.id}},target:"_blank"}},[a("h4",{staticClass:"font-bold text-oLink text-14px"},[t._v(" "+t._s(e.bike.qr_code||"--")+" ")])]):a("h4",{staticClass:"text-blue-500 text-14px"},[t._v("--")]),a("trip-duration-dropdown",{staticClass:"ml-3",attrs:{isGuestTrip:!0,tripId:e.id,onRide:t.getIsOnRideStatus(e.status),lockedStatus:e.is_vehicle_locked},on:{forceCompleted:function(e){return t.$emit("force-completed")}}})],1)])])])})),a("div",{staticClass:"grid w-full grid-cols-1 md:grid-cols-5"},[a("div",{staticClass:"col-span-1 flex flex-col md:col-span-3"},[t.renderOnTripStatus?a("trip-google-map-view",{ref:"tripGmapView",attrs:{detail:t.tripDetail,onTripStatusText:t.onTripStatusText,onTripStatusVariant:t.onTripStatusVariant,id:"tripGmapView"}}):t._e()],1),a("div",{staticClass:"col-span-1 md:col-span-2 "},[a("trip-cost-view",{key:"trip_cost-"+t.tripDetail.riding_time,attrs:{detail:t.tripDetail,symbol:t.symbol}})],1)]),a("div",{staticClass:"grid w-full grid-cols-1 md:grid-cols-5"},[a("div",{staticClass:"col-span-1 md:col-span-3"},[a("ReportBlock",{attrs:{detail:t.tripDetail}})],1),a("div",{staticClass:"col-span-1 md:col-span-2 flex flex-col"},[a("trip-point-view",{attrs:{detail:t.tripDetail}})],1)]),a("div",{staticClass:"grid w-full grid-cols-1 md:grid-cols-5"},[a("div",{staticClass:"col-span-1 md:col-span-3"},[a("TripNoteView",{attrs:{id:t.tripDetail.id}})],1),a("div",{staticClass:"col-span-1 md:col-span-2"},[a("TripTagView",{attrs:{id:t.tripDetail.id}}),a("div",{staticClass:"py-3 px-8 mb-2 mr-3 bg-white rounded-md shadow w-full"},[t.getFlags(t.tripDetail).length>0?a("div",[a("div",{staticClass:"flex items-center"},[a("img",{staticClass:"w-5 h-5",attrs:{src:i("a2e6")}}),a("p",{staticClass:"text-lg font-extrabold ml-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.flags.flags"))+" ")])]),a("div",{staticClass:"flex flex-wrap items-center mt-4"},[t._l(t.getFlags(t.tripDetail),(function(e,i){return[a("trip-flag-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:t.getFlagAlias(e,t.tripDetail),expression:"getFlagAlias(flag, tripDetail)",modifiers:{bottom:!0}}],key:"trip-flag-"+i,staticClass:"mr-1",attrs:{size:"lg",name:e}})]}))],2)]):a("div",[t._v(" "+t._s(t.$t("components.tripManagement.details.flags.noFlags"))+" ")])])],1)]),a("TripTimeline",{attrs:{tripDetail:t.tripDetail}})],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mr-2"},[a("img",{attrs:{src:i("1524")}})])}],n=i("1da1"),r=i("5530"),o=(i("96cf"),i("d3b7"),i("3ca3"),i("ddb0"),i("159b"),i("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"mb-2 mr-3 bg-white rounded-md shadow flex flex-col flex-grow "},[t.riderTabs.length>0?a("tabs",{attrs:{items:t.riderTabs},on:{tabChange:t.onTabChange}}):t._e(),a("div",{staticClass:"flex w-full pl-3 trip-detail md-max:pl-0 md-max:block"},[a("div",{staticClass:"block w-3/5 px-10 pt-10 pb-0 md-max:px-8 md-max:w-full md-max:h-48 trip-map"},[a("div",{staticClass:"flex pt-2 md-max:pt-6"},[a("start-place-icon"),t.activeTrip?a("div",{staticClass:"grid items-center ml-2"},[a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"flex items-center"},[a("span",{staticClass:"mr-2 time"},[t._v(t._s(t.start_date))]),t.activeTrip.drop_off_location||"O"!==t.activeTrip.status?t._e():[a("x-status",{ref:"onTripStatusCompn",attrs:{text:t.onTripStatusText,variant:t.onTripStatusVariant,profile:"trip"}})],t.activeTrip.drop_off_location||"R"!==t.activeTrip.status?t._e():[a("x-status",{attrs:{text:t.$t("components.tripManagement.details.map.reserved"),variant:"blue",profile:"trip"}})]],2),t.canceled?a("div",{staticClass:"canceled-body"},[a("span",[t._v(t._s(t.$t("components.tripManagement.details.map.cancelled")))])]):t._e()]),a("span",{staticClass:"mt-2 location"},[t._v(t._s(t.activeTrip.pick_up_location))])]):t._e()],1),t._m(0),a("div",{staticClass:"flex items-center pt-2"},[a("end-place-icon"),t.activeTrip?a("div",{staticClass:"grid items-center ml-2"},[a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"flex items-center"},[a("span",{staticClass:"mr-2 time"},[t._v(t._s(t.end_date))]),"A"===t.activeTrip.status?[a("x-status",{attrs:{text:t.$t("components.tripManagement.details.map.cancelled"),variant:"red",profile:"trip"}})]:t._e()],2),t.canceled?a("div",{staticClass:"canceled-body"},[a("span",[t._v(t._s(t.$t("components.tripManagement.details.map.cancelled")))])]):t._e()]),a("span",{staticClass:"mt-2 location"},[t._v(t._s(t.activeTrip.drop_off_location))])]):t._e()],1)]),a("div",{staticClass:"grid w-2/5 grid-cols-2 md-max:w-full md-max:h-48"},[t._l(t.categories,(function(e,i){return[a("div",{key:i,staticClass:"items-center grid-item place-content-center ",class:t.getCategoryClass(e.title)},[a("trip-muti-icon",{attrs:{item:e}})],1)]}))],2)]),t.activeTrip?t._e():a("div",{staticClass:"w-full flex-grow"},[t._v(" Â  ")]),t.activeTrip?a("div",{staticClass:"w-full flex-grow relative"},[a("gmap-map",{ref:"map",staticStyle:{width:"100%",height:"100%"},attrs:{zoom:t.zoom,center:t.center,"map-type-id":"terrain"},on:{click:t.onTabMap}},[a("gmap-marker",{attrs:{position:t.getLatLng(t.activeTrip.src_coord),icon:{url:i("4b69"),scaledSize:{width:63,height:73}}}}),t.activeTrip.drop_off_location||"O"!==t.activeTrip.status?t._e():a("gmap-marker",{attrs:{position:t.getLatLng(t.activeTrip.bike.current_loc_coord),icon:{url:i("8243"),scaledSize:{width:40,height:40}}}}),t.getTripPath(t.activeTrip).length?a("div",t._l(t.getTripPath(t.activeTrip),(function(e){return a("gmap-marker",{key:e.created_at,attrs:{position:t.getLatLng(e.location),icon:{url:i("0e4c"),scaledSize:{width:30,height:30}}}})})),1):t._e(),t.activeTrip.dest_coord?a("gmap-marker",{attrs:{position:t.getLatLng(t.activeTrip.dest_coord),icon:{url:i("4f73"),scaledSize:{width:63,height:73}}}}):t._e(),t.getParkingAreas.length>0&&t.parkingMarkerOpen?t._l(t.getParkingAreas,(function(e,s){return a("gmap-marker",{key:s,attrs:{position:t.getLatLng(e.center_coords),icon:{url:i("d6cb"),scaledSize:{width:45,height:55}}},on:{click:function(i){return t.toggleMarker(e,-1,"P")}}})})):t._e(),t.getRestrictedAreas.length>0&&t.restrictedMarkerOpen?t._l(t.getRestrictedAreas,(function(e,s){return a("gmap-marker",{key:s,attrs:{position:t.getLatLng(e.center_coords),icon:{url:i("2876"),scaledSize:{width:45,height:55}}},on:{click:function(i){return t.toggleMarker(e,-1,"R")}}})})):t._e(),t.getSlowSpeedAreas.length>0&&t.slowSpeedMarkerOpen?t._l(t.getSlowSpeedAreas,(function(e,s){return a("gmap-marker",{key:s,attrs:{position:t.getLatLng(e.center_coords),icon:{url:i("bee8"),scaledSize:{width:45,height:45}}},on:{click:function(i){return t.toggleMarker(e,-1,"S")}}})})):t._e(),t.getRewardZones.length>0&&t.rewardZoneMarkerOpen?t._l(t.getRewardZones,(function(e,s){return a("gmap-marker",{key:s,attrs:{position:t.getLatLng(e.center_coords),icon:{url:i("c17a"),scaledSize:{width:45,height:45}}},on:{click:function(i){return t.toggleMarker(e,-1,"RZ")}}})})):t._e(),a("gmap-info-window",{attrs:{options:t.infoOptions,position:t.infoWindowPos,opened:t.infoWinOpen},on:{closeclick:function(e){t.infoWinOpen=!1}}},[a("div",{domProps:{innerHTML:t._s(t.infoContent)}})])],2),"O"===t.activeTrip.status?a("div",{staticClass:"live-tracking"},[a("div",{staticClass:"live-tracking-body"},[a("span",[t._v(t._s(t.$t("components.tripManagement.details.map.liveTracking")))]),a("TToggle",{attrs:{variant:"success"},on:{change:t.onChangeLiveTracking},model:{value:t.activeTrip.should_send_live_position_data,callback:function(e){t.$set(t.activeTrip,"should_send_live_position_data",e)},expression:"activeTrip.should_send_live_position_data"}})],1)]):t._e(),t.getMarkerControlCounter>0?a("div",{staticClass:"area-info"},[a("div",{staticClass:"flex flex-wrap items-center justify-between px-4 area-body"},[t.getParkingAreas.length>0?a("button",{staticClass:"flex items-center justify-between mx-1",on:{click:function(e){t.parkingMarkerOpen=!t.parkingMarkerOpen}}},[a("img",{staticClass:"mr-2",attrs:{src:i("d6cb"),width:"20px"}}),t._v(" "+t._s(t.parkingMarkerOpen?this.$t("components.tripManagement.details.map.hide"):this.$t("components.tripManagement.details.map.show"))+" ")]):t._e(),t.getRestrictedAreas.length>0?a("button",{staticClass:"flex items-center justify-between mx-1",on:{click:function(e){t.restrictedMarkerOpen=!t.restrictedMarkerOpen}}},[a("img",{staticClass:"mr-2",attrs:{src:i("2876"),width:"20px"}}),t._v(" "+t._s(t.restrictedMarkerOpen?this.$t("components.tripManagement.details.map.hide"):this.$t("components.tripManagement.details.map.show"))+" ")]):t._e(),t.getSlowSpeedAreas.length>0?a("button",{staticClass:"flex items-center justify-between mx-1",on:{click:function(e){t.slowSpeedMarkerOpen=!t.slowSpeedMarkerOpen}}},[a("img",{staticClass:"mr-2",attrs:{src:i("bee8"),width:"20px"}}),t._v(" "+t._s(t.slowSpeedMarkerOpen?this.$t("components.tripManagement.details.map.hide"):this.$t("components.tripManagement.details.map.show"))+" ")]):t._e(),t.getRewardZones.length>0?a("button",{staticClass:"flex items-center justify-between mx-1",on:{click:function(e){t.rewardZoneMarkerOpen=!t.rewardZoneMarkerOpen}}},[a("img",{staticClass:"mr-2",attrs:{src:i("c17a"),width:"20px"}}),t._v(" "+t._s(t.rewardZoneMarkerOpen?this.$t("components.tripManagement.details.map.hide"):this.$t("components.tripManagement.details.map.show"))+" ")]):t._e()])]):t._e()],1):t._e()],1)}),l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"relative arrow"},[i("i",{staticClass:"fas fa-caret-down"})])}],c=i("b85c"),d=(i("ac1f"),i("1276"),i("b680"),i("b0c0"),i("d81d"),i("5b81"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("img",{attrs:{src:i("4b69"),width:"38"}})])}],p=i("2877"),m={},_=Object(p["a"])(m,d,u,!1,null,null,null),g=_.exports,f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("img",{attrs:{src:i("4f73"),width:"38"}})])}],v={},b=Object(p["a"])(v,f,h,!1,null,null,null),x=b.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex items-center"},["co2"===t.item.id?a("img",{staticClass:"w-7 h-7",attrs:{src:i("f4a07"),alt:"co2"}}):a("i",{class:t.item.icon_class,style:"color:"+t.item.color}),a("div",{staticClass:"ml-4"},[a("span",{staticClass:"block grid-text"},[t._v(t._s(t.item.title))]),"co2"===t.item.id?a("span",{staticClass:"block grid-sub-text"},[t._v(" CO"),a("sub",[t._v("2")]),t._v(" "+t._s(this.$t("components.tripManagement.details.map.saved"))+" ")]):a("span",{staticClass:"block grid-sub-text",style:"max-width : "+t.width+"px;"},[t._v(t._s(t.item.subTitle))])])])},C=[],w={props:{item:{required:!1},width:{required:!1}}},k=w,T=Object(p["a"])(k,y,C,!1,null,null,null),S=T.exports,A=i("755e"),D=i("229c"),P=i("1f24"),F=i("d04d"),M=i.n(F),$=i("d899"),O=i("ca65"),I=i("6f24");function E(t){return""===t||null==t?{lat:0,lng:0}:{lat:parseFloat(t.split(",")[0]),lng:parseFloat(t.split(",")[1])}}var L={components:{StartPlaceIcon:g,EndPlaceIcon:x,TripMutiIcon:S,XStatus:D["default"],Tabs:P["a"]},props:{detail:{required:!1,default:null},onTripStatusText:{required:!0},onTripStatusVariant:{required:!0}},computed:{google:A["gmapApi"],lastTripStatus:function(){return this.$store.getters["lastTrip/getStatus"]},getParkingAreas:function(){var t;return null===(t=this.detail)||void 0===t?void 0:t.parking_areas_in_geofence},getRestrictedAreas:function(){var t;return null===(t=this.detail)||void 0===t?void 0:t.restricted_areas_in_geofence},getSlowSpeedAreas:function(){var t;return null===(t=this.detail)||void 0===t?void 0:t.slowzone_areas_in_geofence},getRewardZones:function(){var t;return null===(t=this.detail)||void 0===t?void 0:t.reward_zones_in_geofence},getMarkerControlCounter:function(){var t=0;return this.getParkingAreas.length>0&&t++,this.getRestrictedAreas.length>0&&t++,this.getSlowSpeedAreas.length>0&&t++,this.getRewardZones.length>0&&t++,console.log("getMarkerControlCounter",t),t}},beforeDestroy:function(){this.removeListener()},mounted:function(){var t=this;if(this.activeTrip=this.detail,this.$nextTick((function(){t.initDraw()})),this.detail&&this.detail.child_trips&&this.detail.child_trips.length){this.riderTabs.push({id:0,title:this.$t("components.tripManagement.details.secondHeadline.owner"),isActive:!0});for(var e=0;e<this.detail.child_trips.length;++e)this.riderTabs.push({id:e+1,title:"".concat(this.$t("components.tripManagement.details.secondHeadline.guest")," ").concat(e+1),isActive:!1})}this.start_date=this.detail.pick_up_time?Object(O["c"])(this.detail.pick_up_time,"D MMM h:m:ss a"):"--",this.end_date=this.detail.drop_off_time?Object(O["c"])(this.detail.drop_off_time,"D MMM h:m:ss a"):"--",this.categories.forEach((function(e){if(console.log("categ = ",e),"bike"==e.id)e.title=t.detail.bike?"S"==t.detail.bike.bike_category?"Bike":"P"==t.detail.bike.bike_category?"Scooter":"E"==t.detail.bike.bike_category?"EBike":"C"==t.detail.bike.bike_category?"Coco":"K"==t.detail.bike.bike_category?"Kenota":"PP"==t.detail.bike.bike_category?"Scooter Pro":"--":"--";else if("rating"==e.id)e.title=t.detail.rating,e.subTitle="--"===t.detail.rating?t.$t("components.tripManagement.details.map.notRated"):t.$t("components.tripManagement.details.map.rated"),e.icon_class="Good"===t.detail.rating?"fas fa-thumbs-up category-icon":"Bad"===t.detail.rating?"fas fa-thumbs-down category-icon":"fas fa-star category-icon",e.color="Good"===t.detail.rating?"#3ebc30":"Bad"===t.detail.rating?"#d90a20":"#ffed00";else if("co2"==e.id){var i=parseFloat(t.detail.co2_saved).toFixed(1);e.title=i>0?i+" gallon":"--"}else if("travel"==e.id){var a=parseFloat(t.detail.distance).toFixed(1),s="--";a>0&&(s=parseFloat(a/1e3).toFixed(2)+" KM"),e.title=s}}));var i=this.getLatLng(this.detail.src_coord);this.center={lat:i.lat,lng:i.lng},setTimeout((function(){t.boundingExtenders=t.getMapBoundExtenders()}),1500),this.detail.drop_off_location||"O"!==this.lastTripStatus||this.startListener()},data:function(){return{travelMode:"DRIVING",boundingExtenders:[],parkingMarkerOpen:!1,restrictedMarkerOpen:!1,slowSpeedMarkerOpen:!1,rewardZoneMarkerOpen:!1,riderTabs:[],activeTrip:null,sockListener:null,onTripStatusData:{text:"On Rent",variant:"purple"},categories:[{id:"bike",icon_class:"fas fa-bicycle category-icon",title:"BIKE",subTitle:this.$t("components.tripManagement.details.map.vehicle"),color:"#37b4ff"},{id:"rating",icon_class:"category-icon",title:"--",subTitle:"Rated",color:"#00b52c"},{id:"co2",title:"--"},{id:"travel",icon_class:"fas fa-road category-icon",title:"--",subTitle:this.$t("components.tripManagement.details.map.distance"),color:"#00b52c"}],center:{lat:10,lng:10},origin:null,destination:null,canceled:!1,zoom:12,showInfo:!1,infoWIndowContext:{position:{lat:44.2899,lng:11.8774}},start_date:"",end_date:"",vehicles:[{id:"S",name:"Scooter"},{id:"P",name:"Bike"},{id:"E",name:"EBike"}],infoWinOpen:!1,infoOptions:{pixelOffset:{width:0,height:-70}},infoWindowPos:{lat:0,lng:0},map:null,serviceDrawingOptions:{fillColor:"#4aff5c20",fillOpacity:1,strokeWeight:3,strokeColor:"#00b44d",clickable:!1,draggable:!1,editable:!1,zIndex:1},parkingDrawingOptions:{fillColor:"rgba(30, 152, 254, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#00acff",clickable:!1,draggable:!1,editable:!1,zIndex:2},restrictedDrawingOptions:{fillColor:"rgba(255, 0, 0, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#ff0000",clickable:!1,draggable:!1,editable:!1,zIndex:3},slowSpeedDrawingOptions:{fillColor:"rgba(156, 163, 175, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#9CA3AF",clickable:!1,draggable:!1,editable:!1,zIndex:4},rewardZoneDrawingOptions:{fillColor:"rgba(255, 124, 16, 0.13)",fillOpacity:1,strokeWeight:3,strokeColor:"#ff7c10",clickable:!1,draggable:!1,editable:!1,zIndex:5}}},watch:{boundingExtenders:function(t){this.resetMapBounds(t)},onTripStatusData:{deep:!0,immediate:!0,handler:function(t){console.log("onTripStatusData updated",t)}}},methods:{onChangeLiveTracking:function(t){var e=this,i=new FormData;i.append("should_send_live_position_data",t),this.$http.patch(I["default"].api.single(this.activeTrip.id),i).then((function(t){return console.log("live-data",t.data)})).catch((function(t){e.$notify({group:"generic",type:"error",title:"Server Error [".concat(t.response.status,"]"),text:"Unable to update live position data field"})}))},getCategoryClass:function(t){return"Good"===t?"bg-green-100":"Bad"===t?"bg-red-100":""},getAreaTypeLink:function(t){return"P"===t?"/geofence/parking-areas/":"R"===t?"/geofence/restricted-areas/":"S"===t?"/geofence/slow-zone-areas/":"RZ"===t?"/geofence/reward-zones/":void 0},toggleMarker:function(t,e,i){this.infoWinOpen=!0,this.infoWindowPos=this.getLatLng(t.center_coords),this.currentMidx==e||(this.currentMidx=e),this.infoContent=this.getInfoWindowContent(t,i)},getInfoWindowContent:function(t,e){return'\n        <div class="card">\n          <div class="card-content">\n            <div class="flex items-center h-6 pl-2">\n              <span class="card-title">Area Name:</span>\n              <span class="ml-2 card-text ">\n              <a href="'.concat(this.getAreaTypeLink(e)).concat(t.id,'" class="font-semibold text-blue-600 capitalize " target="_blank"> ').concat(void 0==t.name?" ":t.name,' </a>\n              </span>\n            </div>\n            <div class="flex items-center h-6 pl-2 mt-1">\n              <span class="card-title">Address:</span>\n              <span class="ml-2 card-text">').concat(t.address,'</span>\n            </div>\n            <div class="flex items-center h-6 pl-2 mt-1">\n              <span class="card-title">Latitude:</span>\n              <span class="ml-2 card-text">').concat(this.getLatLng(t.center_coords).lat,'</span>\n            </div>\n\n            <div class="flex items-center h-6 pl-2">\n              <span class="card-title">Longitude:</span>\n              <span class="ml-2 card-text">').concat(this.getLatLng(t.center_coords).lng,'</span>\n            </div>\n\n            <div class="flex items-center h-6 pl-2 mt-1">\n              <span class="card-title">Active Status:</span>\n              <span class="ml-2 card-text font-semibold">').concat(t.is_active?'<span class="text-green-600">Yes<span>':'<span class="text-gray-600">No<span>',"</span>\n            </div>\n             </div>\n        </div>\n      ")},initDraw:function(){var t=this,e=this;setTimeout((function(){e.$refs.map?e.$refs.map.$mapPromise.then((function(e){var i,a,s,n;t.map=e,t.drawServiceArea(),(null===(i=t.detail)||void 0===i?void 0:i.parking_areas_in_geofence.length)>0&&t.drawParkingArea(),(null===(a=t.detail)||void 0===a?void 0:a.restricted_areas_in_geofence.length)>0&&t.drawRestrictedArea(),(null===(s=t.detail)||void 0===s?void 0:s.slowzone_areas_in_geofence.length)>0&&t.drawSlowSpeedArea(),(null===(n=t.detail)||void 0===n?void 0:n.reward_zones_in_geofence.length)>0&&t.drawRewardZones()})):t.initDraw()}),1e3)},drawServiceArea:function(){var t,e,i=this.parseToOverlay(null===(t=this.activeTrip)||void 0===t?void 0:t.geofence.coords),a=new this.google.maps.LatLngBounds,s=Object(c["a"])(i);try{for(s.s();!(e=s.n()).done;){var n=e.value;a.extend(n)}}catch(l){s.e(l)}finally{s.f()}var o=new this.google.maps.Polygon(Object(r["a"])({paths:i},this.serviceDrawingOptions));o.setMap(this.map)},drawParkingArea:function(){var t,e=this;null===(t=this.activeTrip)||void 0===t||t.parking_areas_in_geofence.forEach((function(t){var i,a=e.parseToOverlay(t.coords),s=new e.google.maps.LatLngBounds,n=Object(c["a"])(a);try{for(n.s();!(i=n.n()).done;){var o=i.value;s.extend(o)}}catch(d){n.e(d)}finally{n.f()}var l=new e.google.maps.Polygon(Object(r["a"])({paths:a},e.parkingDrawingOptions));l.setMap(e.map)}))},drawRestrictedArea:function(){var t,e=this;null===(t=this.activeTrip)||void 0===t||t.restricted_areas_in_geofence.forEach((function(t){var i,a=e.parseToOverlay(t.coords),s=new e.google.maps.LatLngBounds,n=Object(c["a"])(a);try{for(n.s();!(i=n.n()).done;){var o=i.value;s.extend(o)}}catch(d){n.e(d)}finally{n.f()}var l=new e.google.maps.Polygon(Object(r["a"])({paths:a},e.restrictedDrawingOptions));l.setMap(e.map)}))},drawSlowSpeedArea:function(){var t,e=this;null===(t=this.activeTrip)||void 0===t||t.slowzone_areas_in_geofence.forEach((function(t){var i,a=e.parseToOverlay(t.coords),s=new e.google.maps.LatLngBounds,n=Object(c["a"])(a);try{for(n.s();!(i=n.n()).done;){var o=i.value;s.extend(o)}}catch(d){n.e(d)}finally{n.f()}var l=new e.google.maps.Polygon(Object(r["a"])({paths:a},e.slowSpeedDrawingOptions));l.setMap(e.map)}))},drawRewardZones:function(){var t,e=this;null===(t=this.activeTrip)||void 0===t||t.reward_zones_in_geofence.forEach((function(t){var i,a=e.parseToOverlay(t.coords),s=new e.google.maps.LatLngBounds,n=Object(c["a"])(a);try{for(n.s();!(i=n.n()).done;){var o=i.value;s.extend(o)}}catch(d){n.e(d)}finally{n.f()}var l=new e.google.maps.Polygon(Object(r["a"])({paths:a},e.rewardZoneDrawingOptions));l.setMap(e.map)}))},parseToOverlay:function(t){if(t){var e=t.replaceAll("{","");e=e.replaceAll("}","");var i=e.split(",");!i.length%2===0&&","==i[i.length-1]&&(console.log("Hit pop"),i.pop());for(var a=[],s=0;s<i.length;s+=2){var n=parseFloat(i[s]),r=parseFloat(i[s+1]);isNaN(n)||isNaN(r)||a.push({lat:n,lng:r})}return a}},onTabChange:function(t){for(var e=0;e<this.riderTabs.length;++e)if(t!==e)this.riderTabs[e].isActive=!1;else{this.riderTabs[e].isActive=!0,this.activeTrip=0===t?this.detail:this.detail.child_trips[e-1];var i=E(this.activeTrip.src_coord);this.center={lat:i.lat,lng:i.lng},this.start_date=this.activeTrip.pick_up_time?Object(O["c"])(this.activeTrip.pick_up_time,"D MMM h:m:ss a"):"--",this.end_date=this.activeTrip.drop_off_time?Object(O["c"])(this.activeTrip.drop_off_time,"D MMM h:m:ss a"):"--"}},getTripPath:function(t){return t.traversed_path.length?t.traversed_path:t.on_ride_trip_path.length?t.on_ride_trip_path:[]},getMapBoundExtenders:function(){var t=[this.getLatLng(this.detail.src_coord)];return this.detail.dest_coord||"O"!==this.lastTripStatus||t.push(this.getLatLng(this.detail.bike.current_loc_coord)),this.detail.dest_coord&&"O"!==this.lastTripStatus&&t.push(this.getLatLng(this.detail.dest_coord)),t},resetMapBounds:function(t){var e,i=new this.google.maps.LatLngBounds,a=Object(c["a"])(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;i.extend(s)}}catch(n){a.e(n)}finally{a.f()}this.$refs.map.fitBounds(i)},toggleInfoWindow:function(t){this.infoWIndowContext=t,this.showInfo=!0},infoClicked:function(t){console.log(t)},onTabMap:function(t){console.log(t.latLng.lat(),t.latLng.lng())},getLatLng:E,startListener:function(){var t=localStorage.getItem("token")||null;if(t){var e=$["a"].baseUrl+$["a"].channels.bikeUpdates+"?token=".concat(t);this.sockListener=this.sockListener?this.sockListener:new M.a(e,null,$["a"].configs()),this.sockListener.onopen=function(){console.log("Opened Connection...")},this.sockListener.onclose=function(){console.log("Closed Connection...")},this.sockListener.onmessage=this.onMessageHandler}},removeListener:function(){this.sockListener&&(this.sockListener.close(4003,"oto system closed the socket to refresh stream"),this.sockListener=null)},onMessageHandler:function(t){console.log("Incoming --\x3e ",t);var e=JSON.parse(t.data);if("noti.bike_updates"===e.n_type){var i=e.data,a=i["id"];if(a&&this.detail.bike.id===a){if(console.log("Incoming data for bike ".concat(a," : location --\x3e ").concat(i["location"])),i.status_flags&&(console.log("Incoming data for bike ".concat(a," : on ride status --\x3e ").concat(i.status_flags.is_on_ride)),!i.status_flags.is_on_ride))return this.removeListener(),void this.$emit("fetchTripDetail",this.detail.id);if(console.log("Incoming data for bike ".concat(a," : on ride status --\x3e ").concat(i.status_flags.is_on_ride)),this.detail.bike.current_loc_coord===i["location"])console.log("Skipping updates : Has same data --\x3e ".concat(this.detail.bike.current_loc_coord));else{var s=this.detail.bike.current_loc_coord;this.detail.bike.current_loc_coord=i["location"],console.log("Updated data for bike ".concat(a," | location : ").concat(s," --\x3e ").concat(i["location"]))}this.boundingExtenders=this.getMapBoundExtenders()}}}}},V=L,R=(i("494f"),Object(p["a"])(V,o,l,!1,null,"8dd550e8",null)),j=R.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"mb-2 bg-white rounded-md shadow overflow-auto"},[a("div",{staticClass:"relative"},[a("div",{staticClass:"items-center w-full h-full place-content-center flex"},[a("div",{staticClass:"my-6"},[a("div",{staticClass:"flex items-center"},[a("span",{staticClass:"block cost-total-title"},[t._v(t._s(t.getTripCostFormat)+" ")]),a("img",{staticClass:"cursor-pointer ml-1",attrs:{src:i("b581")},on:{click:function(e){return t.onPricingPlanHistoryModalReq()}}})])])]),t.isRefunded?["FR"===t.detail.invoice.finalized_refund_status_code?a("div",{staticClass:"absolute",staticStyle:{right:"5%",top:"5%"}},[a("img",{staticClass:"w-32 h-32",attrs:{src:i("6106")}})]):t._e(),"PR"===t.detail.invoice.finalized_refund_status_code?a("div",{staticClass:"absolute",staticStyle:{right:"5%",top:"5%"}},[a("img",{staticClass:"w-32",attrs:{src:i("df61")}})]):t._e()]:t._e(),a("TripNotesView",{attrs:{data:t.detail}})],2),a("div",{staticClass:"row"},[a("div",{staticClass:"grid h-24 grid-cols-2"},[a("div",{staticClass:"pl-10 place-content-center cost-grid-item border-right flex-col text-left"},[a("div",{staticClass:"cost-title-no-color text-gray-500"},[t._v(" "+t._s(t.items[0].title)+" ")]),a("div",{staticClass:"cost-title-no-color text-oDark"},[t._v(" "+t._s(t.items[0].subTitle)+" ")])]),a("div",{staticClass:"pr-10 place-content-center cost-grid-item flex-col text-right"},[a("div",{staticClass:"cost-title-no-color text-gray-500"},[t._v(" "+t._s(t.items[1].title)+" ")]),a("div",{staticClass:"cost-title-no-color text-oDark"},[t._v(" "+t._s(t.items[1].subTitle)+" ")])])])]),a("div",{staticClass:"px-6"},[t._l(t.getCostCategories,(function(e,i){return a("div",{key:i,staticClass:"cost-list"},[a("div",{class:{"col-w-6":!0,flex:"discount"===e.id||"reward_zone_discount"===e.id}},[a("span",{class:{"cost-title":!0,"flex-grow":"discount"===e.id||"reward_zone_discount"===e.id},style:"discount"===e.id||"reward_zone_discount"===e.id?"color:#3ebc30":"color:#000000"},[t._v(t._s(e.name))]),"discount"===e.id&&(t.detail.applied_pass||t.detail.applied_promo||t.detail.applied_voucher)?a("span",{staticClass:"cost-title ml-5"},[a("span",{staticClass:"victory-text-alt",style:"color: "+t.getColor+";"},[t.detail.applied_voucher?a("RouterLink",{attrs:{to:{name:"VoucherDetails",params:{id:t.detail.applied_voucher.id}},target:"_blank"}},[t._v(" "+t._s(t.discountDescription)+" ")]):t._e(),t.detail.applied_promo?a("RouterLink",{attrs:{to:{name:"PromotionDetails",params:{id:t.detail.applied_promo.id}},target:"_blank"}},[t._v(" "+t._s(t.discountDescription)+" ")]):t._e(),t.detail.applied_pass?a("RouterLink",{attrs:{to:{name:"PassDetails",params:{id:t.detail.applied_pass.id}},target:"_blank"}},[t._v(" "+t._s(t.discountDescription)+" ")]):t._e()],1)]):t._e(),"trip_cost"===e.id&&!e.isChild&&t.detail.child_trips&&t.detail.child_trips.length>0?a("span",{staticClass:"rider-type-badge host"},[t._v(t._s(t.$t("components.tripManagement.details.cost.host")))]):t._e(),"trip_cost"===e.id&&e.isChild?a("span",{staticClass:"rider-type-badge guest"},[t._v(t._s(t.$t("components.tripManagement.details.cost.guest")))]):t._e(),"trip_cost"===e.id?a("p",{staticClass:"font-normal text-gray-700 text-xs"},[t._v(" "+t._s(t.getTripCostSubText(t.detail))+" ")]):t._e(),"pause_time_cost"===e.id?a("p",{staticClass:"font-normal text-gray-700 text-xs"},[t._v(" "+t._s(t.getPauseCostSubText(t.detail))+" ")]):t._e(),"penalty_amount"===e.id&&t.detail.penalties.length>0?a("p",{staticClass:"font-normal text-gray-700 text-xs"},[t._v(" "+t._s(t.getPenaltySubText(t.detail))+" ")]):t._e()]),a("div",{staticClass:"justify-end text-right col-w-4"},[t.hasDiscountedPrice(e.id)?a("span",{staticClass:"cost-val regular-cost"},[t._v(t._s(e.regularPrice))]):t._e(),a("span",{staticClass:"cost-val",style:"discount"==e.id||"reward_zone_discount"==e.id?"color:#3ebc30":"color:#000000"},[t._v(t._s(e.price))])])])})),a("div",[a("div",{staticClass:"cost-list no-border "},[a("p",{staticClass:"font-bold text-lg"},[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.payments"))+" ")])])]),a("div",t._l(t.getPaymentRecords,(function(e,i){return a("div",{key:i},[a("div",{staticClass:"cost-list no-border"},[a("div",{staticClass:"col-w-7"},[a("p",[t._v(t._s(e.payment_source_name))]),e.payment_note?a("p",{staticClass:"text-sm text-gray-500"},[t._v(" "+t._s(e.payment_note)+" ")]):t._e()]),a("div",{staticClass:"col-w-3",staticStyle:{"text-align":"end"}},[a("p",[e.is_for_refund?a("span",[t._v("-")]):t._e(),t._v(" "+t._s(t.getFormattedPrice(e.amount))+" ")]),e.is_for_refund?a("p",{staticClass:"text-sm text-gray-500"},[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.refunded"))+" ")]):t._e()]),"card"===e.payment_source_type&&t.detail.invoice.payment_method?a("div",{staticClass:"pl-1 cursor-pointer",on:{click:function(e){return t.togglePaymentDetailsView(i)}}},[e.isShowDetails?a("i",{staticClass:"text-sm fa fa-chevron-up text-blue-500"}):a("i",{staticClass:"text-sm fa fa-chevron-down text-blue-500"})]):t._e()]),t.detail.invoice.payment_method?a("AccordionTransition",{attrs:{expanded:e.isShowDetails}},[a("div",{staticClass:"px-5 text-sm text-gray-500"},[t.detail.invoice.payment_method.id?a("div",{staticClass:"flex justify-between"},[a("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.id"))+" ")]),a("p",[t._v(t._s(t.detail.invoice.payment_method.id))])]):t._e(),t.detail.invoice.payment_method.brand?a("div",{staticClass:"flex justify-between my-1"},[a("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.cardType"))+" ")]),a("p",[t._v(" "+t._s(t.detail.invoice.payment_method.brand)+" ")])]):t._e(),t.detail.invoice.payment_method.expiry?a("div",{staticClass:"flex justify-between my-1"},[a("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.expireAt"))+" ")]),a("p",[t._v(" "+t._s(t.getFormattedDateTime(t.detail.invoice.payment_method.expiry,"D MMM YYYY"))+" ")])]):t._e(),t.detail.invoice.payment_method.user.full_name?a("div",{staticClass:"flex justify-between my-1"},[a("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.owner"))+" ")]),a("p",[t._v(" "+t._s(t.detail.invoice.payment_method.user.full_name)+" ")])]):t._e(),t.detail.invoice.payment_method.extra_detail?a("div",{staticClass:"flex justify-between my-1"},[a("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.email"))+" ")]),a("p",[t._v(" "+t._s(t.detail.invoice.payment_method.extra_detail)+" ")])]):t._e(),t.detail.invoice.payment_method.cvc_check?a("div",{staticClass:"flex justify-between my-1"},[a("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.cvcCheck"))+" ")]),a("p",[t._v(" "+t._s(t.detail.invoice.payment_method.cvc_check)+" ")])]):t._e(),t.detail.invoice.payment_method.card_origin_country?a("div",{staticClass:"flex justify-between my-1"},[a("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.cost.originCountry"))+" ")]),a("p",[t._v(" "+t._s(t.detail.invoice.payment_method.card_origin_country)+" ")])]):t._e()])]):t._e()],1)})),0)],2)])},N=[],H=(i("a434"),i("a4d3"),i("e01a"),i("a15b"),i("4de4"),i("59c1")),q={MM:"Monthly",YY:"Yearly",DD:"Daily",WE:"Weekly"},U={components:{AccordionTransition:H["default"],TripNotesView:function(){return i.e("chunk-598edf53").then(i.bind(null,"9467"))}},props:{detail:{required:!1,default:null},symbol:{required:!1}},mounted:function(){var t=this;console.log("detail = ",this.detail),this.items.forEach((function(e){"transactionTime"===e.id?e.subTitle=t.detail.invoice?Object(O["c"])(t.detail.invoice.date,"D MMM YYYY, h:mm a"):"--":"invoiceID"===e.id&&(e.subTitle=t.detail.invoice?"#".concat(t.detail.invoice.id.substr(t.detail.invoice.id.length-5)):"--")}));for(var e=0;e<this.getCostCategories.length;++e){if("discount"==this.getCostCategories[e].id)this.getCostCategories[e].price=this.getFormattedPrice(this.detail.discount);else if("reward_zone_discount"==this.getCostCategories[e].id)this.getCostCategories[e].name="".concat(this.getCostCategories[e].name," (").concat(parseFloat(this.detail.reward_zone_discount_percentage),"%)"),this.getCostCategories[e].price=this.getFormattedPrice(this.detail.reward_zone_discount);else if("unlock_charge"==this.getCostCategories[e].id){var i=this.detail.unlock_charge,a=this.detail.original_unlock_cost;if(this.detail.child_trips)for(var s=0;s<this.detail.child_trips.length;++s)i+=this.detail.child_trips[s].unlock_charge,a+=this.detail.child_trips[s].original_unlock_cost;this.getCostCategories[e].price=this.getFormattedPrice(i),this.detail.original_unlock_cost&&(this.getCostCategories[e].regularPrice=this.getFormattedPrice(a))}else if("reservation_charge"==this.getCostCategories[e].id){var n=this.detail.reservation_charge,r=this.detail.original_reservation_cost;if(this.detail.child_trips)for(var o=0;o<this.detail.child_trips.length;++o)n+=this.detail.child_trips[o].reservation_charge,r+=this.detail.child_trips[o].original_reservation_cost;this.getCostCategories[e].price=this.getFormattedPrice(n),this.detail.original_reservation_cost&&(this.getCostCategories[e].regularPrice=this.getFormattedPrice(r))}else if("trip_cost"==this.getCostCategories[e].id){if(this.getCostCategories[e].name=this.getTripCostName(this.getCostCategories[e].id,this.detail),null!==this.detail.riding_time_balance_used?this.getCostCategories[e].price=this.getTripCostFormat:this.getCostCategories[e].price=this.getFormattedPrice(this.detail.cost),this.detail.child_trips)for(var l=0;l<this.detail.child_trips.length;l++,e++)this.getCostCategories.splice(e+1,0,{id:"trip_cost",name:this.getTripCostName(this.getCostCategories[e].id,this.detail.child_trips[l]),price:null!==this.detail.riding_time_balance_used?"--":this.getFormattedPrice(this.detail.child_trips[l].cost),regularPrice:"0",isChild:!0})}else if("pause_time_cost"==this.getCostCategories[e].id)this.getCostCategories[e].name=this.getPauseTimeCostName(this.getCostCategories[e].id,this.detail),this.getCostCategories[e].price=this.getFormattedPrice(this.detail.pause_cost);else if("tax_amount"==this.getCostCategories[e].id)this.getCostCategories[e].price=this.getFormattedPrice(this.detail.tax_amount),this.getCostCategories[e].name=this.getTaxFormattedTitle(this.detail.tax_rate);else if("sub_total"==this.getCostCategories[e].id){var c=this.detail.cost,d=this.detail.unlock_charge,u=this.detail.reservation_charge,p=this.detail.pause_cost;if(this.detail.child_trips)for(var m=0;m<this.detail.child_trips.length;++m)c+=this.detail.child_trips[m].cost,d+=this.detail.child_trips[m].unlock_charge,u+=this.detail.child_trips[m].reservation_charge;this.getCostCategories[e].price=this.getFormattedPrice(c+d+u+p)}else"penalty_amount"==this.getCostCategories[e].id&&(this.getCostCategories[e].price=this.getFormattedPrice(parseFloat(this.detail.penalties[0].deduct_amount).toFixed(2)));null!==this.detail.riding_time_balance_used&&"trip_cost"!==this.getCostCategories[e].id&&(this.getCostCategories[e].price="--")}console.log("cost",this.cost_categories)},computed:{getPaymentRecords:function(){return this.detail.payment_records?(this.detail.payment_records=this.detail.payment_records.map((function(t){return"card"===t.payment_source_type?Object(r["a"])(Object(r["a"])({},t),{},{isShowDetails:!1}):t})),this.detail.payment_records):[]},getCostCategories:function(){return this.getActualCategories()},getTotalAmount:function(){return this.detail.invoice?0===this.detail.invoice.amount?"-.--":parseFloat(this.detail.invoice.amount).toFixed(2):"-.--"},getTripCostFormat:function(){return null!==this.detail.riding_time_balance_used?this.convertSecondsToMinutesAndSeconds(this.detail.riding_time_balance_used):"".concat(this.detail.currency.symbol," ").concat(this.getTotalAmount)},getColor:function(){return this.detail.pass_applied?"#f07300":this.detail.promo_applied?"#8200ff":this.detail.voucher_applied?"#0fb400":"#000000"},promoDescription:function(){var t=this.detail.applied_promo,e=Object(O["b"])(t.end_date,"D MMM, YYYY"),i="";return"RD"===t.promotion_category?i="".concat(parseFloat(t.percentage).toFixed(0),"% off"):"FR"===t.promotion_category?i="Free ride":"FD"===t.promotion_category&&(i="".concat(this.currencySymbol).concat(parseFloat(t.flat_discount_amount).toFixed(0)," off")),"".concat(i,". Valid till ").concat(e,".")},passDescription:function(){var t=this.detail.applied_pass,e=t.package,i="".concat(q[e.period]," Pass"),a=Object(O["b"])(e.end_date,"D MMM, YYYY");return"".concat(i,". Valid till ").concat(a,".")},voucherDescription:function(){var t=this.detail.applied_voucher,e="".concat(t.package.description||t.package.title||""),i=Object(O["b"])(t.expire_date,"D MMM, YYYY");return"".concat(e,". Valid till ").concat(i,".")},discountDescription:function(){var t=this.detail.applied_promo;if(t)return"".concat(t.code);var e=this.detail.applied_voucher;if(e)return"".concat(e.package.title);var i=this.detail.applied_pass;if(i){var a=i.package,s="".concat(q[a.period]," Pass");return"".concat(s)}return""},currencySymbol:function(){var t,e;return(null===(t=this.detail)||void 0===t||null===(e=t.currency)||void 0===e?void 0:e.symbol)||this.$org.default_currency.symbol},isRefunded:function(){var t;return(null===(t=this.detail)||void 0===t?void 0:t.invoice)&&this.detail.invoice.is_refunded},getPaymentMethod:function(){var t=[];if(this.detail.invoice){var e,i=null===(e=this.detail.invoice)||void 0===e?void 0:e.payment_method;i?t.push("".concat(i.brand," ").concat(i.number)):t.push("eWallet")}else t.push("eWallet");return null!==this.detail.subscription_charge_amount&&t.push("Pass"),t.join(", ")}},data:function(){return{onTripDurationStr:null,cost_categories:[{id:"reservation_charge",name:this.$t("components.tripManagement.details.cost.reservation"),price:"0",regularPrice:"0"},{id:"unlock_charge",name:this.$t("components.tripManagement.details.cost.unlockCharge"),price:"0",regularPrice:"0"},{id:"trip_cost",name:this.$t("components.tripManagement.details.cost.tripCost"),price:"0",regularPrice:"0"},{id:"pause_time_cost",name:this.$t("components.tripManagement.details.cost.pauseTimeCost"),price:"0"},{id:"sub_total",name:this.$t("components.tripManagement.details.cost.subTotal"),price:"0"},{id:"discount",name:this.$t("components.tripManagement.details.cost.discount"),price:"0"},{id:"reward_zone_discount",name:this.$t("components.tripManagement.details.cost.rewardZoneDiscount"),price:"0"},{id:"tax_amount",name:this.$t("components.tripManagement.details.cost.vat"),price:"0"},{id:"penalty_amount",name:this.$t("components.tripManagement.details.cost.appliedPenaltyAmount"),price:"0.00"}],items:[{id:"transactionTime",icon_class:"fas fa-thumbs-up category-icon",title:this.$t("components.tripManagement.details.cost.transactionTime"),color:"#3ebc30"},{id:"invoiceID",icon_class:"fas fa-road category-icon",title:this.$t("components.tripManagement.details.cost.invoiceId")}]}},methods:{getFormattedDateTime:O["c"],convertSecondsToMinutesAndSeconds:O["a"],togglePaymentDetailsView:function(t){this.detail.payment_records[t].isShowDetails=!this.detail.payment_records[t].isShowDetails},getActualCategories:function(){var t=this.cost_categories;return 0==this.detail.reservation_charge&&(t=t.filter((function(t){return"reservation_charge"!==t.id}))),0==this.detail.penalties.length&&(t=t.filter((function(t){return"penalty_amount"!==t.id}))),0==this.detail.pause_time_secs_till_now&&(t=t.filter((function(t){return"pause_time_cost"!==t.id}))),null===this.detail.reward_zone_discount_percentage&&(t=t.filter((function(t){return"reward_zone_discount"!==t.id}))),t},onPricingPlanHistoryModalReq:function(){this.$modal.show("pricingPlanHistoryModal")},getFormattedPrice:function(t){var e=t;if("number"!==typeof t){if(e=parseFloat(t).toFixed(2),isNaN(e))return"--"}else e=t.toFixed(2);return"".concat(this.detail.currency.symbol," ").concat(e)},getTaxFormattedTitle:function(t){return t?"".concat(this.$t("components.tripManagement.details.cost.vat")," ").concat(parseFloat(t).toFixed(0),"%"):this.$t("components.tripManagement.details.cost.vat")},getTripsRate:function(t){return t.riding_time>t.billing_unit_secs?this.getFormattedPrice(t.rate_per_minute):this.getFormattedPrice(t.first_unit_fees)},getTripCostName:function(t,e){return"trip_cost"!==t?"--":null!==this.detail.riding_time_balance_used?this.$t("components.tripManagement.details.cost.tripCost"):e.riding_time&&null!==e.rate_per_minute&&e.rate_per_minute>=0?this.$t("components.tripManagement.details.cost.tripCostWithValue",{time:Object(O["d"])(e.riding_time)}):this.$t("components.tripManagement.details.cost.tripCost")},getTripCostSubText:function(t){if(null===this.detail.riding_time_balance_used)return this.$t("components.tripManagement.details.cost.tripCostSubtitle",{currencySymbol:this.currencySymbol,firstUnitFee:t.first_unit_fees,firstUnitFeeUnit:t.billing_unit_secs/60===1?this.$t("components.tripManagement.details.cost.minute"):"".concat(t.billing_unit_secs/60).concat(this.$t("components.tripManagement.details.cost.minute")),nextUnitFee:t.rate_per_minute,nextUnitFeeUnit:t.billing_unit_secs/60===1?this.$t("components.tripManagement.details.cost.minute"):"".concat(t.billing_unit_secs/60).concat(this.$t("components.tripManagement.details.cost.minute"))})},getPenaltySubText:function(t){return t.penalties[0].title},getPauseTimeCostName:function(t,e){return"pause_time_cost"!==t?"--":null!==this.detail.riding_time_balance_used?this.$t("components.tripManagement.details.cost.pauseTimeCost"):e.pause_time_secs_till_now&&null!==e.pause_rate_per_minute&&e.pause_entries.length>0?this.$t("components.tripManagement.details.cost.pauseTimeCostWithValue",{time:Object(O["d"])(e.pause_time_secs_till_now)}):this.$t("components.tripManagement.details.cost.pauseTimeCost")},getPauseCostSubText:function(t){if(null===this.detail.riding_time_balance_used)return this.$t("components.tripManagement.details.cost.pauseTimeCostSubtitle",{currencySymbol:this.currencySymbol,pauseFirstUnitFee:t.pause_first_unit_fees,pauseFirstUnitFeeUnit:1===t.pause_billing_unit_mins?this.$t("components.tripManagement.details.cost.minute"):"".concat(t.pause_billing_unit_mins).concat(this.$t("components.tripManagement.details.cost.minute")),nextUnitFee:t.pause_rate_per_minute,nextUnitFeeUnit:1===t.pause_billing_unit_mins?this.$t("components.tripManagement.details.cost.minute"):"".concat(t.pause_billing_unit_mins).concat(this.$t("components.tripManagement.details.cost.minute"))})},hasDiscountedPrice:function(t){return!("unlock_charge"!==t||!this.detail.original_unlock_cost||!this.detail.applied_pass)||!("reservation_charge"!==t||!this.detail.original_reservation_cost||!this.detail.applied_pass)},getDate:function(t){var e=new Date(t),i=e.getMonth(),a=e.getDate(),s=e.getFullYear(),n=new Array;return n[0]="January",n[1]="February",n[2]="March",n[3]="April",n[4]="May",n[5]="June",n[6]="July",n[7]="August",n[8]="September",n[9]="October",n[10]="November",n[11]="December",a+" "+n[i]+" , "+s}}},z=U,Y=(i("bc90"),Object(p["a"])(z,B,N,!1,null,"6af5388c",null)),G=Y.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"mb-2 bg-white rounded-md shadow h-full"},[i("div",{staticClass:"responsive-point"},[i("div",{staticClass:"absolute flex items-center w-full h-full place-content-center"},[i("div",[i("span",{staticClass:"block cost-total-title"},[t._v(t._s(t.total_count))]),i("span",{staticClass:"block cost-sub-title"},[t._v(" "+t._s(t.$t("components.tripManagement.details.tripPoint.pointEarned")))])])]),i("div",{staticClass:"point-box",style:"background-color:"+(t.total_count>=0?"#e4fdf9":"#fbe6e6")})]),t._l(t.point_categories,(function(e,a){return i("div",{key:a,staticClass:"cost-list responsive-point-categories"},[i("div",{staticClass:"w-4/12"},[i("span",{staticClass:"cost-title"},[t._v(t._s(e.name))])]),i("div",{staticClass:"flex justify-center w-5/12"},[i("span",{staticClass:"cost-id"},[i("a",{attrs:{href:""}},[t._v(t._s(e.id))])])]),i("div",{staticClass:"flex justify-center w-3/12"},[i("span",{staticClass:"text-center cost-val",style:e.price<0?"color:#ff0000":"color:#000000"},[t._v(t._s(e.price))])])])}))],2)},Q=[],J={components:{},props:["detail"],mounted:function(){console.log(this.detail.trip_points);var t=[],e=0,i=!1;this.detail.trip_points.forEach((function(a){a.reduce_to_zero?(i=!0,e=0):i||(e+=parseInt(a.point));var s={price:a.reduce_to_zero?"Reduced to 0":parseInt(a.point).toFixed(),name:a.title,id:"#".concat(a.id?a.id.substr(a.id.length-5):"--")};t.push(s)})),this.point_categories=t,this.total_count=parseInt(e).toFixed()},data:function(){return{total_count:0,point_categories:[{name:"Trip Completed",price:"+7",id:""},{name:"Trip Completed",price:"-1",id:"Report ID: #533453"},{name:"Trip Completed",price:"-1",id:"Report ID: #565657"}]}},computed:{getTotalPoints:function(){return parseInt(this.count).toFixed()}}},K=J,Z=(i("ae3c"),Object(p["a"])(K,W,Q,!1,null,"b214dc7c",null)),X=Z.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"py-7 px-8 mb-2 mr-3 bg-white rounded-md shadow"},[i("p",{staticClass:"text-lg font-extrabold"},[t._v(" "+t._s(t.$t("components.tripManagement.details.tripNotes.notes"))+" ")]),t.$acl.canUpdate("trips")?i("QuillEditor",{attrs:{placeholder:"Add notes.."},on:{save:function(e){return t.onSaveNote(e,t.id)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}):t._e(),i("div",{staticClass:"flex justify-between items-center mt-8 mb-2"},[i("div",{staticClass:"flex gap-3 items-center"},[i("i",{staticClass:"text-sm fas fa-comment-alt"}),i("span",{staticClass:"font-bold text-14px"},[t._v(" "+t._s(t.$t("components.tripManagement.details.tripNotes.latestNotes")))])])]),t.notes&&t.notes.data.length>0?t._l(t.notes.data,(function(e){return i("NoteItem",{key:e.id,attrs:{data:e,deletePermission:t.$acl.canDelete("trips")},on:{delete:function(e){return t.onDeleteNote(e,t.id)}}})})):[i("p",{staticClass:"mt-5 text-sm text-gray-500"},[t._v(" "+t._s(t.$t("components.tripManagement.details.tripNotes.noNotes"))+" ")])]],2)},et=[],it=(i("c740"),i("db40")),at=i("47b6"),st=i("c820"),nt={props:["id"],data:function(){return{notes:null,content:""}},components:{NoteItem:at["a"],QuillEditor:it["a"]},created:function(){this.fetchNotes()},methods:{fetchNotes:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.id,e.next=3,t.$http.get(st["c"].note.index(i,"trip")).then((function(e){console.log("Note = ",e.data),t.notes=e.data})).catch((function(t){console.log("err = ",t)}));case 3:case"end":return e.stop()}}),e)})))()},onSaveNote:function(t,e){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log({onSaveNote:t}),s="/dashboard/entity-notes/trip/".concat(e,"/"),n=new FormData,n.append("details",i.content),a.next=6,i.$http.post(s,n).then((function(t){var e=t.data;i.notes.data.unshift(e),i.content=""}));case 6:case"end":return a.stop()}}),a)})))()},onDeleteNote:function(t,e){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log({parentId:e}),s="/dashboard/entity-notes/".concat(t.id,"/"),a.next=4,i.$http.delete(s);case 4:n=a.sent,n&&(r=i.notes.data.findIndex((function(e){return e.id==t.id})),i.notes.data.splice(r,1));case 6:case"end":return a.stop()}}),a)})))()}}},rt=nt,ot=Object(p["a"])(rt,tt,et,!1,null,null,null),lt=ot.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-3 px-8 mb-2 mr-3 bg-white rounded-md shadow w-full"},[a("div",{staticClass:"flex items-center mb-4"},[a("img",{staticClass:"w-5 h-5",attrs:{src:i("8a82")}}),a("p",{staticClass:"text-lg font-extrabold ml-2"},[t._v(" "+t._s(t.$t("components.tripManagement.details.tags"))+" ")])]),a("OtoTag",{attrs:{"entity-id":t.id,"entity-type":"trip",editPermissionStatus:t.$acl.canNotUpdate("trips")}})],1)},dt=[],ut=i("97c5"),pt={props:["id"],components:{OtoTag:ut["a"]},setup:function(){}},mt=pt,_t=Object(p["a"])(mt,ct,dt,!1,null,null,null),gt=_t.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.tripAction.processing&&t.isGuestTrip?a("loading",{attrs:{height:45,opacity:.25,color:"#000",active:!0,loader:"bars","is-full-page":!0}}):t._e(),t.onRide?a("t-dropdown",{attrs:{variant:"smActions"},scopedSlots:t._u([{key:"trigger",fn:function(e){var i=e.mousedownHandler,s=e.focusHandler,n=e.blurHandler,r=e.keydownHandler;return[a("button",{class:"trip-status-pill-button focus:outline-none",attrs:{"aria-label":"Force Complete Dropdown","aria-haspopup":"true"},on:{mousedown:i,focus:s,blur:n,keydown:r}},[!0===t.lockedStatus?a("i",{staticClass:"fas fa-lock fa-xs mr-2 text-gray-500"}):t._e(),!1===t.lockedStatus?a("i",{staticClass:"fas fa-unlock fa-xs mr-2 text-blue-600"}):t._e(),t.$acl.canUpdate("trips")?a("i",{staticClass:"fas fa-angle-down fa-xs text-gray-500"}):t._e()])]}},{key:"default",fn:function(e){var i=e.hide;return[t.$acl.canUpdate("trips")?a("div",{staticClass:"py-1 mt-1 bg-white rounded-md shadow-md",on:{click:function(t){return i()}}},[a("t-dropdown-item",{staticClass:"text-oOrange hover:bg-orange-100",on:{click:t.onForceComplete}},[t._v(" Force Complete ")])],1):t._e()]}}],null,!1,4248838498)}):t._e(),t.onRide?t._e():a("div",{staticClass:"flex items-center"},[!0===t.lockedStatus?a("i",{staticClass:"fas fa-lock fa-xs mr-2 text-gray-500"}):t._e(),!1===t.lockedStatus?a("i",{staticClass:"fas fa-unlock fa-xs mr-2 text-blue-600"}):t._e()]),a("EdgeStack",{attrs:{id:t.tripId+"-"+t.tripAction.esId,busy:t.tripAction.busy,"exit-button":{text:"Cancel",hidden:!0},"footer-class":{fixed:"flex justify-end items-center px-6 pt-2 pb-5 w-full h-auto",append:""},debug:!0},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"text-xl font-bold"},[t._v(t._s(t.tripAction.title))])]},proxy:!0},{key:"footer",fn:function(e){var i=e.close;return[a("div",{staticClass:"flex gap-5 items-center"},[a("AppButton",{attrs:{text:"Cancel",variant:"secondary"},on:{click:function(t){return i()}}}),a("AppButton",{attrs:{text:"Confirm","is-loading":t.tripAction.processing},on:{click:t.onEdgeConfirm}})],1)]}},{key:"default",fn:function(){return[a("div",{staticClass:"flex items-center px-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex justify-center items-center w-9 h-9 bg-gray-200 rounded-full"},[a("img",{staticClass:"object-contain w-9 h-9 rounded-full",attrs:{src:t.tripAction.data.user.profile_pic}})])]),a("div",{staticClass:"flex justify-between items-center py-4 w-full border-b"},[a("div",[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s(t.tripAction.data.user.full_name)}}),a("h6",{staticClass:"text-sm tracking-wide",staticStyle:{color:"#797979"},domProps:{textContent:t._s("UserID: "+t.$truncate(t.tripAction.data.user.id,-5))}})]),a("div",{staticClass:"text-right text-blue-600",domProps:{textContent:t._s("TripID: "+t.$truncate(t.tripAction.primaryKey,-5))}})])]),a("div",{staticClass:"flex items-center px-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex justify-center items-center w-9 h-9 rounded-full"},[a("img",{attrs:{src:i("6211")}})])]),a("div",{staticClass:"flex justify-between items-center py-4 w-full border-b"},[a("div",[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s("Forcibly lock vehicle")}}),a("h6",{staticClass:"text-sm tracking-wide",staticStyle:{color:"#797979"},domProps:{textContent:t._s("If you select YES then System will lock the vehicle Forcefully.")}})]),a("div",{staticClass:"flex items-center"},[a("p",{staticClass:"w-8 text-sm text-oDark",domProps:{textContent:t._s(t.tripAction.models.trigger_lock?"Yes":"No")}}),a("TToggle",{attrs:{variant:"success"},model:{value:t.tripAction.models.trigger_lock,callback:function(e){t.$set(t.tripAction.models,"trigger_lock",e)},expression:"tripAction.models.trigger_lock"}})],1)])]),a("div",{staticClass:"flex items-center px-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex justify-center items-center w-9 h-9 rounded-full"},[a("img",{attrs:{src:i("c156")}})])]),a("div",{staticClass:"flex justify-between items-center py-4 w-full border-b"},[a("div",[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s("Trigger payment for rider")}}),a("h6",{staticClass:"text-sm tracking-wide",staticStyle:{color:"#797979"},domProps:{textContent:t._s("If you select Yes then Rider will be charged manually.")}})]),a("div",{staticClass:"flex items-center"},[a("p",{staticClass:"w-8 text-sm text-oDark",domProps:{textContent:t._s(t.tripAction.models.trigger_payment?"Yes":"No")}}),a("TToggle",{attrs:{variant:"success"},model:{value:t.tripAction.models.trigger_payment,callback:function(e){t.$set(t.tripAction.models,"trigger_payment",e)},expression:"tripAction.models.trigger_payment"}})],1)])]),t.tripAction.models.trigger_payment?a("div",{staticClass:"flex justify-end px-2 my-2"},[a("div",{staticClass:"py-4 max-w-md bg-gray-200 rounded-md border",staticStyle:{"min-width":"350px",background:"#F3F3F3"}},[a("section",{staticClass:"flex gap-4 justify-between items-center px-4"},[a("div",{staticClass:"-mt-6"},[t._v("Trip Duration (mins)")]),a("div",{staticClass:"w-24"},[a("AppInput",{attrs:{type:"number"},model:{value:t.tripAction.models.riding_time_min,callback:function(e){t.$set(t.tripAction.models,"riding_time_min",e)},expression:"tripAction.models.riding_time_min"}})],1)]),a("section",{staticClass:"py-2 border-t border-gray-300"},[a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Reservation Fee ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.vehicle_reservation_fees)+" ")])]),a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Unlock Fee ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.vehicle_unlock_fees)+" ")])]),a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Trip Duration Fee ("+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.default_fees_per_minute)+" x "+t._s(t.tripAction.models.riding_time_min)+" mins) ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.trip_amount)+" ")])]),a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Discount ")]),a("div",{staticClass:"w-12 text-oGreen"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.discount_data)+" ")])])]),a("section",{staticClass:"py-2 border-t border-gray-300"},[a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Subtotal ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.total_amount)+" ")])]),a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v("Vat ("+t._s("0")+"%)")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+"0.00")+" ")])])]),a("section",{staticClass:"pt-3 border-t border-gray-300"},[a("div",{staticClass:"flex justify-between items-center px-4"},[a("div",{staticClass:"w-full"},[t._v(" Total ")]),a("div",{staticClass:"w-20 text-3xl text-center"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.total_amount)+" ")])])])])]):t._e(),a("div",{staticClass:"flex px-3 py-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex items-center justify-center rounded-full w-9 h-9"},[a("img",{attrs:{src:i("689c")}})])]),a("div",{staticClass:"w-full"},[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s("Reason (Required)")}}),a("AppInput",{attrs:{type:"richselect",rules:"required",name:"reason",placeholder:"Select a reason","value-attribute":"value","text-attribute":"text",options:t.forceCompleteReason,"hide-search-box":""},model:{value:t.tripAction.models.force_complete_reason,callback:function(e){t.$set(t.tripAction.models,"force_complete_reason",e)},expression:"tripAction.models.force_complete_reason"}})],1)]),a("div",{staticClass:"flex px-3 py-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex items-center justify-center rounded-full w-9 h-9"},[a("img",{attrs:{src:i("689c")}})])]),a("div",{staticClass:"w-full"},[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s("Remarks (Required)")}}),a("AppInput",{attrs:{type:"textarea"},model:{value:t.tripAction.models.remarks,callback:function(e){t.$set(t.tripAction.models,"remarks",e)},expression:"tripAction.models.remarks"}})],1)])]},proxy:!0}])})],1)},ht=[],vt=i("bc84"),bt=i("92c2"),xt=i("ed08"),yt={name:"TripDurationDropdown",components:{EdgeStack:vt["a"],TDropdownItem:bt["default"]},props:{onRide:{type:Boolean,required:!1,default:!1},lockedStatus:{type:Boolean,required:!1},tripId:{type:String,required:!0},isGuestTrip:{type:Boolean,required:!0}},data:function(){return{isLoading:!1,tripAction:{busy:!1,esId:"tripActionFromDurationESD",title:"Force Complete Trip",primaryKey:"",processing:!1,models:{trigger_lock:!1,trigger_payment:!1,riding_time_min:0,force_complete_reason:"",remarks:""},data:{from_lock_log:!1,latest_lock_log:{},riding_time_mins:0,user:{id:"--",full_name:"--",role_name:"--",profile_pic:"https://via.placeholder.com/150"},pricing_info:{id:"--",bike_category:"-",currency_symbol:"~",vehicle_reservation_fees:0,vehicle_unlock_fees:0,default_fees_per_minute:0,max_billing_per_ride:0,discount_data:0}}},forceCompleteReason:[{text:"Vehicle Locking Issue",value:"VEHICLE_LOCKING_ISSUE"},{text:"Vehicle Battery Died",value:"VEHICLE_BATTERY_DIED"},{text:"Vehicle Inactive",value:"VEHICLE_INACTIVE"},{text:"App Issues",value:"APP_ISSUES"},{text:"Other",value:"OTHER"}]}},methods:{onEdgeClose:function(){this.$edgeStack.close("".concat(this.tripId,"-").concat(this.tripAction.esId))},executeAPI:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tripAction.processing=!0,i="/dashboard/trips/".concat(t.tripId,"/complete/"),a=t.tripAction.models,s=new xt["x"](a).toFormData(),e.next=6,t.$http.post(i,s).then((function(){t.$notify({group:"bottomLeft",type:"success",title:"Force Completion Successful",text:"Successfully completed the trip."}),t.$emit("forceCompleted"),t.onEdgeClose()})).catch((function(e){var i,a,s,n;t.$notify({group:"bottomLeft",type:"danger",title:"Failed Action [Code: ".concat(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status,"]"),text:null!==(a=null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail)&&void 0!==a?a:"Failed to force complete the trip."})})).finally((function(){t.tripAction.processing=!1}));case 6:case"end":return e.stop()}}),e)})))()},onForceComplete:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.tripAction.primaryKey=t.tripId,!t.isGuestTrip){e.next=4;break}return t.executeAPI(),e.abrupt("return");case 4:return i="/dashboard/trips/".concat(t.tripId,"/complete-preload/"),t.tripAction.busy=!0,t.$edgeStack.open("".concat(t.tripId,"-").concat(t.tripAction.esId)),e.next=9,t.$http.get(i).then((function(e){t.tripAction.data=e.data,t.tripAction.models.riding_time_min=e.data.riding_time_mins})).catch((function(t){console.warn("tripActionPreloadErr",t,t.response)})).finally((function(){t.tripAction.busy=!1}));case 9:case"end":return e.stop()}}),e)})))()},onEdgeConfirm:function(){this.executeAPI()}}},Ct=yt,wt=Object(p["a"])(Ct,ft,ht,!1,null,"4ff3e2c5",null),kt=wt.exports,Tt=i("2f62"),St=i("1869"),At=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("t-dropdown",{attrs:{variant:"smActions"},scopedSlots:t._u([{key:"trigger",fn:function(e){var a=e.mousedownHandler,s=e.focusHandler,n=e.blurHandler,r=e.keydownHandler;return[i("button",{class:"trip-status-pill-button "+t.getVariant+" focus:outline-none",staticStyle:{height:"35px",width:"170px"},attrs:{"aria-label":"Trip Completed Dropdown","aria-haspopup":"true"},on:{mousedown:a,focus:s,blur:n,keydown:r}},[i("span",[t._v(t._s(t.getText))]),t.$acl.canUpdate("transaction")?[t.refundStatus?t._e():i("i",{staticClass:"fas fa-chevron-down"})]:t._e()],2)]}},t.refundStatus&&t.penalizedStatus?null:{key:"default",fn:function(e){var a=e.hide;return[t.$acl.canUpdate("transaction")?i("div",{staticClass:"py-1 mt-1 bg-white rounded-md shadow-md",on:{click:function(t){return a()}}},[t.refundStatus?t._e():i("t-dropdown-item",{staticClass:"text-oOrange hover:bg-orange-100",on:{click:function(e){return t.$emit("refund")}}},[t._v(" "+t._s(t.$t("components.tripManagement.details.headline.refund"))+" ")]),t.penalizedStatus?t._e():i("t-dropdown-item",{staticClass:"text-oRed hover:bg-red-100",on:{click:function(e){return t.$emit("penalize-policy")}}},[t._v(" "+t._s(t.$t("components.tripManagement.details.headline.policyPenalty"))+" ")])],1):t._e()]}}],null,!0)})],1)},Dt=[],Pt={name:"TripCompletedDropdown",components:{TDropdownItem:bt["default"]},props:{statusForced:{type:Boolean,default:!1},statusForcedBySystem:{type:Boolean,default:!1},refundStatus:{type:Boolean,default:!1},penalizedStatus:{type:Boolean,default:!1}},computed:{getText:function(){return this.statusForced&&this.statusForcedBySystem?"Trip Completed":this.statusForced&&!1===this.statusForcedBySystem?"Force Completed":"Trip Completed"},getVariant:function(){return this.statusForced&&this.statusForcedBySystem?"bg-green-500 text-white":this.statusForced&&!1===this.statusForcedBySystem?"red":"green"}}},Ft=Pt,Mt=(i("d81a"),Object(p["a"])(Ft,At,Dt,!1,null,"64e1c268",null)),$t=Mt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("t-dropdown",{attrs:{variant:"smActions"},scopedSlots:t._u([{key:"trigger",fn:function(e){var i=e.mousedownHandler,s=e.focusHandler,n=e.blurHandler,r=e.keydownHandler;return[a("button",{staticClass:"vld-parent trip-status-pill-button purple focus:outline-none",staticStyle:{height:"35px",width:"170px"},attrs:{"aria-label":"On Rent Dropdown","aria-haspopup":"true"},on:{mousedown:i,focus:s,blur:n,keydown:r}},[t.isLoading?a("loading",{attrs:{height:25,opacity:0,color:"#fff",active:!0,loader:"bars","is-full-page":!1}}):[a("span",[t._v(t._s(t.$t("components.tripManagement.details.headline.onTrip")))]),t.$acl.canUpdate("trips")?[a("i",{staticClass:"fas fa-chevron-down"})]:t._e()]],2)]}},{key:"default",fn:function(e){var i=e.hide;return[t.$acl.canUpdate("trips")?a("div",{staticClass:"py-1 mt-1 bg-white rounded-md shadow-md",on:{click:function(t){return i()}}},[a("t-dropdown-item",{on:{click:function(e){return t.onTripAction({tripId:t.tripId,action:"open"})}}},[t._v(" "+t._s(t.$t("components.tripManagement.actions.forceComplete"))+" ")])],1):t._e()]}}],null,!1,1232206589)}),a("EdgeStack",{attrs:{id:t.tripAction.esId,busy:t.tripAction.busy,"exit-button":{text:"Cancel",hidden:!0},"footer-class":{fixed:"flex justify-end items-center px-6 pt-2 pb-5 w-full h-auto",append:""},debug:!0},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"text-xl font-bold"},[t._v(t._s(t.tripAction.title))])]},proxy:!0},{key:"footer",fn:function(e){var i=e.close;return[a("div",{staticClass:"flex gap-5 items-center"},[a("AppButton",{attrs:{text:"Cancel",variant:"secondary"},on:{click:function(t){return i()}}}),a("AppButton",{attrs:{text:"Confirm","is-loading":t.tripAction.processing},on:{click:function(e){return t.onTripAction({tripId:t.tripAction.primaryKey,action:"execute"})}}})],1)]}},{key:"default",fn:function(){return[a("div",{staticClass:"flex items-center px-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex justify-center items-center w-9 h-9 bg-gray-200 rounded-full"},[a("img",{staticClass:"object-contain w-9 h-9 rounded-full",attrs:{src:t.tripAction.data.user.profile_pic}})])]),a("div",{staticClass:"flex justify-between items-center py-4 w-full border-b"},[a("div",[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s(t.tripAction.data.user.full_name)}}),a("h6",{staticClass:"text-sm tracking-wide",staticStyle:{color:"#797979"},domProps:{textContent:t._s("UserID: "+t.$truncate(t.tripAction.data.user.id,-5))}})]),a("div",{staticClass:"text-right text-blue-600",domProps:{textContent:t._s("TripID: "+t.$truncate(t.tripAction.primaryKey,-5))}})])]),a("div",{staticClass:"flex items-center px-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex justify-center items-center w-9 h-9 rounded-full"},[a("img",{attrs:{src:i("6211")}})])]),a("div",{staticClass:"flex justify-between items-center py-4 w-full border-b"},[a("div",[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s("Forcibly lock vehicle")}}),a("h6",{staticClass:"text-sm tracking-wide",staticStyle:{color:"#797979"},domProps:{textContent:t._s("If you select YES then System will lock the vehicle Forcefully.")}})]),a("div",{staticClass:"flex items-center"},[a("p",{staticClass:"w-8 text-sm text-oDark",domProps:{textContent:t._s(t.tripAction.models.trigger_lock?"Yes":"No")}}),a("TToggle",{attrs:{variant:"success"},model:{value:t.tripAction.models.trigger_lock,callback:function(e){t.$set(t.tripAction.models,"trigger_lock",e)},expression:"tripAction.models.trigger_lock"}})],1)])]),a("div",{staticClass:"flex items-center px-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex justify-center items-center w-9 h-9 rounded-full"},[a("img",{attrs:{src:i("c156")}})])]),a("div",{staticClass:"flex justify-between items-center py-4 w-full border-b"},[a("div",[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s("Trigger payment for rider")}}),a("h6",{staticClass:"text-sm tracking-wide",staticStyle:{color:"#797979"},domProps:{textContent:t._s("If you select Yes then Rider will be charged manually.")}})]),a("div",{staticClass:"flex items-center"},[a("p",{staticClass:"w-8 text-sm text-oDark",domProps:{textContent:t._s(t.tripAction.models.trigger_payment?"Yes":"No")}}),a("TToggle",{attrs:{variant:"success"},model:{value:t.tripAction.models.trigger_payment,callback:function(e){t.$set(t.tripAction.models,"trigger_payment",e)},expression:"tripAction.models.trigger_payment"}})],1)])]),t.tripAction.models.trigger_payment?a("div",{staticClass:"flex justify-end px-2 my-2"},[a("div",{staticClass:"py-4 max-w-md bg-gray-200 rounded-md border",staticStyle:{"min-width":"350px",background:"#F3F3F3"}},[a("section",{staticClass:"flex gap-4 justify-between items-center px-4"},[a("div",{staticClass:"-mt-6"},[t._v("Trip Duration (mins)")]),a("div",{staticClass:"w-24"},[a("AppInput",{attrs:{type:"number"},model:{value:t.tripAction.models.riding_time_min,callback:function(e){t.$set(t.tripAction.models,"riding_time_min",e)},expression:"tripAction.models.riding_time_min"}})],1)]),t.tripAction.data.was_paused?a("section",{staticClass:"flex items-center justify-between gap-4 px-4"},[a("div",{staticClass:"-mt-6"},[t._v("Pause Time Duration (mins)")]),a("div",{staticClass:"w-24"},[a("AppInput",{attrs:{type:"number"},model:{value:t.tripAction.models.pause_time_min,callback:function(e){t.$set(t.tripAction.models,"pause_time_min",e)},expression:"tripAction.models.pause_time_min"}})],1)]):t._e(),a("section",{staticClass:"py-2 border-t border-gray-300"},[t.getTripActionCharges.reservation_fees>0?a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Reservation Fee ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.reservation_fees)+" ")])]):t._e(),a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Unlock Fee ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.vehicle_unlock_fees)+" ")])]),a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Trip Duration Fee ("+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.default_fees_per_minute)+" x "+t._s(t.tripAction.models.riding_time_min)+" mins) ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.trip_amount)+" ")])]),t.tripAction.data.was_paused?a("div",{staticClass:"flex items-center justify-between px-4 py-1"},[a("div",{staticClass:"w-full"},[t._v(" Pause Duration Fee ("+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.pause_default_unit_fees)+" x "+t._s(t.tripAction.models.pause_time_min)+" mins) ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.pause_amount)+" ")])]):t._e(),a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Discount ")]),a("div",{staticClass:"w-12 text-oGreen"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.discount_data)+" ")])])]),a("section",{staticClass:"py-2 border-t border-gray-300"},[a("div",{staticClass:"flex justify-between items-center py-1 px-4"},[a("div",{staticClass:"w-full"},[t._v(" Subtotal ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.sub_total_amount)+" ")])]),a("div",{staticClass:"flex items-center justify-between px-4 py-1"},[t.getTripActionCharges.tax_plan?a("div",{staticClass:"w-full"},[t._v(" Vat ("+t._s(Number(t.getTripActionCharges.tax_plan.percentage))+"%) ")]):a("div",{staticClass:"w-full"},[t._v(" Vat (0%) ")]),a("div",{staticClass:"w-12"},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.vat_amount)+" ")])])]),a("section",{staticClass:"pt-3 border-t border-gray-300"},[a("div",{staticClass:"flex justify-between items-center px-4"},[a("div",[t._v(" Total ")]),a("div",{staticClass:" text-3xl "},[t._v(" "+t._s(t.getTripActionCharges.currency_symbol+t.getTripActionCharges.total_amount)+" ")])])])])]):t._e(),a("div",{staticClass:"flex px-3 py-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex items-center justify-center rounded-full w-9 h-9"},[a("img",{attrs:{src:i("689c")}})])]),a("div",{staticClass:"w-full"},[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s("Reason (Required)")}}),a("AppInput",{attrs:{type:"richselect",rules:"required",name:"reason",placeholder:"Select a reason","value-attribute":"value","text-attribute":"text",options:t.forceCompleteReason,"hide-search-box":""},model:{value:t.tripAction.models.force_complete_reason,callback:function(e){t.$set(t.tripAction.models,"force_complete_reason",e)},expression:"tripAction.models.force_complete_reason"}})],1)]),a("div",{staticClass:"flex px-3 py-3"},[a("div",{staticClass:"w-14"},[a("div",{staticClass:"flex items-center justify-center rounded-full w-9 h-9"},[a("img",{attrs:{src:i("689c")}})])]),a("div",{staticClass:"w-full"},[a("h5",{staticClass:"text-base text-black",domProps:{textContent:t._s("Remarks (Required)")}}),a("AppInput",{attrs:{type:"textarea"},model:{value:t.tripAction.models.remarks,callback:function(e){t.$set(t.tripAction.models,"remarks",e)},expression:"tripAction.models.remarks"}})],1)])]},proxy:!0}])})],1)},It=[],Et=(i("a9e3"),i("9ce0")),Lt=i("f2f7"),Vt={name:"TripCompletedDropdown",components:{EdgeStack:vt["a"],TDropdownItem:bt["default"],TripStatusPillButton:St["a"]},props:{tripId:{type:[String,Number],required:!0}},data:function(){return{isLoading:!1,status:"O",tripAction:{busy:!1,esId:"tripActionESD",title:"Force Complete Trip",primaryKey:"",processing:!1,models:{trigger_lock:!0,trigger_payment:!0,riding_time_min:0,pause_time_min:0,force_complete_reason:"",remarks:""},data:{from_lock_log:!1,latest_lock_log:{},riding_time_mins:0,user:{id:"--",full_name:"--",role_name:"--",profile_pic:"https://via.placeholder.com/150"},pricing_info:{id:"--",bike_category:"-",currency_symbol:"~",vehicle_reservation_fees:0,vehicle_unlock_fees:0,default_fees_per_minute:0,max_billing_per_ride:0,discount_data:0}}},forceCompleteReason:[{text:"Vehicle Locking Issue",value:"VEHICLE_LOCKING_ISSUE"},{text:"Vehicle Battery Died",value:"VEHICLE_BATTERY_DIED"},{text:"Vehicle Inactive",value:"VEHICLE_INACTIVE"},{text:"App Issues",value:"APP_ISSUES"},{text:"Other",value:"OTHER"}]}},computed:{getStatusText:function(){return Object(Lt["b"])(Lt["b"])},getTripActionCharges:function(){var t=this.tripAction.data.pricing_info,e=this.tripAction.models.riding_time_min,i=this.tripAction.models.pause_time_min,a=Number(this.tripAction.data.reservation_charge).toFixed(2)||Number(0).toFixed(2);t.vehicle_unlock_fees=Number(t.vehicle_unlock_fees).toFixed(2)||Number(0).toFixed(2),t.discount_data=Number(t.discount_data).toFixed(2)||Number(0).toFixed(2);var s=Number(t.default_fees_per_minute)*Number(e),n=Number(s).toFixed(2),o=Number(t.pause_default_unit_fees)*Number(i),l=Number(o).toFixed(2),c=(Number(n)+Number(l)+Number(a)+Number(t.vehicle_unlock_fees)-Number(t.discount_data)).toFixed(2),d=0;t.tax_plan&&t.tax_plan.percentage&&(d=(Number(c)*(Number(t.tax_plan.percentage)/100)).toFixed(2));var u=(Number(c)+Number(d)).toFixed(2);return console.log("vat_amount",d,u),Object(r["a"])(Object(r["a"])({},t),{},{reservation_fees:a,trip_amount:n,pause_amount:l,sub_total_amount:c,vat_amount:d,total_amount:u})}},methods:{executeAction:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a="",s="",n="","complete"===t?(a="Trip Ended",s="The Trip is marked as completed",n=Et["a"].api.actions.complete(e.tripId)):"cancel"===t&&(a="Trip Cancelled",s="The trip is marked as cancelled",n=Et["a"].api.actions.cancel(e.tripId)),e.isLoading=!0,i.next=7,e.$http.post(n).then((function(){"complete"===t?e.status="C":"cancel"===t&&(e.status="A"),e.$store.dispatch("lastTrip/saveStatus",e.status),e.$notify({group:"generic",type:"success",title:a,text:s},3e3)})).catch((function(t){e.$notify({group:"generic",type:"error",title:"Error",text:"Action failed to execute [ERR:".concat(t.response.status,"]")},3e3)})).finally((function(){e.isLoading=!1}));case 7:return i.abrupt("return",!0);case 8:case"end":return i.stop()}}),i)})))()},onTripAction:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s,n,r,o,l,c,d,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:{},s=a.tripId,n=void 0===s?null:s,r=a.action,o=void 0===r?"open":r,e.tripAction.primaryKey=n,console.log("onTripAction",n,o),"open"!==o){i.next=10;break}return l="/dashboard/trips/".concat(n,"/complete-preload/"),e.tripAction.busy=!0,e.$edgeStack.open(e.tripAction.esId),i.next=9,e.$http.get(l).then((function(t){console.log("preLoadRes",t.data),e.tripAction.data=t.data,e.tripAction.models.riding_time_min=t.data.riding_time_mins,e.tripAction.models.pause_time_min=t.data.pause_time_mins})).catch((function(t){console.warn("tripActionPreloadErr",t,t.response)})).finally((function(){e.tripAction.busy=!1}));case 9:return i.abrupt("return");case 10:if("close"!==o){i.next=13;break}return e.$edgeStack.close(e.tripAction.esId),i.abrupt("return");case 13:if("execute"!==o){i.next=20;break}return e.tripAction.processing=!0,c="/dashboard/trips/".concat(n,"/complete/"),d=e.tripAction.models,u=new xt["x"](d).toFormData(),i.next=20,e.$http.post(c,u).then((function(t){var i,a;console.log(t.data),e.$notify({group:"bottomLeft",type:"success",title:"Force Complete Trip",text:null!==(i=null===(a=t.data)||void 0===a?void 0:a.detail)&&void 0!==i?i:"Successfully completed the action."}),e.$emit("force-completed"),e.onTripAction({action:"close"}),e.$store.dispatch("lastTrip/saveStatus",e.status)})).catch((function(t){var i,a,s,n;e.$notify({group:"bottomLeft",type:"error",title:"Failed Action [Code: ".concat(null===t||void 0===t||null===(i=t.response)||void 0===i?void 0:i.status,"]"),text:null!==(a=null===(s=t.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)&&void 0!==a?a:"Failed to execute force complete."},7e3),console.log("tripActionErr",t,t.data)})).finally((function(){e.tripAction.processing=!1}));case 20:case"end":return i.stop()}}),i)})))()}}},Rt=Vt,jt=(i("6959"),Object(p["a"])(Rt,Ot,It,!1,null,"6c03b5d8",null)),Bt=jt.exports,Nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mb-3"},[i("section",{staticClass:"w-full px-6 py-3 bg-white rounded-md shadow text-center"},[i("div",{staticClass:"flex items-center justify-center"},[i("div",{staticClass:"tab-items"},t._l(t.tabs,(function(e){return i("div",{key:"tab-item-"+e.id,class:t.getTabClass(e.id),domProps:{textContent:t._s(e.text)},on:{click:function(i){return t.onClickTab(e.id)}}})})),0)])]),"trip"===t.activeTabId?i("TimelineGroup",{attrs:{isLoading:t.isLoading,logs:t.logs,"timeline-type":"trip"}}):t._e(),"iot"===t.activeTabId?i("IotLogTimeline",{attrs:{endpoint:t.getIotlogEndpoint}}):t._e()],1)},Ht=[],qt=i("e972"),Ut=i("43e4"),zt={name:"TimelineHOC",props:{tripDetail:{type:Object,required:!0}},components:{TimelineGroup:qt["a"],IotLogTimeline:Ut["a"]},data:function(){return{isLoading:!1,logs:[],tabs:[{id:"trip",text:this.$t("components.tripManagement.details.tripTimeline.tab.trip")},{id:"iot",text:this.$t("components.tripManagement.details.tripTimeline.tab.iot")}],activeTabId:"trip"}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchLogs(t.activeTabId);case 2:case"end":return e.stop()}}),e)})))()},computed:{getIotlogEndpoint:function(){return"".concat(st["c"].vehicle.iotLogs.all(this.tripDetail.bike.id),"?start_date=").concat(this.getUTCDate(this.tripDetail.pick_up_time),"&end_date=").concat(this.getUTCDate(this.tripDetail.drop_off_time),"&start_time=").concat(this.getUTCTime(this.tripDetail.pick_up_time),"&end_time=").concat(this.getUTCTime(this.tripDetail.drop_off_time))}},methods:{getTabClass:function(t){return{"tab-item":!0,"tab-item--active":this.activeTabId===t}},onClickTab:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.activeTabId=t,"trip"!==e.activeTabId){i.next=4;break}return i.next=4,e.fetchLogs(e.activeTabId);case 4:case"end":return i.stop()}}),i)})))()},getStandardNumber:function(t){return t<10?"0".concat(t):t},getUTCDate:function(t){var e=t?new Date(t):new Date;return"".concat(e.getUTCFullYear(),"-").concat(this.getStandardNumber(e.getUTCMonth()+1),"-").concat(this.getStandardNumber(e.getUTCDate()))},getUTCTime:function(t){var e=t?new Date(t):new Date;return"".concat(this.getStandardNumber(e.getUTCHours()),":").concat(this.getStandardNumber(e.getUTCMinutes()),":").concat(this.getStandardNumber(e.getUTCSeconds()))},fetchLogs:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.isLoading=!0,"trip"===t&&(a=st["c"].trip.tripRequestLogs(e.tripDetail.id)),i.next=4,e.$http.get(a).then((function(t){console.log("fetchLogs res = ",t.data),e.logs=t.data.data})).catch((function(t){console.error("fetchLogs err = ",t,t.response.data)})).finally((function(){return e.isLoading=!1}));case 4:case"end":return i.stop()}}),i)})))()}}},Yt=zt,Gt=(i("79c9"),Object(p["a"])(Yt,Nt,Ht,!1,null,"d96bf60e",null)),Wt=Gt.exports,Qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("t-modal",{ref:"popup",attrs:{name:"pauseHistoryModal",variant:"2xl",hideCloseButton:!0,disableBodyScroll:!0}},[i("div",{staticClass:"px-3 py-4"},[i("div",[i("h3",{staticClass:"text-xl text-gray-400 font-medium"},[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pauseHistory.totalPauseDuration"))+" : ")]),i("h1",{staticClass:"text-2xl text-blue-500 font-semibold"},[t._v(" "+t._s(t.getDuration(t.tripDetail.pause_time_secs_till_now))+" ")])]),i("div",{staticClass:"mt-5"},[i("div",{staticClass:"grid grid-cols-3"},[i("div",{staticClass:"bg-gray-100 border border-gray-200 p-2 font-semibold"},[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pauseHistory.pausedAt"))+" ")]),i("div",{staticClass:"bg-gray-100 border border-gray-200 p-2 font-semibold"},[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pauseHistory.unpausedAt"))+" ")]),i("div",{staticClass:"bg-gray-100 border border-gray-200 p-2 font-semibold"},[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pauseHistory.duration"))+" ")])]),t._l(t.tripDetail.pause_entries,(function(e,a){return i("div",{key:"pause-history-"+a,staticClass:"grid grid-cols-3 history-container"},[i("div",{staticClass:" border border-gray-200 p-2 "},[i("span",{staticClass:"text-gray-900 font-medium"},[t._v(t._s(t.getTime(e.start_time)))]),i("br"),i("span",{staticClass:"text-gray-600"},[t._v(t._s(t.getDate(e.start_time)))])]),i("div",{staticClass:"border border-gray-200 p-2 "},[i("span",{staticClass:"text-gray-900 font-medium"},[t._v(t._s(t.getTime(e.end_time)))]),i("br"),i("span",{staticClass:"text-gray-600"},[t._v(t._s(t.getDate(e.end_time)))])]),i("div",{staticClass:"border border-gray-200 p-2"},[e.duration_secs>0?i("span",[t._v(t._s(t.getDuration(e.duration_secs)))]):i("span",{staticClass:"text-green-600 font-semibold"},[t._v(t._s(t.getDuration(e.duration_secs)))])])])}))],2)])])},Jt=[],Kt={name:"PauseHistoryModal",props:{tripDetail:{type:Object}},methods:{getDuration:function(){if((arguments.length<=0?void 0:arguments[0])>0)return O["d"].apply(void 0,arguments);var t=this.tripDetail.pause_time_secs_till_now-this.getTotalPassedPauseDuration();return Object(O["d"])(t)},getTotalPassedPauseDuration:function(){var t=this.tripDetail.pause_entries.filter((function(t){return null!==t.end_time})),e=t.reduce((function(t,e){return t+e.duration_secs}),0);return console.log("totalPassedPauseDuration",this.tripDetail.pause_time_secs_till_now-e),e},getTime:function(t){return this.$UTCAwareTime(t,{format:"hh:mm:ss a"})},getDate:function(t){return Object(O["c"])(t,"D MMM, YYYY")}}},Zt=Kt,Xt=(i("fe18"),Object(p["a"])(Zt,Qt,Jt,!1,null,null,null)),te=Xt.exports,ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("t-modal",{ref:"popup",attrs:{name:"pricingPlanHistoryModal",variant:"lg",hideCloseButton:!0,disableBodyScroll:!0}},[i("div",{staticClass:"px-5 py-4"},[i("div",{staticClass:"item"},[i("div",[i("p",{staticClass:"font-bold text-xl text-blue-600 capitalize cursor-pointer",on:{click:t.showPricingPlan}},[t._v(" "+t._s(t.tripDetail.pricing_plan.name)+" ")]),i("p",{staticClass:"text-sm text-gray-500"},[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.pricingPlan"))+" ")])]),i("div",[i("p",{staticClass:"font-bold text-xl "},[i("RouterLink",{staticClass:"text-blue-600 capitalize",attrs:{to:{name:"ViewFleetProfile",params:{id:t.tripDetail.pricing_plan.fleet.id}},target:"_blank"}},[t._v(" "+t._s(t.tripDetail.pricing_plan.fleet.name)+" ")])],1),i("p",{staticClass:"text-sm text-gray-500"},[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.fleet"))+" ")])])]),i("hr",{staticClass:"my-2"}),i("div",[i("h2",{staticClass:"title"},[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.pricing"))+" : ")]),i("div",[t.isDiscountApplied?i("div",[i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.unlockCharge"))+" : ")]),i("p",[t.getFloatValue(t.tripDetail.unlock_charge)<t.getFloatValue(t.tripDetail.original_unlock_cost)?i("span",{staticClass:"text-gray-500 mr-3"},[i("del",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.original_unlock_cost)))])]):t._e(),i("span",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.unlock_charge)))])])])]):i("div",[i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.unlockCharge"))+" : ")]),i("p",[i("span",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.unlock_charge)))])])])])]),t.tripDetail.is_reservation_trip?i("div",[t.isDiscountApplied?i("div",[i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.reservationCharge"))+" : ")]),i("p",[t.getFloatValue(t.tripDetail.reservation_charge)<t.getFloatValue(t.tripDetail.original_reservation_cost)?i("span",{staticClass:"text-gray-500 mr-3"},[i("del",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.original_reservation_cost)))])]):t._e(),i("span",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.reservation_charge)))])])])]):i("div",[i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.reservationCharge"))+" : ")]),i("p",[i("span",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.reservation_charge)))])])])])]):t._e(),i("div",[t.isDiscountApplied&&null!==t.tripDetail.discounted_rate_per_minute?i("div",[i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.perMinuteCharge"))+" : ")]),i("p",[t.getFloatValue(t.tripDetail.discounted_rate_per_minute)<t.getFloatValue(t.tripDetail.rate_per_minute)?i("span",{staticClass:"text-gray-500 mr-3"},[i("del",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.rate_per_minute)))])]):t._e(),i("span",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.discounted_rate_per_minute)))])])])]):i("div",[i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.perMinuteCharge"))+" : ")]),i("p",[i("span",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.rate_per_minute)))])])])])]),i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.firstUnitFee"))+" : ")]),i("p",[i("span",[t._v(t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.first_unit_fees)))])])]),t.getFloatValue(t.tripDetail.default_unit_fees)>0?i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.defaultUnitFees"))+" : ")]),i("p",[t._v(" "+t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.default_unit_fees))+" ")])]):t._e(),t.getFloatValue(t.tripDetail.pause_cost)>0?i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.pauseRideCharge"))+" : ")]),i("p",[t._v(" "+t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.pause_cost))+" ")])]):t._e()]),t.haveAnyLimit?i("div",[i("h2",{staticClass:"title"},[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.limit"))+" : ")]),t.getFloatValue(t.tripDetail.max_billing_amount)>0?i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.maxBillingPerRide"))+" : ")]),i("p",[t._v(" "+t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.max_billing_amount))+" ")])]):t._e(),t.getFloatValue(t.tripDetail.pre_auth_hold_amount)>0?i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.preAuthorizedHoldAmount"))+" : ")]),i("p",[t._v(" "+t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.pre_auth_hold_amount))+" ")])]):t._e(),t.getFloatValue(t.tripDetail.pre_auth_captured_amount)>0?i("div",{staticClass:"item"},[i("p",[t._v(" "+t._s(t.$t("components.tripManagement.details.modals.pricingPlanHistory.preAuthorizedCaptureAmount"))+" : ")]),i("p",[t._v(" "+t._s(t.getCurrencySymbol)+t._s(t.getFloatValue(t.tripDetail.pre_auth_captured_amount))+" ")])]):t._e()]):t._e()])])},ie=[],ae={name:"PricingPlanHistoryModal",props:{tripDetail:{type:Object}},computed:Object(r["a"])(Object(r["a"])({},Object(Tt["b"])("auth",["organizationInfo"])),{},{getCurrencySymbol:function(){var t,e;return(null===(t=this.organizationInfo)||void 0===t||null===(e=t.default_currency)||void 0===e?void 0:e.symbol)||"$"},isDiscountApplied:function(){return!!(this.tripDetail.promo_applied||this.tripDetail.voucher_applied||this.tripDetail.pass_applied)},haveAnyLimit:function(){return this.getFloatValue(this.tripDetail.max_billing_amount)>0||this.getFloatValue(this.tripDetail.pre_auth_hold_amount)>0||this.getFloatValue(this.tripDetail.pre_auth_captured_amount)>0}}),methods:{getFloatValue:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},showPricingPlan:function(){this.$emit("showPricingPlan",this.tripDetail.pricing_plan.id)}}},se=ae,ne=(i("6b83"),Object(p["a"])(se,ee,ie,!1,null,null,null)),re=ne.exports,oe=i("8a12"),le=i("4a9d"),ce=i("99e4"),de={components:{TripGoogleMapView:j,TripCostView:G,TripPointView:X,TripNoteView:lt,TripTagView:gt,TripStatusPillButton:St["a"],TripCompletedBlock:$t,OnTripBlock:Bt,AddEditBillingPlan:oe["a"],DisplayAvatar:function(){return Promise.resolve().then(i.bind(null,"09b2"))},ReportBlock:function(){return Promise.all([i.e("chunk-2d0c8619"),i.e("chunk-0fd09b0b")]).then(i.bind(null,"dd44"))},TripTimeline:Wt,BatteryStatus:function(){return i.e("chunk-56449a02").then(i.bind(null,"affe"))},TripFlagIcon:function(){return i.e("chunk-62899987").then(i.bind(null,"19f6"))},TripDurationDropdown:kt,PauseHistoryModal:te,PricingPlanHistoryModal:re},props:{tripDetail:{required:!1,default:null}},computed:Object(r["a"])(Object(r["a"])({},Object(Tt["b"])("auth",["organizationInfo"])),{},{getInvoiceId:function(){var t,e;return this.$truncate(null===(t=this.tripDetail)||void 0===t||null===(e=t.invoice)||void 0===e?void 0:e.id,-5,"#")||"--"},getVehicleTypes:function(){var t,e=[],i=(null===this||void 0===this||null===(t=this.$org)||void 0===t?void 0:t.vehicle_type)||[];return i.forEach((function(t){return e.push(xt["w"][t])})),e},getInvoiceDate:function(){var t,e,i,a;return null!==(t=this.tripDetail)&&void 0!==t&&null!==(e=t.invoice)&&void 0!==e&&e.date?Object(O["c"])(null===(i=this.tripDetail)||void 0===i||null===(a=i.invoice)||void 0===a?void 0:a.date,"D MMM h:m:ss a"):"--"},lastTripStatus:function(){return this.$store.getters["lastTrip/getStatus"]},tripIsOnRide:function(){return"O"===this.tripDetail.status},isRefunded:function(){var t,e,i;return(null===(t=this.tripDetail)||void 0===t?void 0:t.invoice)&&(null===(e=this.tripDetail)||void 0===e||null===(i=e.invoice)||void 0===i?void 0:i.is_refunded)},isPenalized:function(){return this.tripDetail.penalties.length>0}}),data:function(){return{onTripDurationStr:null,vehicleTypes:[],statuses:{R:"Reserved",A:"Cancelled",U:"Starting",O:"On Rent",V:"Forced",C:"Completed",T:"Time Out"},symbol:"$",intervalid:null,pauseIntervalid:null,sockListener:null,onTripStatusText:"On Rent",onTripStatusVariant:"purple",renderOnTripStatus:!0}},mounted:function(){this.symbol=this.organizationInfo.default_currency?this.organizationInfo.default_currency.symbol:"$",console.log("symbol = ",this.symbol),"O"===this.tripDetail.status&&(console.log("Starting Bike Noti Listener"),this.startListener(),this.tripDetail.is_paused?(this.onTripStatusText=this.$t("components.tripManagement.details.map.onPause"),this.onTripStatusVariant="yellow"):(this.onTripStatusText=this.$t("components.tripManagement.details.map.onTrip"),this.onTripStatusVariant="purple"))},beforeDestroy:function(){this.removeListener(),this.removeOnTripTimer()},methods:{showPricingPlan:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log("showPricingPlan",t),i.next=3,e.$http.get(ce["a"].api.details(t)).then((function(t){return t.data})).catch((function(t){return console.log(t)}));case 3:a=i.sent,a.tax_plan=a.tax_plan?a.tax_plan.id:null,a.existing_fleet=a.fleet,a.fleet=a.fleet?a.fleet.id:null,console.log("Morphed...",a),le["a"].$emit(ce["a"].events.editingData,a),dispatchEvent(new Event(ce["a"].events.sorToggle));case 10:case"end":return i.stop()}}),i)})))()},getFlagAlias:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={was_paused:"Vehicle was paused",legally_parked:"Vehicle was legally Parked",illegally_parked:"Vehicle was illegally Parked",good_rated:"Good Rating",bad_rated:"Bad Rating",inside_service_area:"Inside Service Area",outside_service_area:"Outside Service Area",restricted_area:"Inside Restricted Area",slowzone_area:"Inside Slowzone Area",voucher_applied:"Voucher Applied",promo_applied:"Promo Applied",pass_applied:"Pass Applied",rider_balance_negative:"Rider Balance Negative",trigger_payment_applied:"Triggered ".concat(e.trigger_payment_status&&"".concat(this.getTriggerStatus(e.trigger_payment_status))),trigger_payment_failed:"Triggered ".concat(e.trigger_payment_status&&"".concat(this.getTriggerStatus(e.trigger_payment_status))),refunded:"Rider Balance was Refunded"};return t in i?i[t]:"--"},getTriggerStatus:function(t){var e="Status: ";return"I"===t&&(e=e.concat("Initiated")),"S"===t&&(e=e.concat("Succeeded")),"IF"===t&&(e=e.concat("Initiation Failed")),"FF"===t&&(e=e.concat("Finalization Failed")),e},getFlags:function(t){var e=[];return!0===t.received_good_feedback&&e.push("good_rated"),!1===t.received_good_feedback&&e.push("bad_rated"),!0===t.vehicle_was_legally_parked&&e.push("legally_parked"),!1===t.vehicle_was_legally_parked&&e.push("illegally_parked"),!0===t.went_outside_geofence&&e.push("outside_service_area"),!1===t.went_outside_geofence&&e.push("inside_service_area"),!0===t.went_inside_restricted_area&&e.push("restricted_area"),!0===t.went_inside_slowzone_area&&e.push("slowzone_area"),!0===t.was_paused&&e.push("was_paused"),!0===t.voucher_applied&&e.push("voucher_applied"),!0===t.promo_applied&&e.push("promo_applied"),!0===t.pass_applied&&e.push("pass_applied"),!0===t.rider_balance_negative&&e.push("rider_balance_negative"),!0===t.rider_balance_negative&&!0===t.triggered_negative_balance_resolution&&("IF"===t.trigger_payment_status||"FF"===t.trigger_payment_status?e.push("trigger_payment_failed"):e.push("trigger_payment_applied")),!0===t.invoice.is_refunded&&e.push("refunded"),e},onPauseHistoryModalReq:function(){this.$modal.show("pauseHistoryModal")},getIsOnRideStatus:function(t){return"O"===t},getEndBatteryLevel:function(t){var e=t.bike,i=t.end_power_level;return!e||i&&"C"===t.status||(i=e.battery_charge),i=parseInt(i,10),i},getBatteryLine:function(t){var e=t.bike,i=t.end_power_level,a=t.start_power_level;return!e||i&&"C"===t.status||(i=e.battery_charge),a=a?parseInt(a,10):0,i=parseInt(i,10),"".concat(a," -> ").concat(i,"%")},getDuration:function(){return O["d"].apply(void 0,arguments)},removeOnTripTimer:function(){this.intervalid&&clearInterval(this.intervalid),this.pauseIntervalid&&clearInterval(this.pauseIntervalid)},startListener:function(){var t=localStorage.getItem("token")||null;if(t){var e=$["a"].baseUrl+$["a"].channels.bikeNotifications+"?token=".concat(t);this.sockListener=this.sockListener?this.sockListener:new M.a(e,null,$["a"].configs()),this.sockListener.onopen=function(){console.log("Opened Noti Connection...")},this.sockListener.onclose=function(){console.log("Closed Noti Connection...")},this.sockListener.onmessage=this.onMessageHandler}},removeListener:function(){this.sockListener&&(this.sockListener.close(4003,"oto system closed the socket as the was closed"),this.sockListener=null)},onTripStatusforceRerender:function(){var t=this;this.renderOnTripStatus=!1,this.$nextTick((function(){t.renderOnTripStatus=!0}))},onMessageHandler:function(t){console.log("Incoming --\x3e ",t);var e=JSON.parse(t.data);if("noti.bike_noti"===e.n_type){var i=e.bike_id;if(i&&this.tripDetail.bike.id===i&&(console.log("Incoming data for bike ".concat(i," : data --\x3e"),e.data),"trip_paused"in e.data)){var a=e.data.trip_paused;this.tripDetail.is_paused=a,a?(this.onTripStatusText=this.$t("components.tripManagement.details.map.onPause"),this.onTripStatusVariant="yellow"):(this.onTripStatusText=this.$t("components.tripManagement.details.map.onTrip"),this.onTripStatusVariant="purple"),this.onTripStatusforceRerender()}}},goBack:function(){this.$router.push("/trips")},getCalculatedTimerStartTime:function(){var t=this.tripDetail.status;return"O"==t?new Date(this.tripDetail.pick_up_time):"R"==t?new Date(this.tripDetail.reservation_start_time):null},getTimerStr:function(t){var e=new Date,i=e-t,a=Math.abs(i)/1e3,s=Math.floor(a/86400);a-=86400*s;var n=Math.floor(a/3600)%24;a-=3600*n;var r=Math.floor(a/60)%60;a-=60*r;var o=Math.floor(a%60),l="";return s>0&&(l+="".concat(s," d ")),n>0&&(l+="".concat(n," h ")),r>0&&(l+="".concat(r," m ")),o>0&&(l+="".concat(o," s")),l},refreshPauseTimer:function(t){if(t.start_time){var e=this.getTimerStr(new Date(t.start_time));this.$refs.pauseDuration.innerHTML="".concat(e)}}}},ue=de,pe=(i("62c9"),Object(p["a"])(ue,a,s,!1,null,"2d605d34",null));e["default"]=pe.exports},"14a4":function(t,e,i){},1524:function(t,e,i){t.exports=i.p+"assets/pause_ride.de868704.svg"},1869:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.getTripStatusClass},[i("span",[t._v(t._s(t.getTripStatusText(t.status)))]),i("i",{class:t.icon})])},s=[],n=(i("caad"),i("f2f7")),r={name:"TripCondition",components:{},props:{status:{type:String,required:!0,validaotor:function(t){var e=["R","A","U","O","V","C","T","UF"];return e.includes(t)}},icon:{type:String,required:!1}},computed:{getTripStatusClass:function(){var t=this.getTripStatusColor(this.status);return"trip-status-pill-button ".concat(t)}},methods:{getTripStatusColor:n["a"],getTripStatusText:n["b"]}},o=r,l=(i("73e5"),i("2877")),c=Object(l["a"])(o,a,s,!1,null,"191c754b",null);e["a"]=c.exports},"1b63":function(t,e,i){},"1dd0":function(t,e,i){},"1f24":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-full overflow-x-auto overflow-y-hidden"},[i("div",{staticClass:"flex flex-wrap tabs-inner-wrapper mt-1"},t._l(t.items,(function(e,a){return i("div",{key:"tab-"+a,class:{"tab-item px-4 py-4 cursor-pointer font-bold uppercase":!0,"text-gray-500":!e.isActive,"text-oDark tab-item-active":e.isActive},on:{click:function(i){return t.onTabClick(e)}}},[t._v(" "+t._s(e.title)+" ")])})),0)])},s=[],n={name:"Tabs",components:{},props:{items:{type:Array,required:!0}},methods:{onTabClick:function(t){t.isActive||this.$emit("tabChange",t.id)}}},r=n,o=(i("40da"),i("2877")),l=Object(o["a"])(r,a,s,!1,null,"034050f2",null);e["a"]=l.exports},"229c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"x-status",class:t.getVariantClass+" "+t.getProfileClass},[t._v(" "+t._s(t.text)+" ")])},s=[],n=(i("caad"),{name:"XStatus",props:{text:{required:!0,type:String},variant:{type:String,default:"green"},profile:{type:String,default:"trip"},size:{type:String,default:"small"}},computed:{getVariantClass:function(){var t=["orange","green","red","blue","yellow","light-blue","purple","gray","blush","black","alt-gray","alt-blue","alt-green","ultra-green","alt-orange","alt-red"];return t.includes(this.variant)?"variant-".concat(this.variant):"variant-orange"},getProfileClass:function(){return"profile-".concat(this.profile)}}}),r=n,o=(i("d7b0"),i("2877")),l=Object(o["a"])(r,a,s,!1,null,"3ffe2f82",null);e["default"]=l.exports},"2e59":function(t,e,i){},"2e8b":function(t,e,i){"use strict";i("c5c6")},"39c2":function(t,e,i){},"3ad8":function(t,e,i){},"3b24":function(t,e,i){},"40da":function(t,e,i){"use strict";i("6f8e")},"47b6":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex gap-2 items-start mt-3"},[i("div",{staticClass:"w-12 h-10 bg-gray-100 rounded-full"},[t.data.created_by&&t.data.created_by.avatar_url&&""!==t.data.created_by.avatar_url?i("img",{staticClass:"creator-avatar",attrs:{src:t.data.created_by.avatar_url}}):t._e()]),i("div",{staticClass:"w-full"},[i("div",[i("span",{staticClass:"text-sm font-bold"},[t._v(" "+t._s(t.data.created_by.full_name||"--")+" ")]),i("span",{staticClass:"pl-2 text-xs text-gray-500"},[t._v(" "+t._s(t.data.created_by.role_name||"--")+" ")])]),i("div",{domProps:{innerHTML:t._s(t.data.details)}}),i("small",{staticClass:"text-gray-500"},[t._v(" "+t._s(t.getTimeAgo(t.data.created_at))+" ")])]),t.deletePermission?i("div",{},[i("TDropdown",{attrs:{variant:"smActions"},scopedSlots:t._u([{key:"trigger",fn:function(t){var e=t.mousedownHandler,a=t.focusHandler,s=t.blurHandler,n=t.keydownHandler;return[i("button",{staticClass:"app-form-reset",attrs:{"aria-label":"Report Status Menu","aria-haspopup":"true"},on:{mousedown:e,focus:a,blur:s,keydown:n}},[i("i",{staticClass:"text-sm text-gray-400 fas fa-ellipsis-v"})])]}},{key:"default",fn:function(){return[i("div",{staticClass:"py-1 bg-white rounded shadow"},[i("div",{staticClass:"\n              py-2\n              px-4\n              text-sm text-red-500\n              cursor-pointer\n              hover:bg-red-100\n            ",on:{click:function(e){return t.onDelete(t.data)}}},[t._v(" Delete ")])])]},proxy:!0}],null,!1,1340244956)})],1):t._e()])},s=[],n={name:"NoteItem",props:{data:{type:Object},deletePermission:{type:Boolean,default:!0,required:!1}},methods:{getTimeAgo:function(t){return this.$dayjs(t).fromNow()},onDelete:function(t){this.$emit("delete",t)}}},r=n,o=(i("d4f5"),i("2877")),l=Object(o["a"])(r,a,s,!1,null,"019b3b8a",null);e["a"]=l.exports},"494f":function(t,e,i){"use strict";i("1b63")},"535d":function(t,e,i){"use strict";i("14a4")},"5f2e":function(t,e,i){},6211:function(t,e,i){t.exports=i.p+"assets/rewind-circle.74fb971f.svg"},"62c9":function(t,e,i){"use strict";i("a95d")},6959:function(t,e,i){"use strict";i("e1f96")},"6b83":function(t,e,i){"use strict";i("cbec")},"6f64":function(t,e,i){},"6f8e":function(t,e,i){},"73e5":function(t,e,i){"use strict";i("6f64")},"79c9":function(t,e,i){"use strict";i("d351")},"8a12":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("slide-over-right",{attrs:{id:t.sorId},on:{showModal:t.showModal},scopedSlots:t._u([{key:"header",fn:function(){return[i("div",{staticClass:"flex items-center justify-between"},[i("h2",{staticClass:"font-semibold text-gray-900 text-22px"},[t._v(" "+t._s(t.titleText)+" ")])])]},proxy:!0},{key:"footer",fn:function(){return[i("div",{staticClass:"flex items-center justify-end mt-6"},[i("slide-over-right-trigger",{attrs:{id:t.sorId}},[i("anchor-button",{attrs:{variant:"secondary"}},[t._v("Cancel")])],1),i("t-button",{staticClass:"ml-3",attrs:{type:"submit"},on:{click:function(e){return t.$refs.submitButton.click()}}},[t._v(t._s(t.actionButtonText))])],1)]},proxy:!0}])},[i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),i("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.handleSubmit;return[i("form",{staticClass:"px-6",on:{submit:function(e){return e.preventDefault(),a(t.submit)}}},[i("div",{staticClass:"flex items-center"},[i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",label:"Pricing Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("ValidationProvider",{attrs:{name:"Vehicle Type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("input-label",{attrs:{error:a[0],text:"Vehicle Type *"}}),i("t-rich-select",{attrs:{name:"options",options:t.vehicleTypes,valueAttribute:"value",textAttribute:"text",hideSearchBox:!0,variant:{danger:!!a[0]}},model:{value:t.form.bike_category,callback:function(e){t.$set(t.form,"bike_category",e)},expression:"form.bike_category"}}),i("div",{},[i("input-error-item",{attrs:{message:a[0]}})],1)]}}],null,!0)})],1)]),i("div",{staticClass:"flex items-center"},[i("div",{staticClass:"w-1/2 pl-2 mt-2"},[i("ValidationProvider",{attrs:{name:"Fleet",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("input-label",{attrs:{error:a[0],text:"Fleet *"}}),i("t-rich-select",{attrs:{name:"options",options:t.billingFleets,valueAttribute:"id",textAttribute:"name",hideSearchBox:!1,variant:{danger:!!a[0]}},model:{value:t.form.fleet,callback:function(e){t.$set(t.form,"fleet",e)},expression:"form.fleet"}}),i("div",{staticClass:"mt-4"},[i("input-error-item",{attrs:{message:a[0]}})],1)]}}],null,!0)})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("AppInput",{attrs:{rules:"",label:"Fleet Currency",value:t.selectedFleetCurrency||"Please select a fleet",disabled:""}}),i("div",{staticClass:"h-2"})],1)]),i("div",{staticClass:"flex items-center mt-2"},[i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required|between:0,1000",label:"Vehicle Reservation Price"+t.selectedFleetCurrencyFormatted},model:{value:t.form.vehicle_reservation_fees,callback:function(e){t.$set(t.form,"vehicle_reservation_fees",t._n(e))},expression:"form.vehicle_reservation_fees"}})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{type:"number",rules:"required",step:"0.01",label:"Unlock Charge"+t.selectedFleetCurrencyFormatted},model:{value:t.form.vehicle_unlock_fees,callback:function(e){t.$set(t.form,"vehicle_unlock_fees",t._n(e))},expression:"form.vehicle_unlock_fees"}})],1)]),t.rentalEnabled?i("div",{staticClass:"flex items-center mt-2"},[i("div",{staticClass:"w-full pl-2"},[i("text-input",{attrs:{rules:"required|between:0,1000",label:"Vehicle Rental Price/hour"+t.selectedFleetCurrencyFormatted},model:{value:t.form.vehicle_rental_per_hour_fees,callback:function(e){t.$set(t.form,"vehicle_rental_per_hour_fees",t._n(e))},expression:"form.vehicle_rental_per_hour_fees"}})],1)]):t._e(),i("div",{staticClass:"flex items-center pt-2 pl-2"},[i("ValidationProvider",{attrs:{vid:"tax_enabled",name:" ",rules:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("input-label",{attrs:{error:a[0],text:"Tax Plan*"}}),i("div",{staticClass:"flex"},[i("label",{staticClass:"flex items-center mt-px ml-2 cursor-pointer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.useTaxPlanField,expression:"useTaxPlanField"}],staticClass:"p-1 form-radio",attrs:{type:"radio",name:"useTaxPlanField"},domProps:{value:!0,checked:t._q(t.useTaxPlanField,!0)},on:{change:function(e){t.useTaxPlanField=!0}}}),i("span",{staticClass:"ml-2 text-sm"},[t._v("Yes")])]),i("label",{staticClass:"flex items-center mt-px ml-4 cursor-pointer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.useTaxPlanField,expression:"useTaxPlanField"}],staticClass:"p-1 form-radio",attrs:{type:"radio",name:"useTaxPlanField"},domProps:{value:!1,checked:t._q(t.useTaxPlanField,!1)},on:{change:function(e){t.useTaxPlanField=!1}}}),i("span",{staticClass:"ml-2 text-sm"},[t._v("No")])])])]}}],null,!0)})],1),t.useTaxPlanField?i("div",{staticClass:"flex items-center pt-6"},[i("div",{staticClass:"w-full pl-2"},[i("ValidationProvider",{attrs:{name:"Tax Plan",rules:t.useTaxPlanField?"required":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("input-label",{attrs:{error:a[0],text:"LOAD TAX PLAN"}}),i("t-rich-select",{attrs:{name:"options",options:t.taxPlans,valueAttribute:"id",textAttribute:"name",hideSearchBox:!1},model:{value:t.form.tax_plan,callback:function(e){t.$set(t.form,"tax_plan",e)},expression:"form.tax_plan"}}),i("div",{staticClass:"mt-4"},[i("input-error-item",{attrs:{message:a[0]}})],1)]}}],null,!0)})],1)]):t._e(),i("div",{staticClass:"flex items-center pt-4"},[i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",type:"number",step:"1",label:"Billing Unit (Mins)"},model:{value:t.form.billing_unit_mins,callback:function(e){t.$set(t.form,"billing_unit_mins",t._n(e))},expression:"form.billing_unit_mins"}})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",type:"number",step:"0.01",label:"First Unit Fees"+t.selectedFleetCurrencyFormatted},model:{value:t.form.first_unit_fees,callback:function(e){t.$set(t.form,"first_unit_fees",t._n(e))},expression:"form.first_unit_fees"}})],1)]),i("div",{staticClass:"flex items-center"},[i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",type:"number",step:"0.01",label:"Default Unit Fees"+t.selectedFleetCurrencyFormatted},model:{value:t.form.default_unit_fees,callback:function(e){t.$set(t.form,"default_unit_fees",t._n(e))},expression:"form.default_unit_fees"}})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",type:"number",step:"0.01",label:"Max Billing Per Ride"},model:{value:t.form.max_billing_per_ride,callback:function(e){t.$set(t.form,"max_billing_per_ride",t._n(e))},expression:"form.max_billing_per_ride"}})],1)]),i("div",{staticClass:"flex items-center"},[i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{type:"number",step:"0.01",label:"Min Billing Per Ride"},model:{value:t.form.minimum_ride_fee,callback:function(e){t.$set(t.form,"minimum_ride_fee",t._n(e))},expression:"form.minimum_ride_fee"}})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{type:"number",step:"0.01",label:"Min Billing Per Rental"},model:{value:t.form.minimum_rental_fee,callback:function(e){t.$set(t.form,"minimum_rental_fee",t._n(e))},expression:"form.minimum_rental_fee"}})],1)]),i("div",{staticClass:"flex items-center pt-4 pb-5 pl-2"},[i("ValidationProvider",{attrs:{vid:"status",name:" ",rules:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("input-label",{attrs:{error:a[0],text:"Status *"}}),i("div",{staticClass:"flex"},[i("label",{staticClass:"flex items-center mt-px ml-2 cursor-pointer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.status_active,expression:"form.status_active"}],staticClass:"p-1 form-radio",attrs:{type:"radio",name:"status"},domProps:{value:!0,checked:t._q(t.form.status_active,!0)},on:{change:function(e){return t.$set(t.form,"status_active",!0)}}}),i("span",{staticClass:"ml-2 text-sm"},[t._v("Active")])]),i("label",{staticClass:"flex items-center mt-px ml-4 cursor-pointer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.status_active,expression:"form.status_active"}],staticClass:"p-1 form-radio",attrs:{type:"radio",name:"status"},domProps:{value:!1,checked:t._q(t.form.status_active,!1)},on:{change:function(e){return t.$set(t.form,"status_active",!1)}}}),i("span",{staticClass:"ml-2 text-sm"},[t._v("Inactive")])])])]}}],null,!0)})],1),i("div",{staticClass:"flex items-center pt-4 pb-5 pl-2"},[i("ValidationProvider",{attrs:{vid:"pause_ride_fee_same_as_billing",name:" ",rules:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("input-label",{attrs:{error:a[0],text:"Is the pause ride fee same as above? *"}}),i("div",{staticClass:"flex"},[i("label",{staticClass:"flex items-center mt-px ml-2 cursor-pointer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pause_ride_fee_same_as_billing,expression:"form.pause_ride_fee_same_as_billing"}],staticClass:"p-1 form-radio",attrs:{type:"radio",name:"pause_ride_fee_same_as_billing"},domProps:{value:!0,checked:t._q(t.form.pause_ride_fee_same_as_billing,!0)},on:{change:function(e){return t.$set(t.form,"pause_ride_fee_same_as_billing",!0)}}}),i("span",{staticClass:"ml-2 text-sm"},[t._v("Yes")])]),i("label",{staticClass:"flex items-center mt-px ml-4 cursor-pointer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.pause_ride_fee_same_as_billing,expression:"form.pause_ride_fee_same_as_billing"}],staticClass:"p-1 form-radio",attrs:{type:"radio",name:"pause_ride_fee_same_as_billing"},domProps:{value:!1,checked:t._q(t.form.pause_ride_fee_same_as_billing,!1)},on:{change:function(e){return t.$set(t.form,"pause_ride_fee_same_as_billing",!1)}}}),i("span",{staticClass:"ml-2 text-sm"},[t._v("No")])])])]}}],null,!0)})],1),t.form.pause_ride_fee_same_as_billing?t._e():i("div",{staticClass:"flex items-center pt-2"},[i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",type:"number",step:"1",label:"Pause Billing Unit (Mins)"},model:{value:t.form.pause_billing_unit_mins,callback:function(e){t.$set(t.form,"pause_billing_unit_mins",t._n(e))},expression:"form.pause_billing_unit_mins"}})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",type:"number",step:"0.01",label:"Pause First Unit Fees"},model:{value:t.form.pause_first_unit_fees,callback:function(e){t.$set(t.form,"pause_first_unit_fees",e)},expression:"form.pause_first_unit_fees"}})],1)]),t.form.pause_ride_fee_same_as_billing?t._e():i("div",{staticClass:"flex items-center"},[i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",type:"number",step:"0.01",label:"Pause Next Unit Fees"+t.selectedFleetCurrencyFormatted},model:{value:t.form.pause_default_unit_fees,callback:function(e){t.$set(t.form,"pause_default_unit_fees",e)},expression:"form.pause_default_unit_fees"}})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("ValidationProvider",{attrs:{vid:"Tax applied on pauses",name:"Tax applied on pauses",rules:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("AppFormLabel",{attrs:{error:a[0],text:"Tax applied on pauses?"}}),i("TRichSelect",{attrs:{options:[{text:"Yes",value:!0},{text:"No",value:!1}],placeholder:"Select one","value-attribute":"value","text-attribute":"text",variant:{danger:!!a[0]},"hide-search-box":""},model:{value:t.form.tax_applies_to_pause_fees,callback:function(e){t.$set(t.form,"tax_applies_to_pause_fees",e)},expression:"form.tax_applies_to_pause_fees"}}),i("AppFormError",{attrs:{message:a[0]}})]}}],null,!0)})],1)]),i("div",{staticClass:"flex items-center pt-4 pb-5 pl-2"},[i("ValidationProvider",{attrs:{vid:"is_pre_auth_required",name:" ",rules:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("input-label",{attrs:{error:a[0],text:"Is pre auth required? *"}}),i("div",{staticClass:"flex"},[i("label",{staticClass:"flex items-center mt-px ml-2 cursor-pointer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_pre_auth_required,expression:"form.is_pre_auth_required"}],staticClass:"p-1 form-radio",attrs:{type:"radio",name:"is_pre_auth_required"},domProps:{value:!0,checked:t._q(t.form.is_pre_auth_required,!0)},on:{change:function(e){return t.$set(t.form,"is_pre_auth_required",!0)}}}),i("span",{staticClass:"ml-2 text-sm"},[t._v("Yes")])]),i("label",{staticClass:"flex items-center mt-px ml-4 cursor-pointer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.is_pre_auth_required,expression:"form.is_pre_auth_required"}],staticClass:"p-1 form-radio",attrs:{type:"radio",name:"is_pre_auth_required"},domProps:{value:!1,checked:t._q(t.form.is_pre_auth_required,!1)},on:{change:function(e){return t.$set(t.form,"is_pre_auth_required",!1)}}}),i("span",{staticClass:"ml-2 text-sm"},[t._v("No")])])])]}}],null,!0)})],1),t.form.is_pre_auth_required?i("div",{staticClass:"flex items-center pt-2"},[i("div",{staticClass:"w-1/2 pl-2"},[i("text-input",{attrs:{rules:"required",type:"number",step:"0.01",label:"Pre auth hold amount *"},model:{value:t.form.pre_auth_hold_amount,callback:function(e){t.$set(t.form,"pre_auth_hold_amount",t._n(e))},expression:"form.pre_auth_hold_amount"}})],1),i("div",{staticClass:"w-1/2 pl-2"},[i("ValidationProvider",{attrs:{name:"Pre auth ride condition",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[i("input-label",{attrs:{error:a[0],text:"Pre auth ride condition*"}}),i("t-rich-select",{attrs:{name:"pre_auth_ride_condition",options:t.rideTypeChoice,valueAttribute:"value",textAttribute:"name",hideSearchBox:!0,variant:{danger:!!a[0]}},model:{value:t.form.pre_auth_ride_condition,callback:function(e){t.$set(t.form,"pre_auth_ride_condition",e)},expression:"form.pre_auth_ride_condition"}}),i("div",{},[i("input-error-item",{attrs:{message:a[0]}})],1)]}}],null,!0)})],1)]):t._e(),i("div",{staticClass:"w-full pl-2"},[i("input-label",{attrs:{text:"Billing Description"}}),i("t-textarea",{attrs:{name:"billingDescription"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),i("input-error-item")],1),i("button",{ref:"submitButton",staticClass:"hidden",attrs:{type:"submit"}},[t._v("Save")])])]}}])})],1)},s=[],n=i("5530"),r=i("1da1"),o=(i("b64b"),i("7db0"),i("96cf"),i("9f07")),l=i.n(o),c=i("4a9d"),d=i("99e4"),u=i("8992"),p=i("04ec"),m=i("fd9d"),_=i("15e7"),g=i("e94b"),f=i("5f81"),h={name:"AddBillingPlan",components:{SlideOverRight:p["default"],SlideOverRightTrigger:m["default"],AnchorButton:_["default"],TextInput:g["default"],InputLabel:f["default"]},props:{vehicleTypes:Array},data:function(){return{rentalEnabled:!1,isLoading:!1,billingFleets:[],taxPlans:[],item:{},form:{},errors:[],sorId:d["a"].events.sorId,useTaxPlanField:"no"}},watch:{form:{handler:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.form.tax_enabled=!!e.tax_plan,this.isEditing){t.next=5;break}if("S"!=e.bike_category&&"P"!=e.bike_category&&"E"!=e.bike_category){t.next=5;break}return t.next=5,this.loadBillingFleets();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),deep:!0}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null!==(i=t.$org)&&void 0!==i&&null!==(a=i.subscription)&&void 0!==a&&a.rental_enabled&&(t.rentalEnabled=!0),e.next=3,t.loadBillingFleets();case 3:return e.next=5,t.$http.get(u["a"].api.taxPlans).then((function(t){return t.data.data})).catch((function(t){return console.log(t)}));case 5:t.taxPlans=e.sent;case 6:case"end":return e.stop()}}),e)})))()},computed:{orgId:function(){return this.$store.getters["auth/organizationInfo"].id||null},isEditing:function(){return Object.keys(this.item).length>4},titleText:function(){return this.isEditing?"Edit Billing Plan":"Add Billing Plan"},actionButtonText:function(){return this.isEditing?"Update":"Save"},vehicleTypeChoice:function(){return[{name:"Scooter",value:"P"},{name:"Bike",value:"S"},{name:"E-Bike",value:"E"},{name:"SuperCoco",value:"C"},{name:"Kenota",value:"K"}]},rideTypeChoice:function(){return[{name:"First Ride",value:"FIRST_RIDE"},{name:"All Ride",value:"ALL_RIDE"}]},selectedFleet:function(){var t=this;return this.form.fleet?this.billingFleets.find((function(e){return e.id==t.form.fleet})):null},selectedFleetCurrency:function(){var t,e;return this.selectedFleet?null===(t=this.selectedFleet)||void 0===t||null===(e=t.country)||void 0===e?void 0:e.currency_symbol:null},selectedFleetCurrencyFormatted:function(){return this.selectedFleetCurrency?"(".concat(this.selectedFleetCurrency,")"):""}},mounted:function(){var t=this;c["a"].$on(d["a"].events.editingData,(function(e){if(console.log("ii",e),t.item=e,t.item.existing_fleet){var i=t.billingFleets.some((function(e){return JSON.stringify(t.item.existing_fleet)===JSON.stringify(e)}));i||(console.log("-------- Propagating Existing Fleet into Edit --------"),t.billingFleets.push(t.item.existing_fleet)),delete t.item.existing_fleet}null==e.pause_ride_fee_same_as_billing&&(e.pause_ride_fee_same_as_billing=!0),null==e.is_pre_auth_required&&(e.is_pre_auth_required=!0),null==e.tax_applies_to_pause_fees&&(e.tax_applies_to_pause_fees=!1),e.tax_plan?t.useTaxPlanField=!0:t.useTaxPlanField=!1,t.form=Object(n["a"])({},t.item),console.log("tp",t.form.tax_plan,"hideTp=",t.useTaxPlanField)}))},methods:{showModal:function(){dispatchEvent(new Event(d["a"].events.sorToggle))},loadBillingFleets:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get(u["a"].api.billingFleets(this.form.bike_category)).then((function(t){return t.data.data})).catch((function(t){return console.log(t)}));case 2:this.billingFleets=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),submit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,r,o,c,u,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,e=this.isEditing?"PATCH":"POST",i=this.isEditing?d["a"].api.update(this.item.id):d["a"].api.create,a=Object(n["a"])({},this.form),this.useTaxPlanField||(a.tax_plan=""),this.form.default_currency&&(a.default_currency=this.form.default_currency.id),console.log("form = ",a),s=new l.a(a).toFormData(),r=this.isEditing?"Billing plan updated successfully":"Billing plan added successfully",t.prev=9,t.next=12,this.$http({method:e,url:i,data:s});case 12:return o=t.sent,this.isLoading=!1,dispatchEvent(new Event(d["a"].events.sorClose)),dispatchEvent(new Event(d["a"].events.refresh)),this.form={},this.$notify({group:"generic",type:"success",title:"Success",text:r},3e3),t.abrupt("return",o.status);case 21:for(m in t.prev=21,t.t0=t["catch"](9),this.isLoading=!1,console.error("Error occured!",t.t0.response),c=null===t.t0||void 0===t.t0?void 0:t.t0.response.data,u=Object.keys(c).length,p=2e3*u,c)this.$notify({group:"bottomLeft",type:"error",title:"Error Occured",text:m+": "+c[m]},p),p-=2e3;case 29:case"end":return t.stop()}}),t,this,[[9,21]])})));function e(){return t.apply(this,arguments)}return e}()}},v=h,b=(i("2e8b"),i("2877")),x=Object(b["a"])(v,a,s,!1,null,"6d11028a",null);e["a"]=x.exports},"8a82":function(t,e,i){t.exports=i.p+"assets/tag.fe73d287.svg"},"99e4":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var a={api:{index:"/dashboard/pricing-plans/",create:"/dashboard/pricing-plans/",update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/pricing-plans/".concat(t,"/")},details:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/pricing-plans/".concat(t,"/")}},events:{name:"billing-plan",refresh:"rid-billing-plan",sorId:"billing-plan",sorOpen:"sor-open-billing-plan",sorClose:"sor-close-billing-plan",sorToggle:"sor-toggle-billing-plan",editingData:"edit-billing-plan-data",viewingData:"view-billing-plan-data"}}},a2e6:function(t,e,i){t.exports=i.p+"assets/flag.99d31253.svg"},a95d:function(t,e,i){},ae3c:function(t,e,i){"use strict";i("3ad8")},bc90:function(t,e,i){"use strict";i("1dd0")},c156:function(t,e,i){t.exports=i.p+"assets/plus-minus-box.9d5a380a.svg"},c17a:function(t,e,i){t.exports=i.p+"img/Reward_R_icon.404c55da.png"},c5c6:function(t,e,i){},c910:function(t,e,i){},cbec:function(t,e,i){},d351:function(t,e,i){},d4f5:function(t,e,i){"use strict";i("39c2")},d6cb:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABUCAYAAAAh+XGnAAAACXBIWXMAAAsSAAALEgHS3X78AAAFSklEQVR4nO2cP2gUQRTGP0XYTq+xUxNRLBSMWsXGpBG7M42dEtMr5sDSQMBWuQQrQcEjZSwuVoKNsbEQTCJoJZionY1nt1Xk7b3ZzG72/8zOzF3uB8sld5ed2S9v3ryZeTOHdnd3MSKdwyNtsjlio1CvjWkA47EriW358lt4b7quRpqY18YlADNAIMyU4u3WgUCort/CpqYqplKbQF47sIq7fI3VUgiwA+AVXX4rsDLtaBeImw+JMltHhTPosFBam6E2gdhilgDc1HLD6qwBmNdlUVp6Ma+NRQA/HBAHXIcfXCdllCyInS/5gAldT6eZLWruKs68sgV57cDPbDgsDrhuG1zXSlSyIK8dWI1pJ6xKx2+VF6qUQF4bDXbEgyaOoMMO/G/RPygcSbM47x1vUnnQP/YSX4Uo44OWBlwcwQS7iEIUEmhAfU4Ws0VFyhWIe4BhEkcwW6R3y3TSHOds1FA5l7icFSflWVDhtjrAZD5jqkAcqg+DU85jImtYktjEeOBJY6uDxOmkAW6aBWkZ6A0Yic+8z4J0WM/YUaB5Fmh4ZhT66wNvvgM7/5Rvtc+KkiJpJeshUT7dBo4ZEkewMAmce9kXS4FFnuwLiTQxth6lmOfOBfPiEFQmla3ILGsQEvdBlacFBKaaVY1lp1uQDoGGgGSBOGqua/VhkBhjLQJkJz1j8iGefU53qNRUqBek3tASpEUw/JAFmjZVFxLn4Xr2d+jzO+eBJ9NW/FqoheyDVFc8CyMs5xRbyMXj/VfqieRr5ZuWrrsKoRaBQHKbM8lPDuy+/Om/9vzoJd679cZ83YQmwoLSkgdqRVgO8e4WsNoE7l3ei6OEhX34rSVKLsu4LJAVCxKWQ1w7ATTPAE+ngdfN/ntkYULE9V/GqxexoIbx4iULiUNiCYSIFiwo0MSqBf0s8NBpIhogYkFWSHv4xx/3i2grJrKSYSaQLej6av91+9/e+ySg+HnqpJ06WhVIFoB6KhnqycRn5JNsWZDVJtaLBYwiSJSh31/csFZFuxYkBBKW0vOjn1kcaoQIgTZNDjUEchN7NLn3Pvkbin9sChMfrBbOdtCJ7KQXrtqoQSaBJsIH1Z5Om4Q81HCQTVmgWlJo85CHGg6yHQpkIiE7CYtRci5CE7mbz5nC0gfNFgLROMcxQi3kbr5rqiebON6f3hAj9PtXnBOoK36QBTK6UYSsxkHLEYRahE2M29yOzVo5wo7sk+NDjaWDqEiMiAZxgbppf1UUCxPsIZrKjmgQEYgzGzoqd1/5Gh1TmYLKpLIV6cSzO2pJf2lwIoHJ9BcSR4MF7Ut/ScswG7a03yIkblXIyjDrWa+yOXppeVGJArGZHaQebSltA15envTmAch03fJb6as6eVOud4e8qfXycqIyBeKIcl57tdxhPm8mI3fS3m8FPdry8GmDZX62TApvqBuyrr/w7sPCyz58Q6Uo2xFKbc0stS42BCKV3rdaeuGQCxhEn7RcZVNvpZVVvxX0bHMDEgJQHee4zqUZHSyQg5azO3i/Ff2HjinfTA89Hj4o71rSfbjJogOhAHUii7oON6njeBxbQmkVRlDnAUsN6YClunzUlnTAUi35BaaO6Brn9P4Zzv2r6qt6vGbe5SO6al8yt3JMIPd+45zy/yDn688BvOVD3owvkVs/R9FrB9aQdjBT5lyNCVw4RzFr5tL6vn3rAvGhbGkrusrrdKq4chJnUkC3ZcIJ5+GKQN2EcZ0Tx2I4IRDHMHFBRgLFkJ31Wl2BX1mcESiWF2DdOQtcOy5ZNKuRQElwlz/nSvOCC5G064xOJM8CwH8l1cAvo+bvNQAAAABJRU5ErkJggg=="},d7b0:function(t,e,i){"use strict";i("3b24")},d81a:function(t,e,i){"use strict";i("5f2e")},df61:function(t,e,i){t.exports=i.p+"img/partial_refunded_seal.956f6483.png"},df72:function(t,e,i){"use strict";i("2e59")},e1f96:function(t,e,i){},e94b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ValidationProvider",{staticClass:"relative w-full appearance-none",attrs:{tag:"div",vid:t.vid,rules:t.rules,name:t.name||t.label},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,s=e.required,n=e.ariaInput,r=e.ariaMsg;return[i("label",{staticClass:"block w-full pb-1 font-semibold leading-normal text-14px",class:{"text-gray-700":!a[0],"text-red-600":a[0]||""!=t.phone_error},attrs:{for:t.name},on:{click:function(e){return t.$refs.input.focus()}}},[t.label?i("div",[i("span",[t._v(t._s(t.label))]),i("span",[t._v(t._s(s?" *":""))])]):t._e()]),"phone"==t.input_type?i("vue-tel-input",{ref:"telInput",class:{"border-gray-400 placeholder-gray-500 telinput":!a[0]||""==t.phone_error,"border-red-600 placeholder-red-400 custom-phone":a[0],"has-value telinput":t.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray telinput":t.disabled},attrs:{placeholder:t.placeholder,disabled:t.disabled},on:{input:t.onChangePhoneNumber},model:{value:t.innerValue,callback:function(e){t.innerValue=e},expression:"innerValue"}}):t._e(),i("div",{staticClass:"relative"},["textarea"==t.input_type?i("textarea",t._b({directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],ref:"input",staticClass:"block w-full h-20 px-4 py-1 leading-normal bg-white border border-gray-400 rounded outline-none focus:ring-0 focus:border-gray-700 focus:placeholder-gray-500",class:{"border-gray-400 placeholder-gray-500":!a[0],"border-red-600 placeholder-red-400":a[0],"has-value":t.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray":t.disabled},attrs:{placeholder:t.placeholder,disabled:t.disabled,step:t.step},domProps:{value:t.innerValue},on:{input:function(e){e.target.composing||(t.innerValue=e.target.value)}}},"textarea",n,!1)):t._e(),"checkbox"===t.type&&"phone"!=t.input_type&&"textarea"!=t.input_type?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],ref:"input",staticClass:"block w-full px-4 py-1.5 leading-normal bg-white border border-gray-400 rounded outline-none focus:ring-0 focus:border-gray-700 focus:placeholder-gray-500",class:{"border-gray-400 placeholder-gray-500":!a[0]||!t.errorMessage,"border-red-600 placeholder-red-400":a[0]||t.errorMessage,"has-value":t.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray":t.disabled},attrs:{placeholder:t.placeholder,disabled:t.disabled,step:t.step,min:t.min,type:"checkbox"},domProps:{checked:Array.isArray(t.innerValue)?t._i(t.innerValue,null)>-1:t.innerValue},on:{change:function(e){var i=t.innerValue,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n=null,r=t._i(i,n);a.checked?r<0&&(t.innerValue=i.concat([n])):r>-1&&(t.innerValue=i.slice(0,r).concat(i.slice(r+1)))}else t.innerValue=s}}},"input",n,!1)):"radio"===t.type&&"phone"!=t.input_type&&"textarea"!=t.input_type?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],ref:"input",staticClass:"block w-full px-4 py-1.5 leading-normal bg-white border border-gray-400 rounded outline-none focus:ring-0 focus:border-gray-700 focus:placeholder-gray-500",class:{"border-gray-400 placeholder-gray-500":!a[0]||!t.errorMessage,"border-red-600 placeholder-red-400":a[0]||t.errorMessage,"has-value":t.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray":t.disabled},attrs:{placeholder:t.placeholder,disabled:t.disabled,step:t.step,min:t.min,type:"radio"},domProps:{checked:t._q(t.innerValue,null)},on:{change:function(e){t.innerValue=null}}},"input",n,!1)):"phone"!=t.input_type&&"textarea"!=t.input_type?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.innerValue,expression:"innerValue"}],ref:"input",staticClass:"block w-full px-4 py-1.5 leading-normal bg-white border border-gray-400 rounded outline-none focus:ring-0 focus:border-gray-700 focus:placeholder-gray-500",class:{"border-gray-400 placeholder-gray-500":!a[0]||!t.errorMessage,"border-red-600 placeholder-red-400":a[0]||t.errorMessage,"has-value":t.hasValue,"bg-oLightestGray text-oLightGray placeholder-oLightGray":t.disabled},attrs:{placeholder:t.placeholder,disabled:t.disabled,step:t.step,min:t.min,type:t.type},domProps:{value:t.innerValue},on:{input:function(e){e.target.composing||(t.innerValue=e.target.value)}}},"input",n,!1)):t._e(),"password"==t.input_type?i("div",{staticClass:"eye-body",on:{click:t.onChangeShowPassword}},[t.show_password?i("i",{staticClass:"far fa-eye"}):t._e(),t.show_password?t._e():i("i",{staticClass:"far fa-eye-slash"})]):t._e()]),""!==t.phone_error||""!=t.errorMessage||!a[0]&&t.showSubText?t._e():i("div",{staticClass:"flex items-center min-h-6"},[i("span",t._b({directives:[{name:"show",rawName:"v-show",value:a[0],expression:"errors[0]"}],staticClass:"block text-xs text-red-600 "},"span",r,!1),[t._v(t._s(a[0]))])]),""==t.errorMessage&&t.showSubText?i("div",{staticClass:"flex items-center min-h-6"},[i("span",{staticClass:"block text-xs text-gray-600 "},[t._v(t._s(t.subText))])]):t._e(),""!=t.phone_error?i("div",{staticClass:"flex items-center min-h-6"},[i("span",t._b({staticClass:"block text-xs text-red-600 "},"span",r,!1),[t._v(t._s(t.phone_error))])]):t._e(),""!=t.errorMessage?i("div",{staticClass:"flex items-center min-h-6"},[i("span",t._b({staticClass:"block text-xs text-red-600 "},"span",r,!1),[t._v(t._s(t.errorMessage))])]):t._e()]}}])})},s=[],n=(i("caad"),{name:"TextInput",components:{},props:{vid:{type:String,default:void 0},disabled:{type:Boolean,default:!1},name:{type:String,default:""},label:{type:String,default:""},input_type:{type:String,default:""},rules:{type:[Object,String],default:""},placeholder:{type:String,default:""},show_password:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(t){return["url","text","password","tel","search","number","email","date","textarea"].includes(t)}},step:{type:String,default:"1"},value:{type:null,default:""},errorMessage:{type:String,default:""},errorKey:{type:String,default:""},min:{type:String,default:""},subText:{type:String,default:""},showSubText:{type:Boolean,default:!1}},data:function(){return{innerValue:"",phone_error:""}},computed:{hasValue:function(){return!!this.innerValue}},methods:{onChangePhoneNumber:function(t,e){e.isValid?(this.innerValue=e.number.input,this.phone_error=""):this.phone_error="The phone number field must be a valid"},onChangeShowPassword:function(){this.$emit("showPassword",!this.show_password)}},watch:{innerValue:function(t){this.$emit("input",t),this.$emit("clear-error",this.errorKey)},value:function(t){t!==this.innerValue&&(this.innerValue=t)}},created:function(){null===this.value&&"undefined"===typeof this.value||(this.innerValue=this.value)}}),r=n,o=(i("df72"),i("2877")),l=Object(o["a"])(r,a,s,!1,null,"7b8ea01e",null);e["default"]=l.exports},f2f7:function(t,e,i){"use strict";function a(t){var e={R:"blue",A:"red",U:"yellow",O:"purple",V:"orange",C:"green",T:"red",UF:"black"};return e[t]||"fallback"}function s(t){var e={R:"Reserved",A:"Cancelled",U:"Starting Trip",O:"On Rent",V:"Forced Cancel",C:"Completed",T:"Time Out",UF:"Unlocking Failed"};return e[t]||"--"}i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}))},f4a07:function(t,e,i){t.exports=i.p+"assets/co2-save.c0bf02b2.svg"},fd9d:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{on:{click:function(e){return t.toggle(t.id)}}},[t._t("default",(function(){return[i("button",[t._v("Toggle")])]}))],2)},s=[],n={name:"SlideOverRightTrigger",props:{id:{required:!0,type:String}},mounted:function(){},methods:{open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=null!==t?t:this.id;console.log("event = ",this.getOpeningEventName(e));var i=dispatchEvent(new Event(this.getOpeningEventName(e)));console.log(i)},close:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("cancel = ");var e=null!==t?t:this.id;dispatchEvent(new Event(this.getClosingEventName(e)))},toggle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=null!==t?t:this.id,a=this.getTogglingEventName(i);"number"!==typeof e?dispatchEvent(new Event(a)):setTimeout((function(){dispatchEvent(new Event(a))}),e)},getOpeningEventName:function(t){return"sor-open-".concat(t)},getClosingEventName:function(t){return"sor-close-".concat(t)},getTogglingEventName:function(t){return"sor-toggle-".concat(t)}}},r=n,o=i("2877"),l=Object(o["a"])(r,a,s,!1,null,null,null);e["default"]=l.exports},fe18:function(t,e,i){"use strict";i("c910")}}]);
//# sourceMappingURL=chunk-6de1d84b.16b5c949.js.map