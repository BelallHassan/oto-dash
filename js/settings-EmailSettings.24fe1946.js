(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings-EmailSettings"],{"0ee5":function(e,t,i){"use strict";i("d3fb")},"5fa2":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[e.isLoaded?e._e():i("div",{staticClass:"h-screen vld-parent"},[i("loading",{attrs:{active:!e.isLoaded,"is-full-page":!1}})],1),e.isLoaded?i("div",{staticClass:"mx-auto mt-3 lg:mt-10 md:mt-5  max-w-6xl"},[i("div",[i("div",[i("div",{staticClass:"font-bold text-22px text-oCharcoal"},[i("i",{staticClass:"fas fa-envelope text-22px text-oPurple"}),i("span",{staticClass:"pl-3"},[e._v(e._s(e.$t("components.settingsManagement.email.headline.emailSettings.title")))]),e.isUsedOtorideDefaultEmailCredential?i("span",{staticClass:"pl-1"},[e._v("(Default)")]):e._e()]),i("p",{staticClass:"break-words title-description mt-1"},[e._v(" "+e._s(e.$t("components.settingsManagement.email.headline.emailSettings.description"))+" ")])])]),i("div",{key:"email_"+e.counter,staticClass:" mt-3 pt-5 border-t-2"},[e._l(e.emailSettings,(function(t,a){return[0===a?[i("SmartAppInput",{key:a,attrs:{rowId:"email_"+a,type:t.type,label:t.label,placeholder:t.placeholder,description:t.description,isEdit:t.isEdit,options:t.options},on:{save:function(i){return e.onSave(""+t.variable,i)}},model:{value:e.email[""+t.variable],callback:function(i){e.$set(e.email,""+t.variable,i)},expression:"email[`${item.variable}`]"}})]:e._e(),a>0&&!e.isUsedOtorideDefaultEmailCredential?[1===a?i("SmartAppInput",{key:a,attrs:{rowId:"email_"+a,type:t.type,label:t.label,placeholder:t.placeholder,description:t.description,isEdit:t.isEdit,options:t.options},on:{save:function(i){return e.onSave(""+t.variable,i)}},model:{value:e.email[""+t.variable],callback:function(i){e.$set(e.email,""+t.variable,i)},expression:"email[`${item.variable}`]"}}):e._e(),a>1&&a<=6&&e.email.email_is_smtp?i("SmartAppInput",{key:a,attrs:{rowId:"email_"+a,type:t.type,label:t.label,placeholder:t.placeholder,description:t.description,isEdit:t.isEdit,options:t.options},on:{save:function(i){return e.onSave(""+t.variable,i)}},model:{value:e.email[""+t.variable],callback:function(i){e.$set(e.email,""+t.variable,i)},expression:"email[`${item.variable}`]"}}):e._e(),7!==a||e.email.email_is_smtp?e._e():i("SmartAppInput",{key:a,attrs:{rowId:"email_"+a,type:t.type,label:t.label,placeholder:t.placeholder,description:t.description,isEdit:t.isEdit,options:t.options},on:{save:function(i){return e.onSave(""+t.variable,i)}},model:{value:e.email[""+t.variable],callback:function(i){e.$set(e.email,""+t.variable,i)},expression:"email[`${item.variable}`]"}})]:e._e()]}))],2)]):e._e()])},n=[],s=i("5530"),l=i("1da1"),o=(i("ac1f"),i("1276"),i("d81d"),i("96cf"),i("cb0d")),r=i("c820"),m=i("ed08"),d={name:"EmailSettings",components:{SmartAppInput:o["a"]},data:function(){return{isLoaded:!1,counter:0,email:{email_address:null,email_is_smtp:null,email_username:null,email_password:null,email_host:null,email_port:null,email_encryption:null,email_api_key:null},emailSettings:[{type:"text",label:this.$t("components.settingsManagement.email.emailSettings.senderEmailAddress.title"),placeholder:"e.g  noreply@otoride.co",description:this.$t("components.settingsManagement.email.emailSettings.senderEmailAddress.description"),variable:"email_address",isEdit:!1},{type:"richselect",label:this.$t("components.settingsManagement.email.emailSettings.emailCredentialProvider.title"),placeholder:this.$t("components.settingsManagement.email.emailSettings.emailCredentialProvider.placeholder"),options:[{text:"SMTP",value:!0},{text:"SendGrid",value:!1}],description:this.$t("components.settingsManagement.email.emailSettings.emailCredentialProvider.description"),variable:"email_is_smtp",isEdit:!1},{type:"text",label:this.$t("components.settingsManagement.email.emailSettings.emailUsername.title"),placeholder:"e.g user101",description:this.$t("components.settingsManagement.email.emailSettings.emailUsername.description"),variable:"email_username",isEdit:!1},{type:"password",label:this.$t("components.settingsManagement.email.emailSettings.emailPassword.title"),placeholder:"e.g  1234qwe",description:this.$t("components.settingsManagement.email.emailSettings.emailPassword.description"),variable:"email_password",isEdit:!1},{type:"text",label:this.$t("components.settingsManagement.email.emailSettings.emailHost.title"),placeholder:"e.g ssa.as2.sd",description:this.$t("components.settingsManagement.email.emailSettings.emailHost.description"),variable:"email_host",isEdit:!1},{type:"number",label:this.$t("components.settingsManagement.email.emailSettings.emailPort.title"),placeholder:"e.g 2026",description:this.$t("components.settingsManagement.email.emailSettings.emailPort.description"),variable:"email_port",isEdit:!1},{type:"richselect",label:this.$t("components.settingsManagement.email.emailSettings.emailEncryption.title"),description:this.$t("components.settingsManagement.email.emailSettings.emailEncryption.description"),options:[{value:"TLS",text:"TLS"},{value:"SSL",text:"SSL"},{value:"None",text:"None"}],variable:"email_encryption",isEdit:!1},{type:"text",label:this.$t("components.settingsManagement.email.emailSettings.emailAPIKey.title"),placeholder:"e.g: SG.SiY-..............-piwuRPs",description:this.$t("components.settingsManagement.email.emailSettings.emailAPIKey.description"),variable:"email_api_key",isEdit:!1}]}},computed:{orgId:function(){return this.$store.getters["auth/organizationInfo"].id||null},isUsedOtorideDefaultEmailCredential:function(){return this.$store.getters["auth/organizationInfo"].subscription.should_use_otoride_email_credentials||!1},endpoint:function(){return r["c"].settings.email.index(this.orgId)}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$http.get(e.endpoint).then((function(t){var i=t.data,a={};for(var n in i)a[n]=null===i[n]?"":i[n];e.email=Object(s["a"])({},a),e.isLoaded=!0})).catch((function(e){console.log("emailSettingsErr",e)}));case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;m["a"].$on("open-edit",(function(t){var i=t.split("_")[0];"email"===i&&(e.emailSettings=e.emailSettings.map((function(e,i){return t==="email_".concat(i)?Object(s["a"])(Object(s["a"])({},e),{},{isEdit:!0}):Object(s["a"])(Object(s["a"])({},e),{},{isEdit:!1})})))}))},methods:{onSave:function(e,t){var i=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,l,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return"email_address"===e&&(n="Email Address",l="Email Address is updated"),"email_is_smtp"===e&&(n="Email Is SMTP",l="Email Is SMTP is updated"),"email_password"===e&&(n="Email Password",l="Email Password is updated"),"email_username"===e&&(n="Email Username",l="Email Username is updated"),"email_host"===e&&(n="Email Host",l="Email Host is updated"),"email_port"===e&&(n="Email Port",l="Email Port is updated"),"email_encryption"===e&&(n="Email Encryption",l="Email Encryption is updated"),"email_api_key"===e&&(n="SendGrid API Key",l="SendGrid API Key is updated"),o=new FormData,o.append(e,t),a.next=12,i.$http.patch(i.endpoint,o).then((function(e){console.log(e),i.emailSettings=i.emailSettings.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{isEdit:!1})})),i.$notify({group:"generic",type:"success",title:n,text:l},3e3),i.counter++})).catch((function(e){console.log("onSaveError",e),i.$notify({group:"generic",type:"error",title:n,text:"Failed to update settings"},3e3)}));case 12:case"end":return a.stop()}}),a)})))()}}},p=d,c=(i("0ee5"),i("2877")),u=Object(c["a"])(p,a,n,!1,null,"4cad7856",null);t["default"]=u.exports},d3fb:function(e,t,i){}}]);
//# sourceMappingURL=settings-EmailSettings.24fe1946.js.map