(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-287357e3"],{2841:function(t,o,e){"use strict";e("47fc")},"46ab":function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"flex w-auto mt-2 md:items-center md:justify-end md:mt-0"},[e("t-dropdown",{attrs:{variant:"smActions"},scopedSlots:t._u([{key:"trigger",fn:function(o){var n=o.mousedownHandler,r=o.focusHandler,a=o.blurHandler,s=o.keydownHandler;return[e("button",{class:t.getButtonClass,attrs:{"aria-label":"Report Status Menu","aria-haspopup":"true"},on:{mousedown:n,focus:r,blur:a,keydown:s}},[t.isLoading?e("loading",{attrs:{height:25,opacity:0,color:"#fff",active:!0,loader:"bars","is-full-page":!1}}):t._e(),t.isLoading?t._e():e("span",[e("i",{staticClass:"mr-2 fas fa-chevron-down"}),t._v(" "+t._s(t.getStatusText)+" ")])],1)]}},{key:"default",fn:function(o){var n=o.hide;return[e("div",{staticClass:"py-1 mt-px bg-white rounded-md shadow-md",on:{click:function(t){return n()}}},[e("t-dropdown-item",{staticClass:"font-medium",on:{click:function(o){return t.executeAction("status")}}},[t._v(" "+t._s(t.getLockUnlockCommand?"Close":"Open")+" ")]),t.isShowEdit?e("t-dropdown-item",{staticClass:"font-medium",on:{click:function(o){return t.executeAction("edit")}}},[t._v(" Edit ")]):t._e()],1)]}}])})],1)},r=[],a=e("1da1"),s=(e("96cf"),e("d3b7"),e("3ca3"),e("ddb0"),e("caad"),e("ab33")),i={name:"MoreActionsDropdown",components:{TDropdownItem:function(){return e.e("chunk-2d0e51fe").then(e.bind(null,"92c2"))}},props:{sunpodId:{type:String,default:"",required:!0},isDoorOpen:{type:Boolean,default:!1,required:!1},isShowEdit:{type:Boolean,default:!0,required:!1},variant:{type:String,default:"badge",validator:function(t){return["badge","emphasize"].includes(t)}}},data:function(){return{isLoading:!1,doorStatus:null}},computed:{getStatusText:function(){return!0===this.doorStatus||!1===this.doorStatus?this.doorStatus?"Door Opened":"Door Closed":this.isDoorOpen?"Door Opened":"Door Closed"},getButtonClass:function(){var t="vehicle-action-button ";return t+="".concat(this.variant," "),!0===this.doorStatus||!1===this.doorStatus?t+=this.doorStatus?"unlocked":"locked":t+=this.isDoorOpen?"unlocked ":"locked",console.log("getButtonClass",t),t},getLockUnlockCommand:function(){return!0===this.doorStatus||!1===this.doorStatus?this.doorStatus:this.isDoorOpen}},methods:{executeAction:function(t){var o=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("edit"===t&&o.$emit("edit"),"status"!==t){e.next=6;break}return o.isLoading=!0,o.doorStatus=null,e.next=6,o.$http.patch(o.getLockUnlockCommand?s["a"].api.closeDoor(o.sunpodId):s["a"].api.openDoor(o.sunpodId)).then((function(){return setTimeout((function(){o.$http.get(s["a"].api.doorStatus(o.sunpodId)).then((function(t){o.$emit("refresh"),o.doorStatus=t.data.is_door_open})).finally((function(){return o.isLoading=!1}))}),3e4)})).catch((function(t){console.log("doorStatusErr",t.response.data),o.$notify({group:"bottomRight",type:"error",title:"Failed[".concat(t.response.status,"]"),text:t.response.data},5e3)}));case 6:case"end":return e.stop()}}),e)})))()}}},u=i,d=(e("2841"),e("2877")),c=Object(d["a"])(u,n,r,!1,null,"ac0e1272",null);o["default"]=c.exports},"47fc":function(t,o,e){}}]);
//# sourceMappingURL=chunk-287357e3.c9af8d30.js.map