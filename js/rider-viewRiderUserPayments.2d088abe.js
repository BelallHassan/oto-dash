(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["rider-viewRiderUserPayments"],{"7ce7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.reqLoaded?e._e():n("div",{staticClass:"relative mt-2 bg-white",staticStyle:{height:"600px"}},[n("loading",{attrs:{active:!0,"is-full-page":!1}})],1),e.reqLoaded?[n("PaymentMethodScreen",{attrs:{data:e.data,currencySymbol:e.currencySymbol,fullName:e.getFullName},on:{addBalance:function(t){return e.handleAdjustBalancePopup("add")},deductBalance:function(t){return e.handleAdjustBalancePopup("deduct")}}}),n("AdjustBalancePopup",{attrs:{data:e.popupData,wallets:e.getWallets,isSubscribedRidingTimeBalance:e.getSubscribedRidingTimeStatus,currencySymbol:e.currencySymbol},on:{adjustedBalance:function(t){return e.handleBalanceAdjustment(t)}}})]:e._e()],2)},r=[],i=n("1da1"),u=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("99af"),n("b0c0"),n("caad"),n("a9e3"),n("4a9d")),c={name:"ViewRiderUserPayments",components:{PaymentMethodScreen:function(){return Promise.all([n.e("chunk-5bc08480"),n.e("chunk-23f5cf5f"),n.e("chunk-230bb840"),n.e("chunk-3314bb13"),n.e("chunk-752efc6b")]).then(n.bind(null,"ce0e"))},AdjustBalancePopup:function(){return n.e("chunk-2dc95998").then(n.bind(null,"b9a3"))}},data:function(){return{reqLoading:!1,reqLoaded:!1,reqFailed:!1,reqFailures:null,data:{default:"",wallet_data:{total_debit:0,total_credit:0,current_balance:0,total_trips:0},card_data:{total_amount_to_wallet:0,total_amount_spend:0,total_trips:0,cards:[]},pass_data:null},popupData:{type:"add",userId:"",fullName:"",mobileNumber:"",currentBalance:0}}},computed:{id:function(){return this.$route.params.id},currencySymbol:function(){var e,t;return(null===(e=this.$org)||void 0===e||null===(t=e.default_currency)||void 0===t?void 0:t.symbol)||"$"},riderInfo:function(){return this.$store.getters["riderdetails/getData"]},getFullName:function(){var e;return(null===this||void 0===this||null===(e=this.riderInfo)||void 0===e?void 0:e.full_name)||"--"},getPhoneNumber:function(){var e;return(null===this||void 0===this||null===(e=this.riderInfo)||void 0===e?void 0:e.phone_number)||"--"},getSubscribedRidingTimeStatus:function(){var e,t;return(null===this||void 0===this||null===(e=this.riderInfo)||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.is_subscribed_to_riding_time_balance_system)||!1},getWallets:function(){var e,t=null===this||void 0===this||null===(e=this.data)||void 0===e?void 0:e.financial_accounts;return(null===t||void 0===t?void 0:t.map((function(e,t){return{id:e.id,text:"Wallet ".concat(t+1," / ").concat(e.currency.symbol).concat(e.balance," ").concat(e.currency.name," ").concat(e.default?"(Default)":""),balance:e.balance,currency:e.currency,default:e.default,fleets:e.fleets}})))||[]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fetchData();case 1:case"end":return t.stop()}}),t)})))()},methods:{fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.reqLoading=!0,n=e.$config.riderUser.api.paymentInfo(e.id),t.next=4,e.$http.get(n).then((function(t){e.data=t.data,e.reqLoaded=!0,console.warn(t.data)})).catch((function(t){e.reqFailures=t,e.reqFailed=!0})).finally((function(){e.reqLoading=!1}));case 4:case"end":return t.stop()}}),t)})))()},handleAdjustBalancePopup:function(e){["Owner","Agent"].includes(this.$store.getters["auth/roleInfo"].role_name)?(this.popupData={type:e,userId:this.id,fullName:this.getFullName,phoneNumber:this.getPhoneNumber,currentBalance:Number(this.data.wallet_data.current_balance)},this.$modal.show("AdjustBalancePopup"),u["a"].$emit(this.$config.riderUser.events.adjustBalancePop)):this.$notify({group:"generic",type:"error",title:"Permission Error",text:"Without Owner or Agent, anyone cannot perform this operation"},5e3)},handleBalanceAdjustment:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:case"end":return t.stop()}}),t)})))()}}},o=c,l=n("2877"),d=Object(l["a"])(o,a,r,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=rider-viewRiderUserPayments.2d088abe.js.map