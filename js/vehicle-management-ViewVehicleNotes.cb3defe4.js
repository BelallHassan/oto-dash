(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vehicle-management-ViewVehicleNotes","chunk-560dab74","chunk-4d9af094","chunk-9542048e"],{"119e":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{class:[t.$options.name,{"has-exceeded-limit":t.limitStatus>100},""]},[n("div",{class:t.$options.name+"__htmlarea",attrs:{"aria-hidden":""}},[t._v(" "+t._s(t.valueAllowed)),t.valueExcess?n("em",[t._v(t._s(t.valueExcess))]):t._e()]),n("textarea",{ref:"textarea",class:t.$options.name+"__textarea",attrs:{rows:t.rows,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.onKeydown.apply(null,arguments):null}}}),n("div",{class:t.$options.name+"__limit"},[n("span",{class:t.$options.name+"__remainingCharacters"},[t._v(" "+t._s(t.remainingCharacters)+" ")]),n("svg",{class:t.$options.name+"__counter",attrs:{viewBox:"0 0 33.83098862 33.83098862",height:"20",width:"20",xmlns:"http://www.w3.org/2000/svg"}},[n("circle",{class:t.$options.name+"__counterUnderlay",attrs:{cx:"16.91549431",cy:"16.91549431",r:"15.91549431",fill:"none","stroke-width":"2"}}),n("circle",{class:t.$options.name+"__counterProgress",attrs:{"stroke-dasharray":t.limitStatus+",100",cx:"16.91549431",cy:"16.91549431",r:"15.91549431",fill:"none","stroke-width":"4"}})])])]),n("section",{staticClass:"flex justify-end mt-2 gap-1"},[t.getSaveButtonVisibility?n("AppButton",{attrs:{text:t.$t("components.stepNavigation.cancel"),variant:"secondary",height:"30px","is-loading":!1},on:{click:t.onCancel}}):t._e(),t.getSaveButtonVisibility?n("AppButton",{attrs:{text:t.$t("components.stepNavigation.save"),height:"30px","is-loading":t.isLoading},on:{click:t.onSave}}):t._e()],1)])},a=[],i=(n("a9e3"),n("fb6a"),n("acfd")),s={name:"SweetMark",props:{limit:{type:Number,default:140},value:{type:String},placeholder:{type:[String,Number]},isLoading:{type:Boolean,default:!1},persistentButton:{type:Boolean,default:!1}},components:{AppButton:i["default"]},data:function(){return{isMounted:!1,isFocused:!1,rows:1}},computed:{valueAllowed:function(){return this.limit?this.value.slice(0,this.limit):this.value},valueExcess:function(){return this.limit?this.value.slice(this.limit):""},limitStatus:function(){return this.value.length/this.limit*100},remainingCharacters:function(){return this.limit-this.value.length},textareaStyle:function(){if(this.isMounted)return getComputedStyle(this.$refs.textarea)},getSaveButtonVisibility:function(){var t;return!!this.persistentButton||((null===(t=this.value)||void 0===t?void 0:t.length)>0||this.isFocused)}},mounted:function(){this.isMounted=!0,this.textareaGrow()},methods:{focus:function(){this.$refs.textarea.focus()},onInput:function(t){this.textareaGrow(),this.$emit("input",t.target.value)},textareaGrow:function(){var t=parseInt(this.textareaStyle.getPropertyValue("padding-top"),10),e=parseInt(this.textareaStyle.getPropertyValue("padding-bottom"),10),n=parseInt(this.textareaStyle.getPropertyValue("line-height"),10);this.$refs.textarea.rows=1;var r=this.$refs.textarea.scrollHeight-t-e;this.$refs.textarea.rows=r/n},onFocus:function(t){console.log({e:t}),this.isFocused=!0},onBlur:function(t){console.log({e:t}),this.isFocused=!1},onKeydown:function(){this.onSave()},onSave:function(){this.$emit("save",this.value)},onCancel:function(){this.$emit("cancel")}}},o=s,l=(n("f51e"),n("2877")),c=Object(l["a"])(o,r,a,!1,null,null,null);e["a"]=c.exports},"246c":function(t,e,n){},"2dd8":function(t,e,n){"use strict";n("619d")},3034:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"n",(function(){return c})),n.d(e,"p",(function(){return u})),n.d(e,"q",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return g})),n.d(e,"r",(function(){return p})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return v})),n.d(e,"o",(function(){return m})),n.d(e,"e",(function(){return b})),n.d(e,"i",(function(){return x})),n.d(e,"h",(function(){return y})),n.d(e,"l",(function(){return w})),n.d(e,"m",(function(){return C}));var r=n("5530"),a=(n("99af"),n("4de4"),n("c820")),i=[{id:"gs1",type:"vehicle:",subText:"qr code",example:"vehicle:AF25F2"},{id:"gs2",type:"vehicle:",subText:"IMEI",example:"vehicle:860919123453422"},{id:"gs3",type:"trip:",subText:"last five digit of the associated trip id",example:"trip:0d72f"},{id:"gs4",type:"trip:",subText:"Rider phone number",example:"trip:0167749"},{id:"gs5",type:"trip:",subText:"Rider first name",example:"trip:Masum"},{id:"gs6",type:"trip:",subText:"Rider last name",example:"trip:Khandaker"},{id:"gs7",type:"trip:",subText:"Source Location Name",example:"trip:Narsingdi"},{id:"gs8",type:"trip:",subText:"Destination Location Name",example:"trip:Dhaka"},{id:"gs9",type:"rental:",subText:"last five digit of the associated rental id",example:"rental:554be"},{id:"gs10",type:"revenue:",subText:"last five digit of the associated invoice id",example:"revenue:3fb4f"},{id:"gs11",type:"payment:",subText:"last five digit of the associated invoice id",example:"payment:81ed8"},{id:"gs12",type:"rider:",subText:"First Name",example:"rider:Masum"},{id:"gs13",type:"rider:",subText:"Last Name",example:"rider:Khandaker"},{id:"gs14",type:"rider:",subText:"Phone Number",example:"rider:01677"},{id:"gs15",type:"rider:",subText:"email",example:"rider:masum@gmail.com"}],s={trip:a["c"].trip.index(),vehicle:a["c"].vehicle.index()+"?bike_category=P",rental:a["c"].vehicleRental.index(),revenue:a["c"].invoice.indexOfRevenue(),payment:a["c"].invoice.indexOfPayment(),rider:a["c"].rider.index()},o={trip:"ViewTrip",vehicle:"ViewVehicleProfile",rental:"VehicleRentalDetail"},l={trip:[{text:"Id",width:"5%",sort:null},{text:"Rider Phone Number",width:"15%",sort:null},{text:"Pickup Time",width:"15%",sort:null},{text:"Charge",width:"10%",sort:null},{text:"Status",width:"10%",sort:null}],vehicle:[{text:"QR Code",width:"20%",sort:null},{text:"IMEI",width:"30%",sort:null},{text:"Last Connected",width:"20%",sort:null},{text:"Flag",width:"30%",sort:null},{text:"Status",width:"10%",sort:null}],rental:[{text:"Id",width:"5%",sort:null},{text:"Rider Phone Number",width:"15%",sort:null},{text:"Pickup Time",width:"15%",sort:null},{text:"Charge",width:"10%",sort:null},{text:"Status",width:"10%",sort:null}],revenue:[{text:"Invoice ID",width:"5%",sort:null},{text:"Transaction Time",width:"15%",sort:null},{text:"Payment For",width:"15%",sort:null},{text:"Amount",width:"10%",sort:null},{text:"Status",width:"10%",sort:null}],payment:[{text:"Invoice ID",width:"5%",sort:null},{text:"Transaction Time",width:"15%",sort:null},{text:"Payment For",width:"15%",sort:null},{text:"Amount",width:"10%",sort:null},{text:"Status",width:"10%",sort:null}],rider:[{text:"Name",width:"15%",sort:null},{text:"Phone Number",width:"15%",sort:null},{text:"Default Card",width:"15%",sort:null},{text:"Balance",width:"10%",sort:null},{text:"Last Trip Status",width:"10%",sort:null}]},c=function(t,e,n){return e?n?"Force Completed by system":"Force Completed by Admin":"A"===t?"'Reservation Cancelled by Rider'":"T"===t?"Reservation time out":"UF"===t?"Unlocking Failed":void 0},u=function(t,e,n){if(e&&n)return"Completed";if(e&&!n)return"Force End";var r={R:"Reserved",A:"Cancelled",U:"Starting",O:"On Rent",V:"Forced",C:"Completed",T:"Time Out",UF:"Failed"};return t in r?r[t]:"-"},d=function(t,e,n){if(e&&n)return"ultra-green";if(e&&!n)return"red";var r={R:"blue",A:"red",U:"yellow",O:"purple",V:"red",C:"green",T:"red",UF:"black"},a=t in r?r[t]:"light-blue";return a},f=function(t){var e=Object(r["a"])(Object(r["a"])(Object(r["a"])({},t.general_flags),t.operational_flags),t.status_flags),n=[];for(var a in e)console.log("v-flag",a,e[a]),"is_idle"!==a&&!0===e[a]&&n.push(a);return console.log("enabled",n),n},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={charging_pick:"Charging Pick",maintainance:"On Maintainance",rebalance:"Rebalance",swap_battery:"Swap Battery",hibernate_mode:"Sleep Mode",restricted_alert:"Restricted Alert",slowzone_alert:"Slowzone Alert",geo_fence_alert:"Geofence Alert",iot_fault:e.general_flags.fault_status_reason,low_battery:"low Battery",missing:"Missing",is_charging:"On Charging",is_parking:"On Parking",is_reserved:"On Reservation",is_on_ride:"On Ride",is_idle:"Idle",none:"None"};return t in n?n[t]:"--"},p=function(t){return"CANCELLED"===t||"REJECTED"===t},h=function(t){var e={REQUESTED:"Pending",ACCEPTED:"Accepted",CANCELLED:"Cancelled",REJECTED:"Rejected",TRIP_COMPLETED:"Completed",DELIVERED:"Rent Started"};return"TRIP_COMPLETED"===t.status?t.trip.status_forced?"Force End":"Completed":e[t.status]||"--"},v=function(t){var e={REQUESTED:"orange",ACCEPTED:"blue",CANCELLED:"red",REJECTED:"blush",TRIP_COMPLETED:"green",DELIVERED:"purple"};return"TRIP_COMPLETED"===t.status?t.trip.status_forced?"red":"green":e[t.status]||"blue"},m=function(t){var e=t.status,n=t.cancel_reason,r=t.reject_reason,a={CANCELLED:"Reason: ".concat(n||"N/A"),REJECTED:"Reason: ".concat(r||"N/A")};return a[e]||"--"},b=function(t){return t.invoice&&"string"!==typeof t.invoice?"".concat(t.invoice.currency.symbol," ").concat(t.invoice.amount):"--"},x=function(t,e){if("revenue"===t){if(e.isArray)return e;var n=[{text:"Subscription Credit/Pass",value:"Pass"},{text:"Card Trip",value:"Trip With Card"},{text:"Balance deduct by admin",value:"Rider Balance Adjust"}],r=n.filter((function(t){return t.value===e}));return r.length>0?r[0].text:e}if("payment"===t){if(e.isArray)return e;var a=[{text:"Card Topup",value:"Topup"},{text:"Agent Topup",value:"Agent Topup"},{text:"Signup Bonus",value:"Initial Balance"},{text:"Referral Bonus by Invitee",value:"Invitee Invitation Amount"},{text:"Referral Bonus by Inviter",value:"Inviter Invitation Amount"},{text:"Balance Transfer by Admin",value:"Rider Balance Adjust"}],i=a.filter((function(t){return t.value===e}));return i.length>0?i[0].text:e}},y=function(t){var e;console.log("card-details",t);var n=(null===t||void 0===t||null===(e=t.brand)||void 0===e?void 0:e.toLowerCase())||"",r="fab ";switch(null===n||void 0===n?void 0:n.toLowerCase()){case"visa":r+="fa-cc-visa";break;case"mastercard":r+="fa-cc-mastercard";break;case"americanexpress":r+="fa-cc-amex";break;case"discover":r+="fa-cc-discover";break;case"jcb":r+="fa-cc-jcb";break;case"dinersclub":r+="fa-cc-diners-club";break;default:r="fas fa-wallet";break}return r},w=function(t){var e={N:"Completed",R:"On Reserved",T:"On Rent",P:"On Pay",F:"On Feedback"};return t in e?e[t]:"--"},C=function(t){var e={N:"green",R:"orange",T:"purple",P:"yellow",F:"blue"};return t in e?e[t]:"gray"}},3247:function(t,e,n){},"4aee":function(t,e,n){},"5ce4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card-container",class:[t.getSizeClass,t.getVariantClass]},[n("div",{staticClass:"card-title text-gray-500"},[t._v(" "+t._s(t.title)+" ")]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"left ",class:t.getValueVariantClass},[t._v(" "+t._s(t.symbol?t.symbol+" ":"")+t._s(t.value)+" ")]),n("div",{staticClass:"right"},[t._t("icon",(function(){return[n("i",{staticClass:"icon",class:t.icon})]}))],2)])])])},a=[],i=(n("a9e3"),n("caad"),n("2532"),n("b64b"),{name:"SummaryCard",props:{title:{required:!1,type:String},symbol:{required:!1,type:String},value:{required:!1,type:[String,Number]},icon:{required:!1,type:String},size:{type:String,default:"normal"},variant:{type:String,default:"blue"},valueVariant:{type:String,default:"black"}},computed:{getSizeClass:function(){var t={small:"card-size-small",normal:"card-size-normal",large:"card-size-large"};return Object.keys(t).includes(this.size)?t[this.size]:t["normal"]},getVariantClass:function(){var t=["deep-orange","orange","green","red","deep-blue","blue","light-blue","yellow","purple","gray"],e="variant-blue";return t.includes(this.variant)?(e="variant-".concat(this.variant),e):e},getValueVariantClass:function(){var t=["black","green","red"],e="variant-black";return t.includes(this.valueVariant)?(e="value-variant-".concat(this.valueVariant),e):e}}}),s=i,o=(n("e818"),n("2877")),l=Object(o["a"])(s,r,a,!1,null,"69873420",null);e["default"]=l.exports},"612a":function(t,e,n){},"619d":function(t,e,n){},7597:function(t,e,n){},7686:function(t,e,n){"use strict";n("4aee")},a27f:function(t,e,n){"use strict";n("246c")},a8c9:function(t,e,n){"use strict";n("612a")},acfd:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:t.getClass,style:"white-space: nowrap; width: "+t.width+"; height: "+t.height,on:{click:t.onClick}},[n("loading",{class:"outline-none",attrs:{active:t.getLoaderState,height:25,opacity:0,color:"transparent"===t.variant||"secondary"===t.variant||"light"===t.variant?"#333":"#fff",loader:"bars","is-full-page":!1}}),n("div",{class:{invisible:t.isLoading}},[t._t("default",(function(){return[t._v(" "+t._s(t.text)+" ")]}))],2)],1)},a=[],i=(n("99af"),{name:"AppButton",props:{text:{required:!1},variant:{required:!1,default:"default"},isLoading:{type:Boolean,required:!1,default:!1},width:{type:String,required:!1,default:"auto"},height:{type:String,required:!1,default:"36px"},disabled:{type:Boolean,required:!1,default:!1},rounded:{type:[Boolean,String],default:!0}},computed:{getRoundedClass:function(){return!0===this.rounded?"rounded":!1===this.rounded?"rounded-none":"rounded-"+this.rounded},getClass:function(){var t="relative flex items-center justify-center text-center px-4 font-semibold text-14px leading-normal ".concat(this.getRoundedClass," transition ease-in-out duration-150 cursor-pointer focus:outline-none "),e="border border-transparent bg-disabled text-white ";return this.disabled?"".concat(t," ").concat(e):"secondary"===this.variant?"".concat(t," bg-gray-100 border border-transparent hover:border-gray-900 hover:text-gray-900 focus:bg-gray-300"):"transparent"===this.variant?"".concat(t," bg-transparent text-gray-700 border border-transparent hover:text-gray-900 cursor-default-important"):"light"===this.variant?"".concat(t," bg-white text-gray-700 border border-transparent hover:border-gray-900 hover:text-gray-900 focus:bg-gray-300"):"blue"===this.variant?"".concat(t," text-gray-100 bg-custom-blue border border-transparent hover:border-blue-600 hover:text-white hover:opacity-75 focus:border-blue-500"):"green"===this.variant?"".concat(t," text-gray-100 bg-oGreen border border-transparent hover:border-green-600 hover:text-white hover:opacity-75 focus:border-green-500"):"green-alt"===this.variant?"".concat(t," text-gray-100 bg-green-alt-button text-oGreen border border-transparent hover:border-green-600 hover:text-green-600 focus:border-green-500"):"red"===this.variant?"".concat(t," text-gray-100 bg-oRed border border-transparent hover:border-red-600 hover:text-white hover:opacity-75 focus:border-red-500"):"orange"===this.variant?"".concat(t," text-gray-100 bg-orange-button border border-transparent hover:bg-orange-200 hover:border-orange-200 hover:text-white focus:bg-orange-300"):"orange-alt"===this.variant?"".concat(t," text-gray-100 bg-orange-alt-button text-oOrange border border-transparent hover:border-orange-600 hover:text-orange-600 focus:border-orange-500"):"add-balance"===this.variant?"".concat(t," text-gray-100 bg-orange-button border border-transparent hover:bg-orange-200 hover:border-orange-200 hover:text-white focus:bg-orange-300"):"gray"===this.variant?"".concat(t," text-gray-100 bg-gray-400 border border-transparent hover:bg-gray-300 hover:border-gray-300 hover:text-white focus:bg-gray-300"):"gray-alt"===this.variant?"".concat(t," text-gray-700 bg-gray-50 border border-gray-300 hover:bg-gray-300 hover:text-oBlack "):"gray-green"===this.variant?"".concat(t," text-gray-100 bg-gray-400 border border-gray-300 hover:bg-green-600 hover:text-oWhite "):"light-green"===this.variant?"".concat(t," text-gray-700 bg-gray-50 border border-gray-300 hover:bg-green-600 hover:text-oWhite "):"gray-red"===this.variant?"".concat(t," text-gray-700 bg-gray-50 border border-gray-300 hover:bg-red-600 hover:text-oWhite "):"border-red-bg-gray"===this.variant?"".concat(t," text-gray-700 bg-gray-50 border border-red-500 hover:bg-red-600 hover:text-oWhite "):"".concat(t," text-gray-100 bg-gray-900 border border-transparent hover:text-white hover:bg-gray-800 hover:border-gray-800 focus:bg-gray-700")},getLoaderState:function(){return(!this.href||"javascript:void(0);"===this.href)&&this.isLoading}},methods:{onClick:function(){!1===this.isLoading&&!1===this.disabled&&this.$emit("click")}}}),s=i,o=(n("7686"),n("2877")),l=Object(o["a"])(s,r,a,!1,null,"07230c7b",null);e["default"]=l.exports},bcf7:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex items-center font-semibold text-oDark text-28px"},[t._t("default",(function(){return[t._v(t._s(t.title))]})),t.hidePlus?t._e():n("div",{staticClass:"flex items-center justify-center w-6 h-6 ml-2 rounded-full cursor-pointer oto-plus-bg",on:{click:function(e){return t.handleClickingPlus()}}},[n("svg",{staticClass:"w-6 h-6 text-white",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"}})])])],2)},a=[],i={name:"TitlePlus",props:{title:{type:String},hidePlus:{type:Boolean,default:!1}},methods:{handleClickingPlus:function(){this.$emit("plus")}}},s=i,o=(n("a8c9"),n("2877")),l=Object(o["a"])(s,r,a,!1,null,"ec17ab2c",null);e["default"]=l.exports},dc1f:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white rounded"},[n("div",{staticClass:"px-4 mt-2"},[n("TitlePlus",{staticClass:"mb-10",attrs:{title:t.$t("components.vehicleDetailsManagement.diveIntoTab.notes.headline"),"hide-plus":t.$acl.canNotCreate("vehicles")},on:{plus:function(e){return t.onAddEdit({mode:"add"})}}})],1),n("div",{staticClass:"flex flex-col px-4 mt-4 mb-10 md:items-center md:flex-row"},[n("SummaryCard",{attrs:{title:t.$t("components.vehicleDetailsManagement.diveIntoTab.notes.summary.totalNotes"),value:t.indexMetaData.count.total,variant:"gray"}})],1),[n("div",{staticClass:"full-mode"},[n("FSTable",{attrs:{"fst-id":"vehicleNotes",endpoint:t.getEndpoint,headers:t.tableHeaders},on:{meta:function(e){return t.indexMetaData=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return t._l(r,(function(e,r){return n("FSTableRow",{key:r,attrs:{"text-fallback-always":""}},[n("FSTableRowItem",{attrs:{text:e.id,truncate:-5}}),n("FSTableRowItem",{attrs:{text:e.details}}),n("FSTableRowItem",{attrs:{text:e.created_by.full_name}}),n("FSTableRowItem",{attrs:{text:e.created_by.role_name}}),n("FSTableRowItem",{attrs:{text:e.created_at,date:""}}),n("FSTableRowItem",[n("div",{staticClass:"flex justify-end"},[n("TDropdown",{key:"actions-"+e.id,attrs:{variant:"smActions"},scopedSlots:t._u([{key:"trigger",fn:function(t){var e=t.mousedownHandler,r=t.focusHandler,a=t.blurHandler,i=t.keydownHandler;return[n("button",{staticClass:"w-5 app-form-reset",attrs:{"aria-label":"Report Status Menu","aria-haspopup":"true"},on:{mousedown:e,focus:r,blur:a,keydown:i}},[n("i",{staticClass:"text-sm text-gray-400 fas fa-ellipsis-v"})])]}},{key:"default",fn:function(){return[n("div",{staticClass:"py-1 bg-white rounded shadow"},[n("div",{staticClass:"py-2 px-4 text-sm text-red-500 cursor-pointer hover:bg-red-100",on:{click:function(n){return t.onDelete({noteId:e.id})}}},[t._v(" Delete ")])])]},proxy:!0}],null,!0)})],1)])],1)}))}}])})],1),n("div",{staticClass:"responsive-mode"},[n("FSTable",{attrs:{"fst-id":"vehicleNotes",endpoint:t.getEndpoint,headers:t.resTableHeaders},on:{meta:function(e){return t.indexMetaData=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.data;return[t._l(r,(function(e,r){return[n("FSTableRow",{key:"fs-table-row-"+r,attrs:{"text-fallback-always":""}},[n("FSTableRowItem",[n("div",{staticClass:"col-span-1 focus:text-gray-400",on:{click:function(e){return t.toggle(r)}}},[t.opened.includes(r)?n("i",{staticClass:"fas fa-minus-circle",staticStyle:{color:"#d90a20"}}):n("i",{staticClass:"fas fa-plus-circle"})])]),n("FSTableRowItem",{attrs:{text:e.details}}),n("FSTableRowItem",{attrs:{text:e.created_by.full_name}}),n("FSTableRowItem",{attrs:{text:e.created_at,date:""}})],1),t.opened.includes(r)?n("FSTableRow",{key:r},[n("td",{attrs:{colspan:"10"}},[n("div",{staticClass:"grid grid-cols-10 items-center w-full expand-item"},[n("div",{staticClass:"col-span-5 left-text"},[t._v("Id")]),n("div",{staticClass:"col-span-5 right-text"},[t._v(" "+t._s(t.truncate(e.id,-5,"#")||"--")+" ")])]),n("div",{staticClass:"grid grid-cols-10 items-center w-full expand-item"},[n("div",{staticClass:"col-span-5 left-text"},[t._v("Created Role")]),n("div",{staticClass:"col-span-5 right-text"},[t._v(" "+t._s(e.created_by.role_name||"--")+" ")])]),n("div",{staticClass:"grid grid-cols-10 items-center w-full expand-item"},[n("div",{staticClass:"col-span-5 left-text"},[t._v("Actions")]),n("div",{staticClass:"col-span-5 right-text"},[n("div",{staticClass:"flex justify-start"},[n("TDropdown",{key:"actions-"+e.id,attrs:{variant:"smActions"},scopedSlots:t._u([{key:"trigger",fn:function(t){var e=t.mousedownHandler,r=t.focusHandler,a=t.blurHandler,i=t.keydownHandler;return[n("button",{staticClass:"w-5 app-form-reset",attrs:{"aria-label":"Report Status Menu","aria-haspopup":"true"},on:{mousedown:e,focus:r,blur:a,keydown:i}},[n("i",{staticClass:"text-sm text-gray-400 fas fa-ellipsis-v"})])]}},{key:"default",fn:function(){return[n("div",{staticClass:"py-1 bg-white rounded shadow"},[n("div",{staticClass:"py-2 px-4 text-sm text-red-500 cursor-pointer hover:bg-red-100",on:{click:function(n){return t.onDelete({noteId:e.id})}}},[t._v(" Delete ")])])]},proxy:!0}],null,!0)})],1)])])])]):t._e()]}))]}}])})],1)],n("TModal",{attrs:{name:"addEditNote",variant:"popupAlt"},on:{opened:t.onAddEditOpened}},[n("div",{staticClass:"pl-4 mt-4 text-lg font-bold"},[t._v(" "+t._s(t.$t("components.vehicleDetailsManagement.diveIntoTab.notes.addEdit.title"))+" ")]),n("div",{staticClass:"px-4 pt-10 pb-12"},[n("SweetMark",{ref:"sweetMarkRef",attrs:{placeholder:t.$t("components.vehicleDetailsManagement.diveIntoTab.notes.addEdit.placeholder"),"persistent-button":""},on:{save:function(e){return t.onSaveNote({note:e,entityId:t.reqId,entityName:"bike"})}},model:{value:t.addEdit.model,callback:function(e){t.$set(t.addEdit,"model",e)},expression:"addEdit.model"}})],1)])],2)},a=[],i=n("1da1"),s=(n("96cf"),n("a434"),n("c820")),o=n("4138"),l=n("bcf7"),c=n("119e"),u=n("5ce4"),d=n("4a6d"),f={name:"VehicleNoteIndex",components:{SummaryCard:u["default"],FSTable:o["a"],FSTableRow:o["d"],FSTableRowItem:o["e"],TitlePlus:l["default"],SweetMark:c["a"]},data:function(){return{indexMetaData:{count:{total:0}},tableHeaders:[{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.id"),width:"10%",sort:"id"},{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.note"),width:"30%",sort:"rider"},{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.createdBy"),width:"15%",sort:"date"},{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.creatorRole"),width:"15%",sort:"date"},{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.createdAt"),width:"20%",sort:null},{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.actions"),width:"10%",sort:null}],resTableHeaders:[{text:"",width:"10%",sort:null},{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.note"),width:"20%",sort:"rider"},{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.createdBy"),width:"40%",sort:"date"},{text:this.$t("components.vehicleDetailsManagement.diveIntoTab.notes.table.columns.createdAt"),width:"30%",sort:"date"}],opened:[],addEdit:{model:""}}},computed:{reqId:function(){return this.$route.params.id},getEndpoint:function(){return s["c"].note.index(this.reqId,"bike")}},methods:{truncate:d["a"],toggle:function(t){var e=this.opened.indexOf(t);e>-1?this.opened.splice(e,1):this.opened.push(t)},notify:function(t){var e=t.title,n=void 0===e?"Create Note":e,r=t.text,a=void 0===r?"Note successfully created":r,i=t.type,s=void 0===i?"success":i,o=t.duration,l=void 0===o?3e3:o;this.$notify({group:"bottomRight",type:s,title:n,text:a},l)},onAddEdit:function(t){var e=t.mode;console.log(e),this.$modal.show("addEditNote")},onAddEditOpened:function(){var t=this,e=setTimeout((function(){t.$refs.sweetMarkRef.focus(),clearTimeout(e)}),100)},onSaveNote:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,l,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.note,a=t.entityId,o=t.entityName,l=void 0===o?"bike":o,console.log(r,a,l),c=new FormData,c.append("details",r),n.next=6,e.$http.post(s["c"].note.create(a,l),c).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(n.data),e.addEdit.model="",e.notify({type:"success"}),e.$modal.hide("addEditNote"),t.next=6,e.$store.dispatch("fsTable/fetchData");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){var n={type:"danger",title:"Failed to Add Note",text:t.response||"Server error occured!"};console.log(t.response),e.notify(n)}));case 6:case"end":return n.stop()}}),n)})))()},onDelete:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.noteId,!e.$acl.canNotDelete("vehicles")){n.next=4;break}return e.$notify(e.$acl.notAbleToToast({action:"delete",permission:"notes"})),n.abrupt("return");case 4:return a=s["c"].note.delete(r),n.next=7,e.$http.delete(a).then(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.notify({title:"Delete Note",text:"Note successfully deleted"}),t.next=3,e.$store.dispatch("fsTable/fetchData");case 3:case"end":return t.stop()}}),t)}))));case 7:case"end":return n.stop()}}),n)})))()}}},g=f,p=(n("a27f"),n("2877")),h=Object(p["a"])(g,r,a,!1,null,"6361948c",null);e["default"]=h.exports},e818:function(t,e,n){"use strict";n("3247")},f432:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isPopShow,expression:"isPopShow"}],staticClass:" fixed inset-x-0 bottom-0 z-50 flex  bg-gray-50 shadow-2xl rounded-t-md ",class:(t.isFullView?"max-h-90vh":"h-10")+" "+(t.getSmallScreenStatus?"mx-5 w-auto":"ml-16 w-96")},[n("div",{staticClass:"w-full"},[t.isFullView?t._e():n("loading",{class:"outline-none",attrs:{active:t.isLoading,height:25,opacity:0,color:"#fff",loader:"bars","is-full-page":!1}}),n("div",{staticClass:"h-10 bg-gray-900 rounded-t-md flex justify-between items-center px-4"},[n("div",{staticClass:"text-oWhite font-medium"},[n("p",[t._v(" "+t._s(t.getPopupHeadline)+" ("+t._s(t.getCompletedSuggestionsCount)+"/"+t._s(t.getSuggestions.length)+") ")])]),n("div",{staticClass:"flex gap-4 items-center justify-center"},[n("div",{staticClass:"cursor-pointer",on:{click:t.handleReload}},[n("i",{staticClass:"text-base fas text-oWhite fa-rotate-right"})]),n("div",{staticClass:"cursor-pointer",on:{click:t.toggleView}},[n("i",{staticClass:"text-base fas text-oWhite",class:t.isFullView?"fa-down-left-and-up-right-to-center":"fa-up-right-and-down-left-from-center"})]),n("div",{staticClass:"cursor-pointer",on:{click:t.handlePopClose}},[n("i",{staticClass:"text-base fas text-oWhite fa-xmark"})])])]),n("div",{staticClass:"px-2 relative"},[t.isFullView?n("loading",{class:"outline-none",attrs:{active:t.isLoading,height:25,opacity:.8,color:"#000",loader:"bars","is-full-page":!1}}):t._e(),n("div",{staticClass:" mt-2  flex items-center gap-2"},t._l(t.getSuggestions,(function(t,e){return n("div",{key:t.id+"-"+e,staticClass:"border-2 border-t-2  w-full rounded",class:t.isCompleted?"border-green-500":""})})),0),n("div",{staticClass:"py-2 overflow-auto max-h-88vh"},t._l(t.getSuggestions,(function(e,r){return n("div",{key:e.id,staticClass:"flex gap-3 py-2"},[n("div",{staticClass:"relative"},[n("div",{staticClass:"top-0 left-0 flex items-center justify-center bg-gray-200 rounded-full w-8 h-8"},[e.isCompleted?n("i",{staticClass:"fa fa-check-circle text-green-600"}):n("span",{staticClass:"bg-gray-900 badge"},[t._v(t._s(r+1))])])]),n("div",{staticClass:"w-full"},[n("div",{staticClass:"flex gap-4 justify-between"},[n("p",{staticClass:"font-medium"},[t._v(t._s(e.title))]),n("div",{staticClass:"mr-2"},[n("router-link",{attrs:{to:e.path,target:"_blank"}},[n("i",{staticClass:"fas fa-arrow-up-right-from-square text-blue-600 text-sm cursor-pointer"})])],1)]),n("p",{staticClass:"text-sm text-gray-500 text-justify mr-2"},[t._v(" "+t._s(e.subtitle)+" ")])])])})),0)],1)],1)])},a=[],i={name:"PopSuggestion",data:function(){return{}},computed:{isLoading:function(){return this.$store.getters["suggestiveStep/getReqStatus"]},isFullView:{get:function(){return this.$store.getters["suggestiveStep/getFullViewStatus"]},set:function(t){this.$store.commit("suggestiveStep/SET_FULL_VIEW_STATUS",t)}},isPopShow:{get:function(){return this.$store.getters["suggestiveStep/getPopViewStatus"]},set:function(t){this.$store.commit("suggestiveStep/SET_POPUP_VIEW_STATUS",t)}},getPopupHeadline:function(){return this.$store.getters["suggestiveStep/getHeadline"]},getSuggestions:function(){return this.$store.getters["suggestiveStep/getSuggestions"]},getCompletedSuggestionsCount:function(){return this.$store.getters["suggestiveStep/getCompletedSuggestions"].length},getSmallScreenStatus:function(){return this.$store.getters["screen/getSmallScreenStatus"]}},methods:{toggleView:function(){this.isFullView=!this.isFullView},handlePopClose:function(){this.isPopShow=!1},handleReload:function(){this.$store.dispatch("suggestiveStep/fetchData")}}},s=i,o=(n("2dd8"),n("2877")),l=Object(o["a"])(s,r,a,!1,null,null,null);e["a"]=l.exports},f51e:function(t,e,n){"use strict";n("7597")},f7fe:function(t,e,n){(function(e){var n="Expected a function",r=NaN,a="[object Symbol]",i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,f=u||d||Function("return this")(),g=Object.prototype,p=g.toString,h=Math.max,v=Math.min,m=function(){return f.Date.now()};function b(t,e,r){var a,i,s,o,l,c,u=0,d=!1,f=!1,g=!0;if("function"!=typeof t)throw new TypeError(n);function p(e){var n=a,r=i;return a=i=void 0,u=e,o=t.apply(r,n),o}function b(t){return u=t,l=setTimeout(_,e),d?p(t):o}function y(t){var n=t-c,r=t-u,a=e-n;return f?v(a,s-r):a}function w(t){var n=t-c,r=t-u;return void 0===c||n>=e||n<0||f&&r>=s}function _(){var t=m();if(w(t))return S(t);l=setTimeout(_,y(t))}function S(t){return l=void 0,g&&a?p(t):(a=i=void 0,o)}function T(){void 0!==l&&clearTimeout(l),u=0,a=c=i=l=void 0}function k(){return void 0===l?o:S(m())}function E(){var t=m(),n=w(t);if(a=arguments,i=this,c=t,n){if(void 0===l)return b(c);if(f)return l=setTimeout(_,e),p(c)}return void 0===l&&(l=setTimeout(_,e)),o}return e=C(e)||0,x(r)&&(d=!!r.leading,f="maxWait"in r,s=f?h(C(r.maxWait)||0,e):s,g="trailing"in r?!!r.trailing:g),E.cancel=T,E.flush=k,E}function x(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){return!!t&&"object"==typeof t}function w(t){return"symbol"==typeof t||y(t)&&p.call(t)==a}function C(t){if("number"==typeof t)return t;if(w(t))return r;if(x(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=x(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=o.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):s.test(t)?r:+t}t.exports=b}).call(this,n("c8ba"))}}]);
//# sourceMappingURL=vehicle-management-ViewVehicleNotes.cb3defe4.js.map