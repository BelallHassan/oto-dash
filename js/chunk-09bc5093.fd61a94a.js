(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09bc5093","chunk-2d0d3e80","chunk-37a667de","chunk-2d0d3e80"],{"09b2":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"relative z-20 mr-2"},[n("div",{class:"relative object-cover overflow-hidden bg-gray-300 border-0 rounded-full",style:e.getStyle},[e.avatar?n("img",{class:"object-cover rounded-full",style:e.getStyle,attrs:{src:e.avatar}}):e._e()]),e.badge?n("div",{staticClass:"avatar-badge",class:e.badgeVariant},[e._v(" "+e._s(e.badge)+" ")]):e._e()])},r=[],i=(n("a9e3"),n("8ba4"),n("99af"),{name:"DisplayAvatar",props:{avatar:{type:String,required:!1},width:{type:[String,Number],required:!1,default:"6rem"},height:{type:[String,Number],required:!1,default:"6rem"},badge:{type:String,required:!1},badgeVariant:{type:String,required:!1,default:"fallback",validator:function(e){var t=["fallback","green","orange","red"];return-1!==t.indexOf(e)}}},computed:{getStyle:function(){var e=Number.isInteger(this.width)?"".concat(this.width,"px"):this.width,t=Number.isInteger(this.height)?"".concat(this.height,"px"):this.height;return"width: ".concat(e,"; height: ").concat(t)}}}),a=i,o=(n("23dd"),n("2877")),d=Object(o["a"])(a,s,r,!1,null,"102ed4b5",null);t["default"]=d.exports},"18b0":function(e,t,n){},"1dc9":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var s={api:{index:"/dashboard/org-users/",single:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/org-users/".concat(e,"/")},create:"/dashboard/org-users/",payment_create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/org-users/".concat(e,"/payment-info/")},document_create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/org-users/".concat(e,"/document-info/")},address_create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/org-users/".concat(e,"/address-info/")},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/org-users/".concat(e,"/")},activate:"/dashboard/org-users/activate/",verifyDocs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/org-users/".concat(e,"/document-info/")},updateStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uuid";return"/dashboard/org-users/".concat(e,"/update-status/")}},events:{name:"org-user",refresh:"rid-org-user",sorId:"org-user",sorOpen:"sor-open-org-user",sorClose:"sor-close-org-user",sorToggle:"sor-toggle-org-user",editingData:"edit-org-user-data",viewingData:"view-org-user-data",succeededStep1:"succeeded-step-1",succeededStep2:"succeeded-step-2",succeededStep3:"succeeded-step-3",succeededStep4:"succeeded-step-4"}}},"23dd":function(e,t,n){"use strict";n("5ac1")},"3df2":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("EdgeStack",{attrs:{id:e.esId},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"pb-3 panel-title"},[e._v(e._s(e.getTitleText))]),n("XStepper",{ref:"xstepper",attrs:{id:e.esId,steps:e.stepperSteps,mode:e.stepperMode},model:{value:e.stepperCurrentStep,callback:function(t){e.stepperCurrentStep=t},expression:"stepperCurrentStep"}})]},proxy:!0},{key:"footer",fn:function(){return[e.isEditing?n("XStepperNavigation",{attrs:{id:e.esId,steps:e.stepperSteps,"submit-button-text":e.getSubmitButtonText},on:{submit:e.onSubmit},model:{value:e.stepperCurrentStep,callback:function(t){e.stepperCurrentStep=t},expression:"stepperCurrentStep"}}):e._e(),e.isEditing?e._e():n("AppButton",{attrs:{text:e.getSubmitButtonText},on:{click:function(t){return e.onSubmit({step:e.stepperCurrentStep})}}})]},proxy:!0},{key:"default",fn:function(){return[n("keep-alive",[1===e.stepperCurrentStep?[n("Step1",{ref:"step1",attrs:{roles:e.roles,fleets:e.fleets,"user-id":e.theUserId,currencies:e.currencies,"form-data":e.getStep1FormData,"is-editing":e.isEditing},on:{save:function(t){return e.onSave(t)},dirty:function(t){return e.onDirty(!0)}}})]:2===e.stepperCurrentStep?[n("Step2",{ref:"step2",attrs:{"user-id":e.theUserId,roles:e.roles,"form-data":e.getStep2FormData,"is-editing":e.isEditing},on:{save:function(t){return e.onSave(t)},dirty:function(t){return e.onDirty(!0)}}})]:3===e.stepperCurrentStep?[n("Step3",{ref:"step3",attrs:{countries:e.countries,"user-id":e.theUserId,"form-data":e.getStep3FormData,"is-editing":e.isEditing},on:{save:function(t){return e.onSave(t)},dirty:function(t){return e.onDirty(!0)}}})]:e._e()],2)]},proxy:!0}])})},r=[],i=n("1da1"),a=n("2909"),o=(n("96cf"),n("a9e3"),n("d81d"),n("e5b3")),d=n("8992"),l=n("bc84"),u=n("4674"),c=n("de6f"),p=n("acfd"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[n("loading",{attrs:{active:e.isLoading,"is-full-page":!1},on:{"update:active":function(t){e.isLoading=t}}}),n("form",{staticClass:" 2xl:px-6 sm:px-1",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),s(e.submitStep)}}},[n("div",{staticClass:"grid items-center grid-cols-1  my-4 px-5"},[n("div",{staticClass:"flex items-center w-full gap-4"},[n("upload-avatar",{attrs:{current:e.form.profile_pic},model:{value:e.form.profile_pic,callback:function(t){e.$set(e.form,"profile_pic",t)},expression:"form.profile_pic"}}),n("AppInput",{attrs:{rules:"required",label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.fullName"),placeholder:"e.g. Junior Martin"},model:{value:e.form.full_name,callback:function(t){e.$set(e.form,"full_name",t)},expression:"form.full_name"}})],1)]),n("AppInput",{staticClass:"px-5",attrs:{rules:"required|min:4",name:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.userName"),label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.userName"),placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.profile.placeHolder.userName"),disabled:e.getDisableStatus},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),n("AppInput",{staticClass:"px-5",attrs:{rules:"required",name:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.phoneNumber"),label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.phoneNumber"),placeholder:"e.g 01700000000",type:"tel",haveSuggestion:!0,isSuggestionAlert:e.isPhoneNumberExist,suggestionNonAlertClass:e.isPhoneNumberChecking?"text-gray-700 font-semibold":"text-green-500 font-semibold",suggestionText:e.suggestionsForPhoneNumber},on:{input:e.onChangePhoneNumber,"country-changed":e.onCountryChanged},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}}),n("AppInput",{staticClass:"px-5",attrs:{placeholder:"e.g. martin@gmail.com",rules:"required",name:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.email"),label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.email"),type:"email",haveSuggestion:!0,isSuggestionAlert:e.isEmailExist,suggestionNonAlertClass:e.isEmailChecking?"text-gray-700 font-semibold":"text-green-500 font-semibold",suggestionText:e.suggestionsForEmail},on:{input:e.onChangeEmail},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e.isEditing?e._e():n("AppInput",{staticClass:"px-5",attrs:{type:"password",name:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.password"),label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.password"),rules:e.isEditing?"":"required|min:6",disabled:e.isEditing},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),n("AppInput",{staticClass:"px-5",attrs:{rules:"required",type:"richselect",name:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.assignedFleets"),label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.assignedFleets"),options:e.fleets,"text-attribute":"name","value-attribute":"id","hide-search-box":!1,placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.profile.placeHolder.assignedFleets"),multiple:""},model:{value:e.form.assigned_fleets,callback:function(t){e.$set(e.form,"assigned_fleets",t)},expression:"form.assigned_fleets"}}),n("AppInput",{staticClass:"px-5",attrs:{rules:"required",type:"richselect",name:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.preferredCurrency"),label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.preferredCurrency"),options:e.currencies,"text-attribute":"name","value-attribute":"id","hide-search-box":!1,placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.profile.placeHolder.preferredCurrency")},model:{value:e.form.preferred_currency,callback:function(t){e.$set(e.form,"preferred_currency",t)},expression:"form.preferred_currency"}}),n("div",{staticClass:"grid grid-cols-2 gap-4 mt-2 px-5"},[n("AppInput",{attrs:{type:"richselect",label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.gender"),options:e.getGenders,"text-attribute":"text","value-attribute":"value","hide-search-box":!0,placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.profile.placeHolder.gender")},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}}),n("AppInput",{attrs:{type:"date",placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.profile.placeHolder.dateOfBirth"),label:e.$t("components.organizationUsersManagement.addEdit.steps.profile.title.dateOfBirth"),max:e.maxBirthDate},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),n("button",{ref:"submitButton",staticClass:"hidden",attrs:{type:"submit"}},[e._v(" Save ")])],1)]}}])})},f=[],g=n("5530"),_=(n("fb6a"),n("d3b7"),n("ac1f"),n("5319"),n("159b"),n("a689")),h=n.n(_),b=n("ed08"),v=n("1dc9"),y=n("f7fe"),x=n.n(y),I=n("219c"),S=n("c820"),k={name:"Step1",components:{UploadAvatar:I["a"]},props:{fleets:{required:!0},currencies:{required:!0},userId:{type:null,required:!1},formData:{required:!1},isEditing:{type:Boolean,required:!1,default:!1}},created:function(){this.maxDatecalculation()},data:function(){return{isLoading:!1,isPhoneNumberChecking:!1,isPhoneNumberExist:!1,suggestionsForPhoneNumber:"",currentPhoneNumber:null,isEmailChecking:!1,isEmailExist:!1,suggestionsForEmail:"",currentEmail:null,form:{profile_pic:"",ranger_job_type:"FULLTIME",full_name:"",username:"",country_code:"",phone_number:"",email:"",password:"",birthday:"1971-12-16",gender:"M",assigned_fleets:[],preferred_currency:null},show_password:!1,selFleets:[],is_change_password:!1,change_edit:!1,error_exist_phone_number:"",maxBirthDate:"",phoneNoInfo:null}},computed:{getJobTypes:function(){return[{text:"Full Time",value:"FULLTIME"},{text:"Part Time",value:"PARTTIME"}]},getGenders:function(){return[{text:"Male",value:"M"},{text:"Female",value:"F"},{text:"Others",value:"O"}]},getDisableStatus:function(){var e;return(null===(e=this.$user)||void 0===e||!e.is_superadmin)&&"Owner"===this.form.role_name}},watch:{formData:{immediate:!0,deep:!0,handler:function(e){e&&(this.form=Object(g["a"])({},e),this.currentPhoneNumber=e.phone_number,this.currentEmail=e.email)}},form:{immediate:!1,deep:!0,handler:function(e){Object(b["c"])(this.formData,e)||this.$emit("dirty",{step:1,data:this.form})}}},methods:{maxDatecalculation:function(){var e=new Date,t=e-3786912e5;this.maxBirthDate=new Date(t).toISOString().slice(0,10)},onCountryChanged:function(e){console.log("phoneNoInfo",e),this.phoneNoInfo=e},saveCountryCode:function(e){this.form.country_code=e},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.submitButton.click();case 1:case"end":return t.stop()}}),t)})))()},onChangePhoneNumber:function(e){var t=h()(e,this.phoneNoInfo.iso2).getNumber("e164");t&&t!==this.currentPhoneNumber?this.onCheckPhoneNumber(t):(this.isPhoneNumberExist=!1,this.suggestionsForPhoneNumber="")},onCheckPhoneNumber:x()((function(e){var t=this;this.isPhoneNumberExist=!1,this.isPhoneNumberChecking=!0,this.suggestionsForPhoneNumber="Checking...",this.$http.get(S["c"].user.org.checkPhoneNumberExistence(e.replace("+","%2b"))).then((function(e){t.isPhoneNumberExist=e.data.phone_number_exists,t.isPhoneNumberExist?t.suggestionsForPhoneNumber="The Number is already exist":t.suggestionsForPhoneNumber="This number is available."})).catch((function(e){return console.log("onCheckPhone-err",e.response)})).finally((function(){t.isPhoneNumberChecking=!1}))}),2e3),onChangeEmail:function(e){console.log("onChangeEmail",e,this.currentEmail),e&&e!==this.currentEmail?this.onCheckEmail(e):(this.isEmailExist=!1,this.suggestionsForEmail="")},onCheckEmail:x()((function(e){var t=this;this.isEmailExist=!1,this.isEmailChecking=!0,this.suggestionsForEmail="Checking...",this.$http.get(S["c"].user.org.checkEmailExistence(e.replace("+","%2b"))).then((function(e){t.isEmailExist=e.data.email_exists,t.isEmailExist?t.suggestionsForEmail="The Email is already exist":t.suggestionsForEmail="The Email is available"})).catch((function(e){return console.log("onCheckEmail-err",e.response)})).finally((function(){t.isEmailChecking=!1}))}),2e3),submitStep:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,s,r,i,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object(g["a"])({},e.form),s.ranger_job_type="FULLTIME",e.isEditing&&delete s.password,r=e.isEditing?"PATCH":"POST",i=e.isEditing?v["a"].api.update(e.userId):v["a"].api.create,null!=s.profile_pic&&"string"!==typeof s.profile_pic||delete s.profile_pic,a=new FormData,s.profile_pic&&a.append("profile_pic",s.profile_pic),a.append("full_name",s.full_name),o=h()(s.phone_number,e.phoneNoInfo.iso2).getNumber("e164"),console.log("phoneNo",s.phone_number,e.form.phone_number,o),a.append("phone_number",o),a.append("email",s.email),a.append("birthday",s.birthday),a.append("gender",s.gender),a.append("ranger_job_type",s.ranger_job_type),s.password&&a.append("password",s.password),null!==s&&void 0!==s&&null!==(n=s.assigned_fleets)&&void 0!==n&&n.length&&s.assigned_fleets.forEach((function(e){a.append("assigned_fleets",e)})),a.append("preferred_currency",s.preferred_currency),a.append("username",s.username),e.isLoading=!0,t.next=23,e.$http({method:r,url:i,data:a}).then((function(t){e.$emit("save",{step:1,data:t.data});var n="Organization User ".concat(e.isEditing?"updated":"added"," successfully");e.$notify({group:"important",type:"success",title:"Success",text:n},5e3)})).catch((function(t){var n;console.log("errorOccurred",t.response),e.$notify({group:"important",type:"error",title:"Error occurred!",text:null!==(n=t.response.data.message)&&void 0!==n?n:t.response.data},12e3),console.warn(t)})).finally((function(){return e.isLoading=!1}));case 23:case"end":return t.stop()}}),t)})))()}}},$=k,E=n("2877"),C=Object(E["a"])($,m,f,!1,null,null,null),w=C.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[n("loading",{attrs:{active:e.isLoading,"is-full-page":!1},on:{"update:active":function(t){e.isLoading=t}}}),n("form",{staticClass:"sm:pb-24 2xl:px-6 2xl:pb-3 sm:px-1",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),s(e.submitStep)}}},[n("AppInput",{attrs:{type:"richselect",name:"Role Type",label:e.$t("components.organizationUsersManagement.addEdit.steps.permission.title.roleType"),rules:"required",options:e.roles,valueAttribute:"id",textAttribute:"role_name",placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.permission.placeHolder.selectRole"),"hide-search-box":!0,multiple:""},on:{"update:options":function(t){e.roles=t}},model:{value:e.form.selectedRoles,callback:function(t){e.$set(e.form,"selectedRoles",t)},expression:"form.selectedRoles"}}),n("div",{staticClass:"mt-1"},[e.permissionsDetails.length>0?n("div",{staticClass:"grid grid-cols-1 "},[n("div",{staticClass:"mb-1"},[n("p",{staticClass:" font-semibold text-14px text-oDark"},[e._v("Permissions")])]),e._l(e.permissionsDetails,(function(t,s){return n("div",{key:s,staticClass:"grid grid-cols-12 my-3"},[n("div",{staticClass:"col-span-3 font-medium text-14px text-oDark"},[e._v(" "+e._s(t.name)+" ")]),n("div",{staticClass:"col-span-9"},[n("div",{staticClass:"flex gap-1 md:gap-2"},e._l(t.action_types,(function(t,s){return n("div",{key:s},[n("p",{staticClass:"border-2 px-1.5 lg:px-3 py-1 border-gray-400 rounded-full flex items-center justify-center text-xs md:text-sm"},[e._v(" "+e._s(t)+" ")])])})),0)])])}))],2):e._e(),0!==e.permissionsDetails.length||e.isLoading?e._e():n("div",{staticClass:"text-center"},[n("p",[e._v(e._s(e.$t("components.organizationUsersManagement.addEdit.steps.permission.subtext.noPermissionsFound")))])])]),n("button",{ref:"submitButton",staticClass:"hidden",attrs:{type:"submit"}},[e._v(" Save ")])],1)]}}])})},D=[],A=(n("b0c0"),n("6062b"),n("3ca3"),n("ddb0"),n("99af"),n("07ac"),{name:"Step2",components:{},props:{userId:{type:null,required:!1},roles:{required:!0},formData:{required:!1},isEditing:{type:Boolean,required:!1,default:!1}},data:function(){return{isLoading:!1,form:{selectedRoles:[]},permissionsDetails:[]}},watch:{formData:{immediate:!0,deep:!0,handler:function(e){e&&(this.form=Object(g["a"])({},e))}},form:{immediate:!1,deep:!0,handler:function(e){Object(b["c"])(this.formData,e)||this.$emit("dirty",{step:1,data:this.form})}},"form.selectedRoles":{immediate:!0,deep:!0,handler:function(e){var t=this;if(e.length>0){this.isLoading=!0,this.permissionsDetails=[];var n=[];e.forEach((function(e){var s=t.$http.get(S["c"].role.details(e));n.push(s)})),this.$http.all(n).then(this.$http.spread((function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];n.forEach((function(e){return t.permissionsDetails.push(e.data.permissions)})),t.permissionsDetails=t.mergeArrays(t.permissionsDetails)}))).finally((function(){return t.isLoading=!1}))}else this.permissionsDetails=[]}}},methods:{mergeArrays:function(e){var t={};return e.forEach((function(e){e.forEach((function(e){var n=e.id,s=e.name,r=e.action_types;t[n]?t[n].action_types=Object(a["a"])(new Set([].concat(Object(a["a"])(t[n].action_types),Object(a["a"])(r)))):t[n]={id:n,name:s,action_types:Object(a["a"])(r)}}))})),Object.values(t)},submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.submitButton.click(),console.log("submitButton");case 2:case"end":return t.stop()}}),t)})))()},submitStep:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,s,r,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object(g["a"])({},e.form),r="PATCH",i=v["a"].api.update(e.userId),a=new FormData,null!==s&&void 0!==s&&null!==(n=s.selectedRoles)&&void 0!==n&&n.length&&s.selectedRoles.forEach((function(e){a.append("role_id",e)})),e.isLoading=!0,t.next=8,e.$http({method:r,url:i,data:a}).then((function(t){e.$emit("save",{step:2,data:t.data});var n="Organization User ".concat(e.isEditing?"updated":"added"," successfully");e.$notify({group:"important",type:"success",title:"Success",text:n},5e3)})).catch((function(t){var n;console.log("errorOccurred",t.response),e.$notify({group:"important",type:"error",title:"Error occurred!",text:null!==(n=t.response.data.message)&&void 0!==n?n:t.response.data},12e3),console.warn(t)})).finally((function(){return e.isLoading=!1}));case 8:case"end":return t.stop()}}),t)})))()}}}),z=A,U=Object(E["a"])(z,q,D,!1,null,null,null),M=U.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[n("loading",{attrs:{active:e.isLoading,"is-full-page":!1},on:{"update:active":function(t){e.isLoading=t}}}),n("form",{staticClass:"pt-6 sm:pb-24 2xl:px-6 2xl:pb-3 sm:px-10",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),s(e.submitStep)}}},[n("div",[n("h1",{staticClass:"pb-2"},[e._v(e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.paymentDetails.subHeading")))]),n("label",{staticClass:"flex items-center w-full mt-4 mb-4 cursor-pointer"},[n("TCheckbox",{model:{value:e.is_not_banking_details_required,callback:function(t){e.is_not_banking_details_required=t},expression:"is_not_banking_details_required"}}),n("span",{staticClass:"ml-3 font-semibold select-none text-14p mt-px text-oBlack"},[e._v(" "+e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.paymentDetails.checkBox.iDontHavePaymentDetails"))+" ")])],1)]),n("div",{staticClass:"grid grid-cols-2 gap-4 mt-8"},[n("AppInput",{attrs:{rules:e.form.paymentInfo.is_banking_details_required?"required":"",disabled:!e.form.paymentInfo.is_banking_details_required,label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.paymentDetails.title.bankAccountName"),placeholder:"e.g Junior Martin"},model:{value:e.form.paymentInfo.account_name,callback:function(t){e.$set(e.form.paymentInfo,"account_name",t)},expression:"form.paymentInfo.account_name"}}),n("AppInput",{attrs:{rules:e.form.paymentInfo.is_banking_details_required?"required":"",disabled:!e.form.paymentInfo.is_banking_details_required,type:"number",label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.paymentDetails.title.bankAccountNo"),placeholder:"e.g 110995330"},model:{value:e.form.paymentInfo.account_number,callback:function(t){e.$set(e.form.paymentInfo,"account_number",t)},expression:"form.paymentInfo.account_number"}})],1),n("div",{staticClass:"grid grid-cols-2 gap-4"},[n("AppInput",{attrs:{placeholder:"e.g. NY City Bank, NY",rules:e.form.paymentInfo.is_banking_details_required?"required":"",disabled:!e.form.paymentInfo.is_banking_details_required,label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.paymentDetails.title.branch")},model:{value:e.form.paymentInfo.branch_name,callback:function(t){e.$set(e.form.paymentInfo,"branch_name",t)},expression:"form.paymentInfo.branch_name"}}),n("AppInput",{attrs:{name:"Country",label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.paymentDetails.title.country"),rules:e.form.paymentInfo.is_banking_details_required?"required":"",disabled:!e.form.paymentInfo.is_banking_details_required,options:e.countries,valueAttribute:"id",textAttribute:"name",placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.settings.paymentDetails.placeHolder.country"),type:"richselect"},on:{"update:options":function(t){e.countries=t}},model:{value:e.form.paymentInfo.country,callback:function(t){e.$set(e.form.paymentInfo,"country",t)},expression:"form.paymentInfo.country"}})],1),n("AppInput",{attrs:{placeholder:"e.g. 026013673",rules:e.form.paymentInfo.is_banking_details_required?"required":"",disabled:!e.form.paymentInfo.is_banking_details_required,label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.paymentDetails.title.routingNumber"),type:"number"},model:{value:e.form.paymentInfo.routing_number,callback:function(t){e.$set(e.form.paymentInfo,"routing_number",t)},expression:"form.paymentInfo.routing_number"}}),n("div",[n("h1",{staticClass:"pb-2"},[e._v(e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.subHeading")))]),n("label",{staticClass:"flex items-center w-full mt-4 mb-4 cursor-pointer"},[n("TCheckbox",{model:{value:e.is_not_document_required,callback:function(t){e.is_not_document_required=t},expression:"is_not_document_required"}}),n("span",{staticClass:"ml-3 font-semibold select-none text-14p mt-px text-oBlack"},[e._v(" "+e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.checkBox.iWantToSkipThisStep"))+" ")])],1)]),n("div",{staticClass:"flex items-center pt-8"},[n("AppInput",{attrs:{rules:e.form.documentInfo.is_document_required?"required":"",disabled:!e.form.documentInfo.is_document_required,label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.title.nidNumber"),placeholder:"e.g. 92344563432"},model:{value:e.form.documentInfo.nid_number,callback:function(t){e.$set(e.form.documentInfo,"nid_number",t)},expression:"form.documentInfo.nid_number"}})],1),n("div",{staticClass:"grid grid-cols-2 gap-4 mt-8 "},[n("div",[n("ValidationProvider",{staticClass:"mt-2",attrs:{tag:"div",name:e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.title.nidFrontSide"),rules:e.form.documentInfo.is_document_required?"required":""},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[n("input-label",{attrs:{error:s[0],text:"NID Front Side "+(e.form.documentInfo.is_document_required?"*":"")}}),n("UploadImageAlt",{staticClass:"max-h-14",attrs:{current:e.form.documentInfo.nid_front_side_pic,text:e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.uploadImage1.text"),"button-text":e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.uploadImage1.buttonText")},model:{value:e.form.documentInfo.nid_front_side_pic,callback:function(t){e.$set(e.form.documentInfo,"nid_front_side_pic",t)},expression:"form.documentInfo.nid_front_side_pic"}}),n("input-error-item",{attrs:{message:s[0]}})]}}],null,!0)})],1),n("div",[n("ValidationProvider",{staticClass:"mt-2",attrs:{tag:"div",name:e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.title.nidFrontSide"),rules:e.form.documentInfo.is_document_required?"required":""},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[n("input-label",{attrs:{error:s[0],text:"NID Back Side "+(e.form.documentInfo.is_document_required?"*":"")}}),n("UploadImageAlt",{staticClass:"max-h-14",attrs:{current:e.form.documentInfo.nid_back_side_pic,text:e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.uploadImage2.text"),"button-text":e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.uploadImage2.buttonText")},model:{value:e.form.documentInfo.nid_back_side_pic,callback:function(t){e.$set(e.form.documentInfo,"nid_back_side_pic",t)},expression:"form.documentInfo.nid_back_side_pic"}}),n("input-error-item",{attrs:{message:s[0]}})]}}],null,!0)})],1)]),n("div",[n("label",{staticClass:"flex items-center w-full mt-4 mb-4 cursor-pointer"},[n("TCheckbox",{attrs:{disabled:e.is_not_document_required},model:{value:e.form.documentInfo.is_verified,callback:function(t){e.$set(e.form.documentInfo,"is_verified",t)},expression:"form.documentInfo.is_verified"}}),n("span",{class:["ml-3 font-semibold select-none text-14p mt-px",e.is_not_document_required?"text-gray-500":"text-oBlack"]},[e._v(" "+e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.personalIdentification.checkBox.verified"))+" ")])],1)]),n("h1",{staticClass:"pt-12"},[e._v(e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.drivingLicense.subHeading")))]),n("div",{staticClass:"mt-6"},[n("AppInput",{attrs:{name:"Driving License",label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.drivingLicense.title.drivingLicense"),options:e.getLicenseOptions,"text-attribute":"text","value-attribute":"value","hide-search-box":!0,disabled:!e.form.documentInfo.is_document_required},model:{value:e.form.documentInfo.has_driving_license,callback:function(t){e.$set(e.form.documentInfo,"has_driving_license",t)},expression:"form.documentInfo.has_driving_license"}})],1),e._e(),n("div",[n("h1",{staticClass:"pb-2"},[e._v(e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.currentAddress.subHeading")))]),n("label",{staticClass:"flex items-center w-full mt-4 mb-4 cursor-pointer"},[n("TCheckbox",{model:{value:e.is_not_address_required,callback:function(t){e.is_not_address_required=t},expression:"is_not_address_required"}}),n("span",{staticClass:"ml-3 font-semibold select-none text-14p mt-px text-oBlack"},[e._v(" "+e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.currentAddress.checkBox.iWantToSkipThisStep"))+" ")])],1)]),n("div",{staticClass:"grid grid-cols-2 gap-4 mt-8"},[n("AppInput",{attrs:{name:"Country",label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.currentAddress.title.country"),rules:e.form.addressInfo.is_address_required?"required":"",disabled:!e.form.addressInfo.is_address_required,options:e.countries,valueAttribute:"id",textAttribute:"name",placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.settings.currentAddress.placeHolder.country"),type:"richselect"},on:{"update:options":function(t){e.countries=t}},model:{value:e.form.addressInfo.current_address_country,callback:function(t){e.$set(e.form.addressInfo,"current_address_country",t)},expression:"form.addressInfo.current_address_country"}}),n("AppInput",{attrs:{rules:e.form.addressInfo.is_address_required?"required":"",disabled:!e.form.addressInfo.is_address_required,label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.currentAddress.title.zipCode"),placeholder:"e.g. 53432"},model:{value:e.form.addressInfo.current_address_zip_code,callback:function(t){e.$set(e.form.addressInfo,"current_address_zip_code",t)},expression:"form.addressInfo.current_address_zip_code"}})],1),n("AppInput",{attrs:{name:"Address",label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.currentAddress.title.address"),type:"textarea",placeholder:"2307 Oak Street, Old Forge, New York.",disabled:!e.form.addressInfo.is_address_required},model:{value:e.form.addressInfo.current_address_full,callback:function(t){e.$set(e.form.addressInfo,"current_address_full",t)},expression:"form.addressInfo.current_address_full"}}),n("h1",{staticClass:"pt-6"},[e._v(e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.permanentAddress.subHeading")))]),n("label",{staticClass:"flex items-center w-full mt-8 mb-4 cursor-pointer"},[n("TCheckbox",{attrs:{disabled:!e.form.addressInfo.is_address_required},model:{value:e.permanentAddressIsSame,callback:function(t){e.permanentAddressIsSame=t},expression:"permanentAddressIsSame"}}),n("span",{class:["ml-3 font-semibold select-none text-14p mt-px",e.form.addressInfo.is_address_required?"text-oBlack":"text-gray-500"]},[e._v(" "+e._s(e.$t("components.organizationUsersManagement.addEdit.steps.settings.permanentAddress.checkBox.sameAsCurrentAddress"))+" ")])],1),n("div",{staticClass:"grid grid-cols-2 gap-4 mt-8"},[n("AppInput",{attrs:{name:"Country",label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.permanentAddress.title.country"),rules:!e.form.addressInfo.is_address_required||e.permanentAddressIsSame?"":"required",options:e.countries,valueAttribute:"id",textAttribute:"name",placeholder:e.$t("components.organizationUsersManagement.addEdit.steps.settings.permanentAddress.placeHolder.country"),type:"richselect",disabled:!e.form.addressInfo.is_address_required||e.permanentAddressIsSame,variant:{readonly:e.permanentAddressIsSame}},on:{"update:options":function(t){e.countries=t}},model:{value:e.form.addressInfo.permanent_address_country,callback:function(t){e.$set(e.form.addressInfo,"permanent_address_country",t)},expression:"form.addressInfo.permanent_address_country"}}),n("AppInput",{attrs:{rules:!e.form.addressInfo.is_address_required||e.permanentAddressIsSame?"":"required",label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.permanentAddress.title.zipCode"),placeholder:"e.g 53432",disabled:!e.form.addressInfo.is_address_required||e.permanentAddressIsSame},model:{value:e.form.addressInfo.permanent_address_zip_code,callback:function(t){e.$set(e.form.addressInfo,"permanent_address_zip_code",t)},expression:"form.addressInfo.permanent_address_zip_code"}})],1),n("div",[n("AppInput",{attrs:{name:"Address",label:e.$t("components.organizationUsersManagement.addEdit.steps.settings.permanentAddress.title.address"),rules:!e.form.addressInfo.is_address_required||e.permanentAddressIsSame?"":"required",placeholder:"2307 Oak Street, Old Forge, New York.",disabled:!e.form.addressInfo.is_address_required||e.permanentAddressIsSame,variant:{readonly:e.permanentAddressIsSame}},model:{value:e.form.addressInfo.permanent_address_full,callback:function(t){e.$set(e.form.addressInfo,"permanent_address_full",t)},expression:"form.addressInfo.permanent_address_full"}})],1),n("button",{ref:"submitButton",staticClass:"hidden",attrs:{type:"submit"}},[e._v(" Save ")])],1)]}}])})},O=[],T=n("5f81"),j=n("92e78"),P={name:"Step3",components:{InputLabel:T["default"],UploadImageAlt:j["default"]},props:{countries:{required:!0},userId:{required:!0},formData:{required:!1},isEditing:{type:Boolean,required:!1,default:!1}},data:function(){return{isLoading:!1,is_not_banking_details_required:!0,is_not_document_required:!0,is_not_address_required:!0,permanentAddressIsSame:!1,form:{paymentInfo:{account_name:"",account_number:"",branch_name:"",country:"",routing_number:"",is_banking_details_required:!1},documentInfo:{nid_number:"",nid_front_side_pic:"",nid_back_side_pic:"",is_verified:!1,has_driving_license:!1,is_document_required:!1},addressInfo:{current_address_country:null,current_address_zip_code:"",current_address_full:"",permanent_address_country:null,permanent_address_zip_code:"",permanent_address_full:"",is_address_required:!1}}}},watch:{formData:{immediate:!0,deep:!0,handler:function(e){if(e){var t=e.paymentInfo;this.form.paymentInfo=Object(g["a"])({},t),this.is_not_banking_details_required=!this.form.paymentInfo.is_banking_details_required}}},form:{immediate:!1,deep:!0,handler:function(e){Object(b["c"])(this.formData,e)||this.$emit("dirty",{step:2,data:this.form})}},is_not_banking_details_required:{immediate:!0,deep:!0,handler:function(e){this.form.paymentInfo.is_banking_details_required=!e}},is_not_document_required:{immediate:!0,deep:!0,handler:function(e){this.form.documentInfo.is_document_required=!e,b["a"].$emit("checkbox-status",this.is_not_document_required)}},is_not_address_required:{immediate:!0,deep:!0,handler:function(e){this.form.addressInfo.is_address_required=!e}},permanentAddressIsSame:function(e){e?(this.form.addressInfo.permanent_address_country=this.form.addressInfo.current_address_country,this.form.addressInfo.permanent_address_zip_code=this.form.addressInfo.current_address_zip_code,this.form.addressInfo.permanent_address_full=this.form.addressInfo.current_address_full):(this.form.addressInfo.permanent_address_country="",this.form.addressInfo.permanent_address_zip_code="",this.form.addressInfo.permanent_address_full="")}},methods:{submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.submitButton.click();case 1:case"end":return t.stop()}}),t)})))()},submitStep:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,s,r,i,a,o,d,l,u,c,p,m,f,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,n=[],s=v["a"].api.payment_create(e.userId),r=new b["x"](e.form.paymentInfo).toFormData(),i="POST",a=e.$http({url:s,method:i,data:r}),n.push(a),o=v["a"].api.document_create(e.userId),d=Object(g["a"])({},e.form.documentInfo),null!=d.nid_front_side_pic&&"string"!==typeof d.nid_front_side_pic||delete d.nid_front_side_pic,null!=d.nid_back_side_pic&&"string"!==typeof d.nid_back_side_pic||delete d.nid_back_side_pic,l=new b["x"](d).toFormData(),u="POST",c=e.$http({url:o,method:u,data:l}),n.push(c),console.log("documentInfoReq",c),p=v["a"].api.address_create(e.userId),m=new b["x"](e.form.addressInfo).toFormData(),f="PATCH",_=e.$http({url:p,method:f,data:m}),n.push(_),console.log("addressInfoReq",_),t.next=24,e.$http.all(n).then(e.$http.spread((function(){e.$notify({group:"important",type:"success",title:"Success",text:"Update Successfully"},5e3),e.$emit("save",{step:3,data:{}});for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];console.log("responses",n)}))).catch((function(t){var n;console.log("err-",{err:t});var s=Object.values(t.message);s.length>0&&e.$emit("show_error",s[0][0]),e.$notify({group:"important",type:"error",title:"Error occurred!",text:null!==(n=t.response.data.message)&&void 0!==n?n:t.response.data},12e3),console.warn(t)})).finally((function(){return e.isLoading=!1}));case 24:case"end":return t.stop()}}),t)})))()}}},L=P,F=(n("8375"),Object(E["a"])(L,N,O,!1,null,"25425964",null)),B=F.exports,R={name:"UserAddEdit",components:{EdgeStack:l["a"],XStepper:u["a"],XStepperNavigation:c["a"],AppButton:p["default"],Step1:w,Step2:M,Step3:B},props:{esId:{type:String,default:"user-add-edit"},stepperMode:{type:String,default:"free"},stepperStep:{type:Number,default:1},userId:{type:null,required:!1},userData:{type:Object,required:!1}},data:function(){return{isLoading:!1,errors:[],stepperSteps:this.isEditing?[{title:this.$t("components.organizationUsersManagement.addEdit.tabs.profile"),free:!0},{title:this.$t("components.organizationUsersManagement.addEdit.tabs.permission"),free:!0},{title:this.$t("components.organizationUsersManagement.addEdit.tabs.settings"),free:!0}]:[{title:this.$t("components.organizationUsersManagement.addEdit.tabs.profile"),free:!0},{title:this.$t("components.organizationUsersManagement.addEdit.tabs.permission"),free:!1},{title:this.$t("components.organizationUsersManagement.addEdit.tabs.settings"),free:!1}],stepperCurrentStep:null,roles:null,fleets:null,countries:null,currencies:null,theUserId:null}},computed:{isEditing:function(){return!!this.userData},getTitleText:function(){return this.isEditing?this.$t("components.organizationUsersManagement.addEdit.headline.update"):this.$t("components.organizationUsersManagement.addEdit.headline.add")},getSubmitButtonText:function(){return this.stepperCurrentStep>this.stepperSteps.length-1?this.$t("components.stepNavigation.finish"):this.isEditing?this.$t("components.stepNavigation.update"):this.$t("components.stepNavigation.saveAndContinue")},getStep1FormData:function(){if(this.userData){var e,t,n,s,r,i,o=this.userData,d=[];null!==o&&void 0!==o&&null!==(e=o.assigned_fleets)&&void 0!==e&&e.length&&(d=o.assigned_fleets.map((function(e){return e.id})));var l=[];return null!==o&&void 0!==o&&null!==(t=o.roles)&&void 0!==t&&t.length&&(l=o.roles.map((function(e){return e.id}))),{profile_pic:null===o||void 0===o||null===(n=o.profile)||void 0===n?void 0:n.profile_pic,selectedRoles:Object(a["a"])(l),role_name:null===o||void 0===o||null===(s=o.role)||void 0===s?void 0:s.role_name,username:null===o||void 0===o?void 0:o.username,ranger_job_type:null===o||void 0===o||null===(r=o.profile)||void 0===r?void 0:r.ranger_job_type,full_name:o.full_name,country_code:o.country_code,phone_number:o.phone_number,email:o.email,password:o.password,birthday:null===o||void 0===o?void 0:o.profile.birthday,gender:null===o||void 0===o?void 0:o.profile.gender,assigned_fleets:Object(a["a"])(d),preferred_currency:null===o||void 0===o||null===(i=o.preferred_currency)||void 0===i?void 0:i.id}}return null},getStep2FormData:function(){if(this.userData){var e,t=this.userData,n=[];return null!==t&&void 0!==t&&null!==(e=t.roles)&&void 0!==e&&e.length&&(n=t.roles.map((function(e){return e.id}))),{selectedRoles:Object(a["a"])(n)}}return null},getStep3FormData:function(){if(this.userData){var e,t,n,s,r,i,a,o,d,l,u,c,p,m,f,g,_,h,b,v,y,x,I,S,k,$,E,C,w,q,D,A,z=null!==(e=this.userData)&&void 0!==e&&e.payment_info?{account_name:null===(t=this.userData)||void 0===t||null===(n=t.payment_info)||void 0===n?void 0:n.account_name,account_number:null===(s=this.userData)||void 0===s||null===(r=s.payment_info)||void 0===r?void 0:r.account_number,branch_name:null===(i=this.userData)||void 0===i||null===(a=i.payment_info)||void 0===a?void 0:a.branch_name,country:null===(o=this.userData)||void 0===o||null===(d=o.payment_info)||void 0===d?void 0:d.country,routing_number:null===(l=this.userData)||void 0===l||null===(u=l.payment_info)||void 0===u?void 0:u.routing_number,is_banking_details_required:(null===(c=this.userData)||void 0===c?void 0:c.is_banking_details_required)||!1}:null,U=null!==(p=this.userData)&&void 0!==p&&p.document_info?{nid_number:null===(m=this.userData)||void 0===m||null===(f=m.document_info)||void 0===f?void 0:f.nid_number,nid_front_side_pic:null===(g=this.userData)||void 0===g||null===(_=g.document_info)||void 0===_?void 0:_.nid_front_side_pic,nid_back_side_pic:null===(h=this.userData)||void 0===h||null===(b=h.document_info)||void 0===b?void 0:b.nid_back_side_pic,is_verified:null===(v=this.userData)||void 0===v||null===(y=v.document_info)||void 0===y?void 0:y.is_verified,has_driving_license:null===(x=this.userData)||void 0===x||null===(I=x.document_info)||void 0===I?void 0:I.has_driving_license,is_document_required:(null===(S=this.userData)||void 0===S?void 0:S.is_document_required)||!1}:null,M=null!==(k=this.userData)&&void 0!==k&&k.address_info?{current_address_country:null===($=this.userData)||void 0===$?void 0:$.address_info.current_address_country,current_address_zip_code:null===(E=this.userData)||void 0===E?void 0:E.address_info.current_address_zip_code,current_address_full:null===(C=this.userData)||void 0===C?void 0:C.address_info.current_address_full,permanent_address_country:null===(w=this.userData)||void 0===w?void 0:w.address_info.permanent_address_country,permanent_address_zip_code:null===(q=this.userData)||void 0===q?void 0:q.address_info.permanent_address_zip_code,permanent_address_full:null===(D=this.userData)||void 0===D?void 0:D.address_info.permanent_address_full,is_address_required:(null===(A=this.userData)||void 0===A?void 0:A.is_address_required)||!1}:null;return{paymentInfo:z,documentInfo:U,addressInfo:M}}return null}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(o["a"].index).then((function(e){return e.data.data})).catch((function(e){return console.log(e)}));case 2:return e.roles=t.sent,e.roles.push({id:e.$store.getters["auth/roleInfo"].id,role_name:"Owner"}),t.next=6,e.$http.get(S["c"].dropdown.fleets()).then((function(e){return e.data.data})).catch((function(e){return console.log("err = ",e)}));case 6:return e.fleets=t.sent,t.next=9,e.$http.get(d["a"].api.country).then((function(e){return e.data.data})).catch((function(e){return console.log(e)}));case 9:return e.countries=t.sent,t.next=12,e.$http.get(d["a"].api.organizationCurrencies).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 12:e.currencies=t.sent;case 13:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;this.$edgeStack.emitter.on(this.$edgeStack.getEventName("closed",this.esId),(function(){e.stepperCurrentStep=1}))},beforeDestroy:function(){this.$edgeStack.emitter.off(this.$edgeStack.getEventName("closed",this.esId))},watch:{userId:{immediate:!0,handler:function(e){e&&(this.theUserId=e)}},stepperStep:{immediate:!0,handler:function(e){this.stepperCurrentStep=e}}},methods:{onDirty:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.esId;return!0===e?this.$edgeStack.shouldConfirm(t):this.$edgeStack.shouldNotConfirm(t)},onSave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:null,data:{}};console.log(t),1===t.step&&(this.theUserId=t.data.id,this.$xStepper.defineSteps(this.esId,[{title:"Profile",free:!0},{title:"Permission",free:!0},{title:"Settings",free:!1}]),"free"===this.stepperMode?this.$edgeStack.shouldNotConfirm(this.esId):this.$edgeStack.shouldConfirm(this.esId),this.$xStepper.navigate(this.esId).next()),2===t.step&&(this.$xStepper.defineSteps(this.esId,[{title:"Profile",free:!0},{title:"Permission",free:!0},{title:"Settings",free:!0}]),"free"===this.stepperMode?this.$edgeStack.shouldNotConfirm(this.esId):this.$edgeStack.shouldConfirm(this.esId),this.$xStepper.navigate(this.esId).next()),3===t.step&&(this.$xStepper.defineSteps(this.esId,[{title:"Profile",free:!0},{title:"Permission",free:!0},{title:"Settings",free:!0}]),this.$edgeStack.shouldNotConfirm(this.esId),this.$edgeStack.close(this.esId),this.$edgeStack.emitter.on(this.$edgeStack.getEventName("closed",this.esId),(function(){e.stepperCurrentStep=1})),window.dispatchEvent(new Event(this.$config.orgUser.events.refresh)))},onSubmit:function(e){this.$refs["step".concat(e.step)].submit()}}},H=R,V=(n("9b65"),Object(E["a"])(H,s,r,!1,null,"114bb51e",null));t["a"]=V.exports},"5ac1":function(e,t,n){},"5f81":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"block w-full pb-1 font-semibold leading-normal text-gray-700 text-14px  ",class:{"text-gray-700":!!e.error,"text-red-600":!!e.error,"flex items-center":e.isShowInfoSymbol}},[e._t("default",(function(){return[e._v(e._s(e.text))]})),e.isShowInfoSymbol?s("img",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"<div class='w-40 p-1 text-xs'>"+e.info+"</div>",expression:"`<div class='w-40 p-1 text-xs'>${info}</div>`",modifiers:{top:!0}}],staticClass:"cursor-pointer ml-1 h-4 w-4",attrs:{src:n("b581")}}):e._e()],2)},r=[],i={name:"InputLabel",props:{text:{type:String},error:{type:String},isShowInfoSymbol:{type:Boolean,default:!1},info:{type:String,default:""}}},a=i,o=n("2877"),d=Object(o["a"])(a,s,r,!1,null,null,null);t["default"]=d.exports},"6062b":function(e,t,n){"use strict";var s=n("6d61"),r=n("6566");e.exports=s("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},8375:function(e,t,n){"use strict";n("e202")},"92e78":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.getWrapperClasses,on:{click:e.onClick,dragover:e.onDragover,dragleave:e.onDragleave,mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave,drop:e.onDrop}},[n("input",{ref:"file",staticClass:"absolute w-0 h-0 overflow-hidden opacity-0",attrs:{type:"file",accept:".png, .jpg"},on:{change:e.onChange}}),e.previewImage||e.current?n("div",{key:"upload-preview-or-placeholder",staticClass:"w-full h-full relative flex justify-center items-center"},[e.current&&!e.previewImage?n("img",{staticClass:"object-cover w-full h-full overflow-hidden",attrs:{src:e.current}}):e._e(),e.previewImage?n("img",{staticClass:"object-cover w-full h-full overflow-hidden",attrs:{src:e.previewImage}}):e._e(),e.getShowPreviewTextStatus?n("p",{staticClass:"absolute text-oWhite text-base px-2 py-1 bg-gray-400 rounded-md "},[e._v(" Press to replace ")]):e._e()]):n("div",{key:"upload-preview-or-placeholder",staticClass:"grid place-items-center"},[n("span",{staticClass:"upload-text"},[e._v(e._s(e.text))]),n("button",{staticClass:"upload-button",attrs:{type:"button"}},[e._v(e._s(e.buttonText))])])])},r=[],i=n("4a9d"),a={name:"UploadImageAlt",props:{value:{required:!1},current:{required:!1},text:{type:String,required:!1,default:"Select or Drag files to upload"},buttonText:{type:String,required:!1,default:"Upload"},variant:{requried:!1,default:"default"},disabled:{required:!1,default:!0}},data:function(){return{isHovering:!1,file:null,previewImage:null}},computed:{getWrapperClasses:function(){return"upload-wrapper"},getShowPreviewTextStatus:function(){return this.isHovering}},mounted:function(){var e=this;i["a"].$on("checkbox-status",(function(t){e.disabled=t}))},methods:{onChange:function(){var e=this;console.log("onChange-v");var t=this.$refs.file,n=t.files;if(n&&n[0]){var s=new FileReader;s.onload=function(t){e.previewImage=t.target.result},s.readAsDataURL(n[0]),this.$emit("input",n[0])}},onClick:function(){this.disabled||this.$refs.file.click()},onDragover:function(e){console.log("dragover = ",e),e.preventDefault(),e.currentTarget.classList.contains("onDragover")||e.currentTarget.classList.add("onDragover")},onDragleave:function(e){console.log("dragleave = ",e),e.currentTarget.classList.remove("onDragover"),e.currentTarget.classList.add("onDragleave")},onDrop:function(e){console.log("drop = ",e),e.preventDefault(),this.$refs.file.files=e.dataTransfer.files,this.onChange(),e.currentTarget.classList.remove("onDragover"),e.currentTarget.classList.remove("onDragleave"),e.currentTarget.classList.add("onDrop")},onMouseEnter:function(){this.isHovering=!0},onMouseLeave:function(){this.isHovering=!1}}},o=a,d=(n("cae2"),n("2877")),l=Object(d["a"])(o,s,r,!1,null,"18b9101e",null);t["default"]=l.exports},"9b65":function(e,t,n){"use strict";n("18b0")},cae2:function(e,t,n){"use strict";n("f0a8")},e202:function(e,t,n){},e5b3:function(e,t,n){"use strict";var s=n("5530"),r=n("8886");t["a"]=Object(s["a"])(Object(s["a"])({},r["a"]),{},{index:"/dashboard/roles/?dropdown",create:"/dashboard/roles/",update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return"/dashboard/roles/".concat(e,"/")}})},f0a8:function(e,t,n){}}]);
//# sourceMappingURL=chunk-09bc5093.fd61a94a.js.map