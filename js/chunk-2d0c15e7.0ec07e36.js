(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c15e7"],{"466e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex justify-between  text-oWhite rounded-md  cursor-pointer",class:t.getActivityStatusClassVariant,on:{click:function(e){return t.openModal()}}},[s("div",{staticClass:"flex justify-center items-center px-3 py-1 "},[t._v(" "+t._s(t.getActivityStatusTitle)+" ")]),t._m(0)]),s("t-modal",{ref:"popup",attrs:{name:"buyer-activity-status-"+t.id,variant:"confirmation",hideCloseButton:!0,disableBodyScroll:!0,escToClose:!t.isLoading,clickToClose:!t.isLoading}},[s("div",[s("section",{staticClass:"px-4 text-2xl font-extrabold text-center mt-8"},[t._v(" "+t._s(t.$t("components.marketPlaceManagement.orders.details.marketplace.steps.buyers.modal.headline"))+" ")]),s("section",{staticClass:"px-4 py-5",class:"A"===t.form.user_status?"mb-20":""},[s("AppInput",{attrs:{type:"richselect",name:t.$t("components.marketPlaceManagement.orders.details.marketplace.steps.buyers.modal.title.status"),label:t.$t("components.marketPlaceManagement.orders.details.marketplace.steps.buyers.modal.title.status"),rules:"required",placeholder:t.$t("components.marketPlaceManagement.orders.details.marketplace.steps.buyers.modal.placeHolder.status"),"value-attribute":"value","text-attribute":"text",options:t.activityOptions},model:{value:t.form.user_status,callback:function(e){t.$set(t.form,"user_status",e)},expression:"form.user_status"}})],1),"A"!==t.form.user_status?s("section",{staticClass:"px-4 "},[s("AppInput",{attrs:{type:"richselect",name:"reasons",label:t.$t("components.marketPlaceManagement.orders.details.marketplace.steps.buyers.modal.title.reasons"),rules:"required",placeholder:t.$t("components.marketPlaceManagement.orders.details.marketplace.steps.buyers.modal.placeHolder.reasons"),"value-attribute":"value","text-attribute":"text",options:"H"===t.form.user_status?t.reasons.hold:t.reasons.deactivate},model:{value:t.form.status_reason,callback:function(e){t.$set(t.form,"status_reason",e)},expression:"form.status_reason"}})],1):t._e(),"A"!==t.form.user_status?s("section",{staticClass:"px-4 py-5"},[s("AppInput",{attrs:{type:"textarea",name:"remarks",label:t.$t("components.marketPlaceManagement.orders.details.marketplace.steps.buyers.modal.title.remarks"),rules:"",placeholder:""},model:{value:t.form.status_remark,callback:function(e){t.$set(t.form,"status_remark",e)},expression:"form.status_remark"}})],1):t._e(),s("section",{staticClass:"flex items-center justify-end px-4 py-4 mt-6 space-x-5 bg-gray-50"},[s("AppButton",{class:"w-1/2",attrs:{variant:"secondary"},on:{click:function(e){return t.closeModal()}}},[t._v(" "+t._s(t.$t("components.stepNavigation.cancel"))+" ")]),s("AppButton",{class:"w-1/2",attrs:{isLoading:t.isLoading},on:{click:function(e){return t.assignStatus()}}},[t._v(" "+t._s(t.$t("components.marketPlaceManagement.orders.details.marketplace.steps.buyers.modal.btnText.assign"))+" ")])],1)])])],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex justify-center items-center border-l w-7 p-0"},[s("i",{staticClass:"fas fa-chevron-down"})])}],n=s("5530"),o=s("1da1"),i=(s("96cf"),s("a9e3"),s("d81d"),s("b64b"),s("d3b7"),s("c820")),u=s("2ef0"),c=s.n(u),l={name:"VehicleAssignToBuyerAction",props:{id:{type:[String,Number],required:!0},data:{type:Object,required:!0}},data:function(){return{isLoading:!1,activityOptions:[{value:"A",text:"Activate"},{value:"H",text:"Hold"},{value:"D",text:"Deactivate"}],reasons:{deactivate:[{text:"Damaged Vehicle",value:"DAMAGED_VEHICLE"},{text:"Violates Geofence Rules",value:"GEOFENCE_RULE_VIOLATION"},{text:"Payment Compliance",value:"PAYMENT_COMPLIANCE"}],hold:[{text:"Suspicious Activity - OTP",value:"SUSPICIOUS_ACTIVITY_OTP"},{text:"Suspicious Activity - Vehicle",value:"SUSPICIOUS_ACTIVITY_VEHICLE"},{text:"Suspicious Activity - Transactions",value:"SUSPICIOUS_ACTIVITY_TRANSACTIONS"},{text:"Suspicious Activity - Trips",value:"SUSPICIOUS_ACTIVITY_TRIPS"}]},form:{user_status:null,status_reason:null,status_remark:null}}},computed:{getActivityStatusTitle:function(){return"A"===this.data.account_status?"Active":"H"===this.data.account_status?"Hold":"Deactive"},getActivityStatusClassVariant:function(){return"A"===this.data.account_status?"bg-green-500":"H"===this.data.account_status?"bg-orange-500":"bg-gray-400"}},methods:{openModal:function(){this.form.user_status=null,this.form.status_reason=null,this.form.status_remark=null,this.$modal.show("buyer-activity-status-".concat(this.id))},closeModal:function(){this.form.user_status=null,this.form.status_reason=null,this.form.status_remark=null,this.$modal.hide("buyer-activity-status-".concat(this.id))},assignStatus:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(o in t.isLoading=!0,s=i["c"].user.org.updateStatus(t.data.id),a=Object(n["a"])({},t.form),"A"===a.user_status?(delete a.status_reason,delete a.status_remark):Object.keys(t.form).map((function(t){c.a.isEmpty(a[t])&&delete a[t]})),r=new FormData,a)r.append(o,a[o]);return e.next=8,t.$http.patch(s,r).then((function(){t.$notify({group:"generic",type:"success",title:"Successful",text:"Status update successfully"},3e3),t.closeModal(),t.$emit("force-sync")})).catch((function(e){console.log("unassigned-err",{err:e}),t.$notify({group:"generic",type:"error",title:"Error occurred!",text:"Failed to update status"},7e3)})).finally((function(){return t.isLoading=!1}));case 8:case"end":return e.stop()}}),e)})))()}}},d=l,m=s("2877"),p=Object(m["a"])(d,a,r,!1,null,"5123da0c",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0c15e7.0ec07e36.js.map