(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22bda2"],{f178:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("AppButton",{attrs:{height:"27px",width:"60px",rounded:"none",variant:t.isPayable?"blue":"gray",text:"Pay"},on:{click:function(e){return t.openModal()}}}),n("t-modal",{ref:"popup",attrs:{name:"available-fund-transfer-"+t.id,variant:"confirmation",hideCloseButton:!0,disableBodyScroll:!0,escToClose:!t.isLoading,clickToClose:!t.isLoading}},[n("div",[n("section",{staticClass:"px-4 text-2xl font-extrabold text-center mt-8"},[t._v(" Please enter payable amount ")]),n("section",{staticClass:"px-4 "},[n("AppInput",{attrs:{rules:"required",label:"Amount",type:"number",step:"0.01",name:"Amount"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),n("section",{staticClass:"flex items-center justify-end px-4 py-4 mt-6 space-x-5 bg-gray-50"},[n("AppButton",{class:"w-1/2",attrs:{variant:"secondary"},on:{click:function(e){return t.closeModal()}}},[t._v(" Cancel ")]),n("AppButton",{class:"w-1/2",attrs:{isLoading:t.isLoading},on:{click:function(e){return t.transferMoney()}}},[t._v(" Transfer ")])],1)])])],1)},o=[],r=n("5530"),i=n("1da1"),s=(n("96cf"),n("a9e3"),n("d3b7"),n("3e12")),u={name:"AvailableFundsTransfer",props:{id:{type:[String,Number],required:!0},data:{type:Object,required:!0}},data:function(){return{isLoading:!1,form:{amount:null,buyer:null}}},computed:{isPayable:function(){return this.data.available_funds>0}},watch:{data:{deep:!1,immediate:!0,handler:function(t){console.log("updateData-d",t),t&&(this.form.amount=t.available_funds,this.form.buyer=t.id,console.log("updateData-f",this.form))}}},methods:{openModal:function(){this.data.available_funds<=0?this.$notify({group:"generic",type:"default",title:"Info",text:"Don't have enough funds to transfer"},5e3):this.$modal.show("available-fund-transfer-".concat(this.id))},closeModal:function(){this.form.amount=this.data.available_funds,this.$modal.hide("available-fund-transfer-".concat(this.id))},transferMoney:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i in t.isLoading=!0,n=s["a"].api.transferMoneyOfFunds(),a=Object(r["a"])({},t.form),o=new FormData,a)o.append(i,a[i]);return e.next=7,t.$http.post(n,o).then((function(){t.$notify({group:"generic",type:"success",title:"Successful",text:"Transfer successfully"},3e3),t.closeModal(),t.$emit("force-sync")})).catch((function(e){console.log("transfer-money-err",{err:e}),t.$notify({group:"generic",type:"error",title:"Error occurred!",text:"Failed to update status"},7e3)})).finally((function(){return t.isLoading=!1}));case 7:case"end":return e.stop()}}),e)})))()}}},l=u,c=n("2877"),d=Object(c["a"])(l,a,o,!1,null,"e1cb6b60",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d22bda2.2d67175d.js.map